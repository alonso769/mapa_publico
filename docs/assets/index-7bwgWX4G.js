function yw(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ww(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b_={exports:{}},wc={},D_={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),Tw=Symbol.for("react.portal"),Sw=Symbol.for("react.fragment"),Iw=Symbol.for("react.strict_mode"),Aw=Symbol.for("react.profiler"),xw=Symbol.for("react.provider"),Cw=Symbol.for("react.context"),Pw=Symbol.for("react.forward_ref"),Rw=Symbol.for("react.suspense"),Lw=Symbol.for("react.memo"),Nw=Symbol.for("react.lazy"),vm=Symbol.iterator;function kw(e){return e===null||typeof e!="object"?null:(e=vm&&e[vm]||e["@@iterator"],typeof e=="function"?e:null)}var M_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V_=Object.assign,z_={};function To(e,t,n){this.props=e,this.context=t,this.refs=z_,this.updater=n||M_}To.prototype.isReactComponent={};To.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};To.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function U_(){}U_.prototype=To.prototype;function Ef(e,t,n){this.props=e,this.context=t,this.refs=z_,this.updater=n||M_}var wf=Ef.prototype=new U_;wf.constructor=Ef;V_(wf,To.prototype);wf.isPureReactComponent=!0;var ym=Array.isArray,B_=Object.prototype.hasOwnProperty,Tf={current:null},F_={key:!0,ref:!0,__self:!0,__source:!0};function j_(e,t,n){var i,s={},o=null,l=null;if(t!=null)for(i in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)B_.call(t,i)&&!F_.hasOwnProperty(i)&&(s[i]=t[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),g=0;g<h;g++)f[g]=arguments[g+2];s.children=f}if(e&&e.defaultProps)for(i in h=e.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:hl,type:e,key:o,ref:l,props:s,_owner:Tf.current}}function Ow(e,t){return{$$typeof:hl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sf(e){return typeof e=="object"&&e!==null&&e.$$typeof===hl}function bw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Em=/\/+/g;function ph(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bw(""+e.key):t.toString(36)}function Tu(e,t,n,i,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case hl:case Tw:l=!0}}if(l)return l=e,s=s(l),e=i===""?"."+ph(l,0):i,ym(s)?(n="",e!=null&&(n=e.replace(Em,"$&/")+"/"),Tu(s,t,n,"",function(g){return g})):s!=null&&(Sf(s)&&(s=Ow(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Em,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=i===""?".":i+":",ym(e))for(var h=0;h<e.length;h++){o=e[h];var f=i+ph(o,h);l+=Tu(o,t,n,f,s)}else if(f=kw(e),typeof f=="function")for(e=f.call(e),h=0;!(o=e.next()).done;)o=o.value,f=i+ph(o,h++),l+=Tu(o,t,n,f,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function eu(e,t,n){if(e==null)return e;var i=[],s=0;return Tu(e,i,"","",function(o){return t.call(n,o,s++)}),i}function Dw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ze={current:null},Su={transition:null},Mw={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Su,ReactCurrentOwner:Tf};function H_(){throw Error("act(...) is not supported in production builds of React.")}xt.Children={map:eu,forEach:function(e,t,n){eu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eu(e,function(){t++}),t},toArray:function(e){return eu(e,function(t){return t})||[]},only:function(e){if(!Sf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xt.Component=To;xt.Fragment=Sw;xt.Profiler=Aw;xt.PureComponent=Ef;xt.StrictMode=Iw;xt.Suspense=Rw;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw;xt.act=H_;xt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=V_({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Tf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(f in t)B_.call(t,f)&&!F_.hasOwnProperty(f)&&(i[f]=t[f]===void 0&&h!==void 0?h[f]:t[f])}var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){h=Array(f);for(var g=0;g<f;g++)h[g]=arguments[g+2];i.children=h}return{$$typeof:hl,type:e.type,key:s,ref:o,props:i,_owner:l}};xt.createContext=function(e){return e={$$typeof:Cw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xw,_context:e},e.Consumer=e};xt.createElement=j_;xt.createFactory=function(e){var t=j_.bind(null,e);return t.type=e,t};xt.createRef=function(){return{current:null}};xt.forwardRef=function(e){return{$$typeof:Pw,render:e}};xt.isValidElement=Sf;xt.lazy=function(e){return{$$typeof:Nw,_payload:{_status:-1,_result:e},_init:Dw}};xt.memo=function(e,t){return{$$typeof:Lw,type:e,compare:t===void 0?null:t}};xt.startTransition=function(e){var t=Su.transition;Su.transition={};try{e()}finally{Su.transition=t}};xt.unstable_act=H_;xt.useCallback=function(e,t){return Ze.current.useCallback(e,t)};xt.useContext=function(e){return Ze.current.useContext(e)};xt.useDebugValue=function(){};xt.useDeferredValue=function(e){return Ze.current.useDeferredValue(e)};xt.useEffect=function(e,t){return Ze.current.useEffect(e,t)};xt.useId=function(){return Ze.current.useId()};xt.useImperativeHandle=function(e,t,n){return Ze.current.useImperativeHandle(e,t,n)};xt.useInsertionEffect=function(e,t){return Ze.current.useInsertionEffect(e,t)};xt.useLayoutEffect=function(e,t){return Ze.current.useLayoutEffect(e,t)};xt.useMemo=function(e,t){return Ze.current.useMemo(e,t)};xt.useReducer=function(e,t,n){return Ze.current.useReducer(e,t,n)};xt.useRef=function(e){return Ze.current.useRef(e)};xt.useState=function(e){return Ze.current.useState(e)};xt.useSyncExternalStore=function(e,t,n){return Ze.current.useSyncExternalStore(e,t,n)};xt.useTransition=function(){return Ze.current.useTransition()};xt.version="18.3.1";D_.exports=xt;var $=D_.exports;const $r=ww($),Vw=yw({__proto__:null,default:$r},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw=$,Uw=Symbol.for("react.element"),Bw=Symbol.for("react.fragment"),Fw=Object.prototype.hasOwnProperty,jw=zw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hw={key:!0,ref:!0,__self:!0,__source:!0};function W_(e,t,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)Fw.call(t,i)&&!Hw.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:Uw,type:e,key:o,ref:l,props:s,_owner:jw.current}}wc.Fragment=Bw;wc.jsx=W_;wc.jsxs=W_;b_.exports=wc;var D=b_.exports,ed={},G_={exports:{}},dn={},Z_={exports:{}},$_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Z,lt){var X=Z.length;Z.push(lt);t:for(;0<X;){var dt=X-1>>>1,vt=Z[dt];if(0<s(vt,lt))Z[dt]=lt,Z[X]=vt,X=dt;else break t}}function n(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var lt=Z[0],X=Z.pop();if(X!==lt){Z[0]=X;t:for(var dt=0,vt=Z.length,St=vt>>>1;dt<St;){var bt=2*(dt+1)-1,Tt=Z[bt],mt=bt+1,ie=Z[mt];if(0>s(Tt,X))mt<vt&&0>s(ie,Tt)?(Z[dt]=ie,Z[mt]=X,dt=mt):(Z[dt]=Tt,Z[bt]=X,dt=bt);else if(mt<vt&&0>s(ie,X))Z[dt]=ie,Z[mt]=X,dt=mt;else break t}}return lt}function s(Z,lt){var X=Z.sortIndex-lt.sortIndex;return X!==0?X:Z.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();e.unstable_now=function(){return l.now()-h}}var f=[],g=[],v=1,E=null,T=3,O=!1,V=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Z){for(var lt=n(g);lt!==null;){if(lt.callback===null)i(g);else if(lt.startTime<=Z)i(g),lt.sortIndex=lt.expirationTime,t(f,lt);else break;lt=n(g)}}function G(Z){if(z=!1,k(Z),!V)if(n(f)!==null)V=!0,oe(J);else{var lt=n(g);lt!==null&&Ee(G,lt.startTime-Z)}}function J(Z,lt){V=!1,z&&(z=!1,x(S),S=-1),O=!0;var X=T;try{for(k(lt),E=n(f);E!==null&&(!(E.expirationTime>lt)||Z&&!b());){var dt=E.callback;if(typeof dt=="function"){E.callback=null,T=E.priorityLevel;var vt=dt(E.expirationTime<=lt);lt=e.unstable_now(),typeof vt=="function"?E.callback=vt:E===n(f)&&i(f),k(lt)}else i(f);E=n(f)}if(E!==null)var St=!0;else{var bt=n(g);bt!==null&&Ee(G,bt.startTime-lt),St=!1}return St}finally{E=null,T=X,O=!1}}var tt=!1,C=null,S=-1,A=5,P=-1;function b(){return!(e.unstable_now()-P<A)}function M(){if(C!==null){var Z=e.unstable_now();P=Z;var lt=!0;try{lt=C(!0,Z)}finally{lt?R():(tt=!1,C=null)}}else tt=!1}var R;if(typeof I=="function")R=function(){I(M)};else if(typeof MessageChannel<"u"){var Wt=new MessageChannel,Ln=Wt.port2;Wt.port1.onmessage=M,R=function(){Ln.postMessage(null)}}else R=function(){j(M,0)};function oe(Z){C=Z,tt||(tt=!0,R())}function Ee(Z,lt){S=j(function(){Z(e.unstable_now())},lt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){V||O||(V=!0,oe(J))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var lt=3;break;default:lt=T}var X=T;T=lt;try{return Z()}finally{T=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,lt){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var X=T;T=Z;try{return lt()}finally{T=X}},e.unstable_scheduleCallback=function(Z,lt,X){var dt=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?dt+X:dt):X=dt,Z){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=X+vt,Z={id:v++,callback:lt,priorityLevel:Z,startTime:X,expirationTime:vt,sortIndex:-1},X>dt?(Z.sortIndex=X,t(g,Z),n(f)===null&&Z===n(g)&&(z?(x(S),S=-1):z=!0,Ee(G,X-dt))):(Z.sortIndex=vt,t(f,Z),V||O||(V=!0,oe(J))),Z},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(Z){var lt=T;return function(){var X=T;T=lt;try{return Z.apply(this,arguments)}finally{T=X}}}})($_);Z_.exports=$_;var Ww=Z_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw=$,hn=Ww;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q_=new Set,za={};function ns(e,t){ao(e,t),ao(e+"Capture",t)}function ao(e,t){for(za[e]=t,e=0;e<t.length;e++)q_.add(t[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nd=Object.prototype.hasOwnProperty,Zw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wm={},Tm={};function $w(e){return nd.call(Tm,e)?!0:nd.call(wm,e)?!1:Zw.test(e)?Tm[e]=!0:(wm[e]=!0,!1)}function qw(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kw(e,t,n,i){if(t===null||typeof t>"u"||qw(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $e(e,t,n,i,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ke[e]=new $e(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ke[t]=new $e(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ke[e]=new $e(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ke[e]=new $e(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ke[e]=new $e(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ke[e]=new $e(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ke[e]=new $e(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ke[e]=new $e(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ke[e]=new $e(e,5,!1,e.toLowerCase(),null,!1,!1)});var If=/[\-:]([a-z])/g;function Af(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(If,Af);ke[t]=new $e(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(If,Af);ke[t]=new $e(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(If,Af);ke[t]=new $e(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ke[e]=new $e(e,1,!1,e.toLowerCase(),null,!1,!1)});ke.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ke[e]=new $e(e,1,!1,e.toLowerCase(),null,!0,!0)});function xf(e,t,n,i){var s=ke.hasOwnProperty(t)?ke[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kw(t,n,s,i)&&(n=null),i||s===null?$w(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,i=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var bi=Gw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),K_=Symbol.for("react.provider"),Q_=Symbol.for("react.context"),Pf=Symbol.for("react.forward_ref"),rd=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),Rf=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),J_=Symbol.for("react.offscreen"),Sm=Symbol.iterator;function la(e){return e===null||typeof e!="object"?null:(e=Sm&&e[Sm]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Object.assign,mh;function _a(e){if(mh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);mh=t&&t[1]||""}return`
`+mh+e}var gh=!1;function _h(e,t){if(!e||gh)return"";gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var i=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){i=g}e.call(t.prototype)}else{try{throw Error()}catch(g){i=g}e()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var s=g.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var f=`
`+s[l].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=l&&0<=h);break}}}finally{gh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_a(e):""}function Qw(e){switch(e.tag){case 5:return _a(e.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return e=_h(e.type,!1),e;case 11:return e=_h(e.type.render,!1),e;case 1:return e=_h(e.type,!0),e;default:return""}}function od(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case js:return"Fragment";case Fs:return"Portal";case id:return"Profiler";case Cf:return"StrictMode";case rd:return"Suspense";case sd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q_:return(e.displayName||"Context")+".Consumer";case K_:return(e._context.displayName||"Context")+".Provider";case Pf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rf:return t=e.displayName||null,t!==null?t:od(e.type)||"Memo";case Gi:t=e._payload,e=e._init;try{return od(e(t))}catch{}}return null}function Jw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return od(t);case 8:return t===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yw(e){var t=Y_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function iu(e){e._valueTracker||(e._valueTracker=Yw(e))}function X_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Y_(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Uu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ad(e,t){var n=t.checked;return ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Im(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tv(e,t){t=t.checked,t!=null&&xf(e,"checked",t,!1)}function ld(e,t){tv(e,t);var n=cr(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ud(e,t.type,n):t.hasOwnProperty("defaultValue")&&ud(e,t.type,cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Am(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ud(e,t,n){(t!=="number"||Uu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var va=Array.isArray;function Xs(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+cr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function cd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(va(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cr(n)}}function ev(e,t){var n=cr(t.value),i=cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Cm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ru,iv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ru=ru||document.createElement("div"),ru.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ru.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ua(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xw=["Webkit","ms","Moz","O"];Object.keys(Aa).forEach(function(e){Xw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Aa[t]=Aa[e]})});function rv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Aa.hasOwnProperty(e)&&Aa[e]?(""+t).trim():t+"px"}function sv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=rv(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}var tT=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(e,t){if(t){if(tT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function fd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=null;function Lf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var md=null,to=null,eo=null;function Pm(e){if(e=pl(e)){if(typeof md!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=xc(t),md(e.stateNode,e.type,t))}}function ov(e){to?eo?eo.push(e):eo=[e]:to=e}function av(){if(to){var e=to,t=eo;if(eo=to=null,Pm(e),t)for(e=0;e<t.length;e++)Pm(t[e])}}function lv(e,t){return e(t)}function uv(){}var vh=!1;function cv(e,t,n){if(vh)return e(t,n);vh=!0;try{return lv(e,t,n)}finally{vh=!1,(to!==null||eo!==null)&&(uv(),av())}}function Ba(e,t){var n=e.stateNode;if(n===null)return null;var i=xc(n);if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var gd=!1;if(xi)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){gd=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{gd=!1}function eT(e,t,n,i,s,o,l,h,f){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(v){this.onError(v)}}var xa=!1,Bu=null,Fu=!1,_d=null,nT={onError:function(e){xa=!0,Bu=e}};function iT(e,t,n,i,s,o,l,h,f){xa=!1,Bu=null,eT.apply(nT,arguments)}function rT(e,t,n,i,s,o,l,h,f){if(iT.apply(this,arguments),xa){if(xa){var g=Bu;xa=!1,Bu=null}else throw Error(Y(198));Fu||(Fu=!0,_d=g)}}function is(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rm(e){if(is(e)!==e)throw Error(Y(188))}function sT(e){var t=e.alternate;if(!t){if(t=is(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Rm(s),e;if(o===i)return Rm(s),t;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function dv(e){return e=sT(e),e!==null?fv(e):null}function fv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fv(e);if(t!==null)return t;e=e.sibling}return null}var pv=hn.unstable_scheduleCallback,Lm=hn.unstable_cancelCallback,oT=hn.unstable_shouldYield,aT=hn.unstable_requestPaint,ce=hn.unstable_now,lT=hn.unstable_getCurrentPriorityLevel,Nf=hn.unstable_ImmediatePriority,mv=hn.unstable_UserBlockingPriority,ju=hn.unstable_NormalPriority,uT=hn.unstable_LowPriority,gv=hn.unstable_IdlePriority,Tc=null,Yn=null;function cT(e){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Tc,e,void 0,(e.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:fT,hT=Math.log,dT=Math.LN2;function fT(e){return e>>>=0,e===0?32:31-(hT(e)/dT|0)|0}var su=64,ou=4194304;function ya(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hu(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=ya(h):(o&=l,o!==0&&(i=ya(o)))}else l=n&~s,l!==0?i=ya(l):o!==0&&(i=ya(o));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Fn(t),s=1<<n,i|=e[n],t&=~s;return i}function pT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Fn(o),h=1<<l,f=s[l];f===-1?(!(h&n)||h&i)&&(s[l]=pT(h,t)):f<=t&&(e.expiredLanes|=h),o&=~h}}function vd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _v(){var e=su;return su<<=1,!(su&4194240)&&(su=64),e}function yh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fn(t),e[t]=n}function gT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Fn(n),o=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~o}}function kf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Fn(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var zt=0;function vv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yv,Of,Ev,wv,Tv,yd=!1,au=[],Xi=null,tr=null,er=null,Fa=new Map,ja=new Map,$i=[],_T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nm(e,t){switch(e){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Fa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(t.pointerId)}}function ca(e,t,n,i,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},t!==null&&(t=pl(t),t!==null&&Of(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vT(e,t,n,i,s){switch(t){case"focusin":return Xi=ca(Xi,e,t,n,i,s),!0;case"dragenter":return tr=ca(tr,e,t,n,i,s),!0;case"mouseover":return er=ca(er,e,t,n,i,s),!0;case"pointerover":var o=s.pointerId;return Fa.set(o,ca(Fa.get(o)||null,e,t,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,ja.set(o,ca(ja.get(o)||null,e,t,n,i,s)),!0}return!1}function Sv(e){var t=Ur(e.target);if(t!==null){var n=is(t);if(n!==null){if(t=n.tag,t===13){if(t=hv(n),t!==null){e.blockedOn=t,Tv(e.priority,function(){Ev(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Iu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ed(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);pd=i,n.target.dispatchEvent(i),pd=null}else return t=pl(n),t!==null&&Of(t),e.blockedOn=n,!1;t.shift()}return!0}function km(e,t,n){Iu(e)&&n.delete(t)}function yT(){yd=!1,Xi!==null&&Iu(Xi)&&(Xi=null),tr!==null&&Iu(tr)&&(tr=null),er!==null&&Iu(er)&&(er=null),Fa.forEach(km),ja.forEach(km)}function ha(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,yT)))}function Ha(e){function t(s){return ha(s,e)}if(0<au.length){ha(au[0],e);for(var n=1;n<au.length;n++){var i=au[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Xi!==null&&ha(Xi,e),tr!==null&&ha(tr,e),er!==null&&ha(er,e),Fa.forEach(t),ja.forEach(t),n=0;n<$i.length;n++)i=$i[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<$i.length&&(n=$i[0],n.blockedOn===null);)Sv(n),n.blockedOn===null&&$i.shift()}var no=bi.ReactCurrentBatchConfig,Wu=!0;function ET(e,t,n,i){var s=zt,o=no.transition;no.transition=null;try{zt=1,bf(e,t,n,i)}finally{zt=s,no.transition=o}}function wT(e,t,n,i){var s=zt,o=no.transition;no.transition=null;try{zt=4,bf(e,t,n,i)}finally{zt=s,no.transition=o}}function bf(e,t,n,i){if(Wu){var s=Ed(e,t,n,i);if(s===null)Rh(e,t,i,Gu,n),Nm(e,i);else if(vT(s,e,t,n,i))i.stopPropagation();else if(Nm(e,i),t&4&&-1<_T.indexOf(e)){for(;s!==null;){var o=pl(s);if(o!==null&&yv(o),o=Ed(e,t,n,i),o===null&&Rh(e,t,i,Gu,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Rh(e,t,i,null,n)}}var Gu=null;function Ed(e,t,n,i){if(Gu=null,e=Lf(i),e=Ur(e),e!==null)if(t=is(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gu=e,null}function Iv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lT()){case Nf:return 1;case mv:return 4;case ju:case uT:return 16;case gv:return 536870912;default:return 16}default:return 16}}var Ki=null,Df=null,Au=null;function Av(){if(Au)return Au;var e,t=Df,n=t.length,i,s="value"in Ki?Ki.value:Ki.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(i=1;i<=l&&t[n-i]===s[o-i];i++);return Au=s.slice(e,1<i?1-i:void 0)}function xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lu(){return!0}function Om(){return!1}function fn(e){function t(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lu:Om,this.isPropagationStopped=Om,this}return ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),t}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=fn(So),fl=ee({},So,{view:0,detail:0}),TT=fn(fl),Eh,wh,da,Sc=ee({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==da&&(da&&e.type==="mousemove"?(Eh=e.screenX-da.screenX,wh=e.screenY-da.screenY):wh=Eh=0,da=e),Eh)},movementY:function(e){return"movementY"in e?e.movementY:wh}}),bm=fn(Sc),ST=ee({},Sc,{dataTransfer:0}),IT=fn(ST),AT=ee({},fl,{relatedTarget:0}),Th=fn(AT),xT=ee({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),CT=fn(xT),PT=ee({},So,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RT=fn(PT),LT=ee({},So,{data:0}),Dm=fn(LT),NT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OT[e])?!!t[e]:!1}function Vf(){return bT}var DT=ee({},fl,{key:function(e){if(e.key){var t=NT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(e){return e.type==="keypress"?xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),MT=fn(DT),VT=ee({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mm=fn(VT),zT=ee({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),UT=fn(zT),BT=ee({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),FT=fn(BT),jT=ee({},Sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),HT=fn(jT),WT=[9,13,27,32],zf=xi&&"CompositionEvent"in window,Ca=null;xi&&"documentMode"in document&&(Ca=document.documentMode);var GT=xi&&"TextEvent"in window&&!Ca,xv=xi&&(!zf||Ca&&8<Ca&&11>=Ca),Vm=" ",zm=!1;function Cv(e,t){switch(e){case"keyup":return WT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hs=!1;function ZT(e,t){switch(e){case"compositionend":return Pv(t);case"keypress":return t.which!==32?null:(zm=!0,Vm);case"textInput":return e=t.data,e===Vm&&zm?null:e;default:return null}}function $T(e,t){if(Hs)return e==="compositionend"||!zf&&Cv(e,t)?(e=Av(),Au=Df=Ki=null,Hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xv&&t.locale!=="ko"?null:t.data;default:return null}}var qT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Um(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qT[e.type]:t==="textarea"}function Rv(e,t,n,i){ov(i),t=Zu(t,"onChange"),0<t.length&&(n=new Mf("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Pa=null,Wa=null;function KT(e){Bv(e,0)}function Ic(e){var t=Zs(e);if(X_(t))return e}function QT(e,t){if(e==="change")return t}var Lv=!1;if(xi){var Sh;if(xi){var Ih="oninput"in document;if(!Ih){var Bm=document.createElement("div");Bm.setAttribute("oninput","return;"),Ih=typeof Bm.oninput=="function"}Sh=Ih}else Sh=!1;Lv=Sh&&(!document.documentMode||9<document.documentMode)}function Fm(){Pa&&(Pa.detachEvent("onpropertychange",Nv),Wa=Pa=null)}function Nv(e){if(e.propertyName==="value"&&Ic(Wa)){var t=[];Rv(t,Wa,e,Lf(e)),cv(KT,t)}}function JT(e,t,n){e==="focusin"?(Fm(),Pa=t,Wa=n,Pa.attachEvent("onpropertychange",Nv)):e==="focusout"&&Fm()}function YT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ic(Wa)}function XT(e,t){if(e==="click")return Ic(t)}function tS(e,t){if(e==="input"||e==="change")return Ic(t)}function eS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hn=typeof Object.is=="function"?Object.is:eS;function Ga(e,t){if(Hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!nd.call(t,s)||!Hn(e[s],t[s]))return!1}return!0}function jm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hm(e,t){var n=jm(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=jm(n)}}function kv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ov(){for(var e=window,t=Uu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Uu(e.document)}return t}function Uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nS(e){var t=Ov(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kv(n.ownerDocument.documentElement,n)){if(i!==null&&Uf(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!e.extend&&o>i&&(s=i,i=o,o=s),s=Hm(n,o);var l=Hm(n,i);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iS=xi&&"documentMode"in document&&11>=document.documentMode,Ws=null,wd=null,Ra=null,Td=!1;function Wm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Ws==null||Ws!==Uu(i)||(i=Ws,"selectionStart"in i&&Uf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ra&&Ga(Ra,i)||(Ra=i,i=Zu(wd,"onSelect"),0<i.length&&(t=new Mf("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ws)))}function uu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gs={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},Ah={},bv={};xi&&(bv=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function Ac(e){if(Ah[e])return Ah[e];if(!Gs[e])return e;var t=Gs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bv)return Ah[e]=t[n];return e}var Dv=Ac("animationend"),Mv=Ac("animationiteration"),Vv=Ac("animationstart"),zv=Ac("transitionend"),Uv=new Map,Gm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,t){Uv.set(e,t),ns(t,[e])}for(var xh=0;xh<Gm.length;xh++){var Ch=Gm[xh],rS=Ch.toLowerCase(),sS=Ch[0].toUpperCase()+Ch.slice(1);gr(rS,"on"+sS)}gr(Dv,"onAnimationEnd");gr(Mv,"onAnimationIteration");gr(Vv,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(zv,"onTransitionEnd");ao("onMouseEnter",["mouseout","mouseover"]);ao("onMouseLeave",["mouseout","mouseover"]);ao("onPointerEnter",["pointerout","pointerover"]);ao("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ea));function Zm(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,rT(i,t,void 0,e),e.currentTarget=null}function Bv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;t:{var o=void 0;if(t)for(var l=i.length-1;0<=l;l--){var h=i[l],f=h.instance,g=h.currentTarget;if(h=h.listener,f!==o&&s.isPropagationStopped())break t;Zm(s,h,g),o=f}else for(l=0;l<i.length;l++){if(h=i[l],f=h.instance,g=h.currentTarget,h=h.listener,f!==o&&s.isPropagationStopped())break t;Zm(s,h,g),o=f}}}if(Fu)throw e=_d,Fu=!1,_d=null,e}function Gt(e,t){var n=t[Cd];n===void 0&&(n=t[Cd]=new Set);var i=e+"__bubble";n.has(i)||(Fv(t,e,2,!1),n.add(i))}function Ph(e,t,n){var i=0;t&&(i|=4),Fv(n,e,i,t)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Za(e){if(!e[cu]){e[cu]=!0,q_.forEach(function(n){n!=="selectionchange"&&(oS.has(n)||Ph(n,!1,e),Ph(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cu]||(t[cu]=!0,Ph("selectionchange",!1,t))}}function Fv(e,t,n,i){switch(Iv(t)){case 1:var s=ET;break;case 4:s=wT;break;default:s=bf}n=s.bind(null,t,n,e),s=void 0,!gd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Rh(e,t,n,i,s){var o=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Ur(h),l===null)return;if(f=l.tag,f===5||f===6){i=o=l;continue t}h=h.parentNode}}i=i.return}cv(function(){var g=o,v=Lf(n),E=[];t:{var T=Uv.get(e);if(T!==void 0){var O=Mf,V=e;switch(e){case"keypress":if(xu(n)===0)break t;case"keydown":case"keyup":O=MT;break;case"focusin":V="focus",O=Th;break;case"focusout":V="blur",O=Th;break;case"beforeblur":case"afterblur":O=Th;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=IT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=UT;break;case Dv:case Mv:case Vv:O=CT;break;case zv:O=FT;break;case"scroll":O=TT;break;case"wheel":O=HT;break;case"copy":case"cut":case"paste":O=RT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Mm}var z=(t&4)!==0,j=!z&&e==="scroll",x=z?T!==null?T+"Capture":null:T;z=[];for(var I=g,k;I!==null;){k=I;var G=k.stateNode;if(k.tag===5&&G!==null&&(k=G,x!==null&&(G=Ba(I,x),G!=null&&z.push($a(I,G,k)))),j)break;I=I.return}0<z.length&&(T=new O(T,V,null,n,v),E.push({event:T,listeners:z}))}}if(!(t&7)){t:{if(T=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",T&&n!==pd&&(V=n.relatedTarget||n.fromElement)&&(Ur(V)||V[Ci]))break t;if((O||T)&&(T=v.window===v?v:(T=v.ownerDocument)?T.defaultView||T.parentWindow:window,O?(V=n.relatedTarget||n.toElement,O=g,V=V?Ur(V):null,V!==null&&(j=is(V),V!==j||V.tag!==5&&V.tag!==6)&&(V=null)):(O=null,V=g),O!==V)){if(z=bm,G="onMouseLeave",x="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(z=Mm,G="onPointerLeave",x="onPointerEnter",I="pointer"),j=O==null?T:Zs(O),k=V==null?T:Zs(V),T=new z(G,I+"leave",O,n,v),T.target=j,T.relatedTarget=k,G=null,Ur(v)===g&&(z=new z(x,I+"enter",V,n,v),z.target=k,z.relatedTarget=j,G=z),j=G,O&&V)e:{for(z=O,x=V,I=0,k=z;k;k=Ds(k))I++;for(k=0,G=x;G;G=Ds(G))k++;for(;0<I-k;)z=Ds(z),I--;for(;0<k-I;)x=Ds(x),k--;for(;I--;){if(z===x||x!==null&&z===x.alternate)break e;z=Ds(z),x=Ds(x)}z=null}else z=null;O!==null&&$m(E,T,O,z,!1),V!==null&&j!==null&&$m(E,j,V,z,!0)}}t:{if(T=g?Zs(g):window,O=T.nodeName&&T.nodeName.toLowerCase(),O==="select"||O==="input"&&T.type==="file")var J=QT;else if(Um(T))if(Lv)J=tS;else{J=YT;var tt=JT}else(O=T.nodeName)&&O.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(J=XT);if(J&&(J=J(e,g))){Rv(E,J,n,v);break t}tt&&tt(e,T,g),e==="focusout"&&(tt=T._wrapperState)&&tt.controlled&&T.type==="number"&&ud(T,"number",T.value)}switch(tt=g?Zs(g):window,e){case"focusin":(Um(tt)||tt.contentEditable==="true")&&(Ws=tt,wd=g,Ra=null);break;case"focusout":Ra=wd=Ws=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Wm(E,n,v);break;case"selectionchange":if(iS)break;case"keydown":case"keyup":Wm(E,n,v)}var C;if(zf)t:{switch(e){case"compositionstart":var S="onCompositionStart";break t;case"compositionend":S="onCompositionEnd";break t;case"compositionupdate":S="onCompositionUpdate";break t}S=void 0}else Hs?Cv(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(xv&&n.locale!=="ko"&&(Hs||S!=="onCompositionStart"?S==="onCompositionEnd"&&Hs&&(C=Av()):(Ki=v,Df="value"in Ki?Ki.value:Ki.textContent,Hs=!0)),tt=Zu(g,S),0<tt.length&&(S=new Dm(S,e,null,n,v),E.push({event:S,listeners:tt}),C?S.data=C:(C=Pv(n),C!==null&&(S.data=C)))),(C=GT?ZT(e,n):$T(e,n))&&(g=Zu(g,"onBeforeInput"),0<g.length&&(v=new Dm("onBeforeInput","beforeinput",null,n,v),E.push({event:v,listeners:g}),v.data=C))}Bv(E,t)})}function $a(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zu(e,t){for(var n=t+"Capture",i=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ba(e,n),o!=null&&i.unshift($a(e,o,s)),o=Ba(e,t),o!=null&&i.push($a(e,o,s))),e=e.return}return i}function Ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $m(e,t,n,i,s){for(var o=t._reactName,l=[];n!==null&&n!==i;){var h=n,f=h.alternate,g=h.stateNode;if(f!==null&&f===i)break;h.tag===5&&g!==null&&(h=g,s?(f=Ba(n,o),f!=null&&l.unshift($a(n,f,h))):s||(f=Ba(n,o),f!=null&&l.push($a(n,f,h)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var aS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function qm(e){return(typeof e=="string"?e:""+e).replace(aS,`
`).replace(lS,"")}function hu(e,t,n){if(t=qm(t),qm(e)!==t&&n)throw Error(Y(425))}function $u(){}var Sd=null,Id=null;function Ad(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(e){return Km.resolve(null).then(e).catch(hS)}:xd;function hS(e){setTimeout(function(){throw e})}function Lh(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){e.removeChild(s),Ha(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ha(t)}function nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Qm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Io=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Io,qa="__reactProps$"+Io,Ci="__reactContainer$"+Io,Cd="__reactEvents$"+Io,dS="__reactListeners$"+Io,fS="__reactHandles$"+Io;function Ur(e){var t=e[Jn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ci]||n[Jn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qm(e);e!==null;){if(n=e[Jn])return n;e=Qm(e)}return t}e=n,n=e.parentNode}return null}function pl(e){return e=e[Jn]||e[Ci],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function xc(e){return e[qa]||null}var Pd=[],$s=-1;function _r(e){return{current:e}}function Zt(e){0>$s||(e.current=Pd[$s],Pd[$s]=null,$s--)}function Ht(e,t){$s++,Pd[$s]=e.current,e.current=t}var hr={},Fe=_r(hr),Xe=_r(!1),qr=hr;function lo(e,t){var n=e.type.contextTypes;if(!n)return hr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function tn(e){return e=e.childContextTypes,e!=null}function qu(){Zt(Xe),Zt(Fe)}function Jm(e,t,n){if(Fe.current!==hr)throw Error(Y(168));Ht(Fe,t),Ht(Xe,n)}function jv(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(Y(108,Jw(e)||"Unknown",s));return ee({},n,i)}function Ku(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,qr=Fe.current,Ht(Fe,e),Ht(Xe,Xe.current),!0}function Ym(e,t,n){var i=e.stateNode;if(!i)throw Error(Y(169));n?(e=jv(e,t,qr),i.__reactInternalMemoizedMergedChildContext=e,Zt(Xe),Zt(Fe),Ht(Fe,e)):Zt(Xe),Ht(Xe,n)}var wi=null,Cc=!1,Nh=!1;function Hv(e){wi===null?wi=[e]:wi.push(e)}function pS(e){Cc=!0,Hv(e)}function vr(){if(!Nh&&wi!==null){Nh=!0;var e=0,t=zt;try{var n=wi;for(zt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}wi=null,Cc=!1}catch(s){throw wi!==null&&(wi=wi.slice(e+1)),pv(Nf,vr),s}finally{zt=t,Nh=!1}}return null}var qs=[],Ks=0,Qu=null,Ju=0,Sn=[],In=0,Kr=null,Ti=1,Si="";function Mr(e,t){qs[Ks++]=Ju,qs[Ks++]=Qu,Qu=e,Ju=t}function Wv(e,t,n){Sn[In++]=Ti,Sn[In++]=Si,Sn[In++]=Kr,Kr=e;var i=Ti;e=Si;var s=32-Fn(i)-1;i&=~(1<<s),n+=1;var o=32-Fn(t)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Ti=1<<32-Fn(t)+s|n<<s|i,Si=o+e}else Ti=1<<o|n<<s|i,Si=e}function Bf(e){e.return!==null&&(Mr(e,1),Wv(e,1,0))}function Ff(e){for(;e===Qu;)Qu=qs[--Ks],qs[Ks]=null,Ju=qs[--Ks],qs[Ks]=null;for(;e===Kr;)Kr=Sn[--In],Sn[In]=null,Si=Sn[--In],Sn[In]=null,Ti=Sn[--In],Sn[In]=null}var un=null,an=null,Kt=!1,Bn=null;function Gv(e,t){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Xm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,un=e,an=nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,un=e,an=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kr!==null?{id:Ti,overflow:Si}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,un=e,an=null,!0):!1;default:return!1}}function Rd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ld(e){if(Kt){var t=an;if(t){var n=t;if(!Xm(e,t)){if(Rd(e))throw Error(Y(418));t=nr(n.nextSibling);var i=un;t&&Xm(e,t)?Gv(i,n):(e.flags=e.flags&-4097|2,Kt=!1,un=e)}}else{if(Rd(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Kt=!1,un=e}}}function tg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;un=e}function du(e){if(e!==un)return!1;if(!Kt)return tg(e),Kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ad(e.type,e.memoizedProps)),t&&(t=an)){if(Rd(e))throw Zv(),Error(Y(418));for(;t;)Gv(e,t),t=nr(t.nextSibling)}if(tg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){an=nr(e.nextSibling);break t}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}an=null}}else an=un?nr(e.stateNode.nextSibling):null;return!0}function Zv(){for(var e=an;e;)e=nr(e.nextSibling)}function uo(){an=un=null,Kt=!1}function jf(e){Bn===null?Bn=[e]:Bn.push(e)}var mS=bi.ReactCurrentBatchConfig;function fa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,e));var s=i,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function fu(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eg(e){var t=e._init;return t(e._payload)}function $v(e){function t(x,I){if(e){var k=x.deletions;k===null?(x.deletions=[I],x.flags|=16):k.push(I)}}function n(x,I){if(!e)return null;for(;I!==null;)t(x,I),I=I.sibling;return null}function i(x,I){for(x=new Map;I!==null;)I.key!==null?x.set(I.key,I):x.set(I.index,I),I=I.sibling;return x}function s(x,I){return x=or(x,I),x.index=0,x.sibling=null,x}function o(x,I,k){return x.index=k,e?(k=x.alternate,k!==null?(k=k.index,k<I?(x.flags|=2,I):k):(x.flags|=2,I)):(x.flags|=1048576,I)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function h(x,I,k,G){return I===null||I.tag!==6?(I=zh(k,x.mode,G),I.return=x,I):(I=s(I,k),I.return=x,I)}function f(x,I,k,G){var J=k.type;return J===js?v(x,I,k.props.children,G,k.key):I!==null&&(I.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Gi&&eg(J)===I.type)?(G=s(I,k.props),G.ref=fa(x,I,k),G.return=x,G):(G=Ou(k.type,k.key,k.props,null,x.mode,G),G.ref=fa(x,I,k),G.return=x,G)}function g(x,I,k,G){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=Uh(k,x.mode,G),I.return=x,I):(I=s(I,k.children||[]),I.return=x,I)}function v(x,I,k,G,J){return I===null||I.tag!==7?(I=Wr(k,x.mode,G,J),I.return=x,I):(I=s(I,k),I.return=x,I)}function E(x,I,k){if(typeof I=="string"&&I!==""||typeof I=="number")return I=zh(""+I,x.mode,k),I.return=x,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case nu:return k=Ou(I.type,I.key,I.props,null,x.mode,k),k.ref=fa(x,null,I),k.return=x,k;case Fs:return I=Uh(I,x.mode,k),I.return=x,I;case Gi:var G=I._init;return E(x,G(I._payload),k)}if(va(I)||la(I))return I=Wr(I,x.mode,k,null),I.return=x,I;fu(x,I)}return null}function T(x,I,k,G){var J=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return J!==null?null:h(x,I,""+k,G);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case nu:return k.key===J?f(x,I,k,G):null;case Fs:return k.key===J?g(x,I,k,G):null;case Gi:return J=k._init,T(x,I,J(k._payload),G)}if(va(k)||la(k))return J!==null?null:v(x,I,k,G,null);fu(x,k)}return null}function O(x,I,k,G,J){if(typeof G=="string"&&G!==""||typeof G=="number")return x=x.get(k)||null,h(I,x,""+G,J);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case nu:return x=x.get(G.key===null?k:G.key)||null,f(I,x,G,J);case Fs:return x=x.get(G.key===null?k:G.key)||null,g(I,x,G,J);case Gi:var tt=G._init;return O(x,I,k,tt(G._payload),J)}if(va(G)||la(G))return x=x.get(k)||null,v(I,x,G,J,null);fu(I,G)}return null}function V(x,I,k,G){for(var J=null,tt=null,C=I,S=I=0,A=null;C!==null&&S<k.length;S++){C.index>S?(A=C,C=null):A=C.sibling;var P=T(x,C,k[S],G);if(P===null){C===null&&(C=A);break}e&&C&&P.alternate===null&&t(x,C),I=o(P,I,S),tt===null?J=P:tt.sibling=P,tt=P,C=A}if(S===k.length)return n(x,C),Kt&&Mr(x,S),J;if(C===null){for(;S<k.length;S++)C=E(x,k[S],G),C!==null&&(I=o(C,I,S),tt===null?J=C:tt.sibling=C,tt=C);return Kt&&Mr(x,S),J}for(C=i(x,C);S<k.length;S++)A=O(C,x,S,k[S],G),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?S:A.key),I=o(A,I,S),tt===null?J=A:tt.sibling=A,tt=A);return e&&C.forEach(function(b){return t(x,b)}),Kt&&Mr(x,S),J}function z(x,I,k,G){var J=la(k);if(typeof J!="function")throw Error(Y(150));if(k=J.call(k),k==null)throw Error(Y(151));for(var tt=J=null,C=I,S=I=0,A=null,P=k.next();C!==null&&!P.done;S++,P=k.next()){C.index>S?(A=C,C=null):A=C.sibling;var b=T(x,C,P.value,G);if(b===null){C===null&&(C=A);break}e&&C&&b.alternate===null&&t(x,C),I=o(b,I,S),tt===null?J=b:tt.sibling=b,tt=b,C=A}if(P.done)return n(x,C),Kt&&Mr(x,S),J;if(C===null){for(;!P.done;S++,P=k.next())P=E(x,P.value,G),P!==null&&(I=o(P,I,S),tt===null?J=P:tt.sibling=P,tt=P);return Kt&&Mr(x,S),J}for(C=i(x,C);!P.done;S++,P=k.next())P=O(C,x,S,P.value,G),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?S:P.key),I=o(P,I,S),tt===null?J=P:tt.sibling=P,tt=P);return e&&C.forEach(function(M){return t(x,M)}),Kt&&Mr(x,S),J}function j(x,I,k,G){if(typeof k=="object"&&k!==null&&k.type===js&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case nu:t:{for(var J=k.key,tt=I;tt!==null;){if(tt.key===J){if(J=k.type,J===js){if(tt.tag===7){n(x,tt.sibling),I=s(tt,k.props.children),I.return=x,x=I;break t}}else if(tt.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Gi&&eg(J)===tt.type){n(x,tt.sibling),I=s(tt,k.props),I.ref=fa(x,tt,k),I.return=x,x=I;break t}n(x,tt);break}else t(x,tt);tt=tt.sibling}k.type===js?(I=Wr(k.props.children,x.mode,G,k.key),I.return=x,x=I):(G=Ou(k.type,k.key,k.props,null,x.mode,G),G.ref=fa(x,I,k),G.return=x,x=G)}return l(x);case Fs:t:{for(tt=k.key;I!==null;){if(I.key===tt)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){n(x,I.sibling),I=s(I,k.children||[]),I.return=x,x=I;break t}else{n(x,I);break}else t(x,I);I=I.sibling}I=Uh(k,x.mode,G),I.return=x,x=I}return l(x);case Gi:return tt=k._init,j(x,I,tt(k._payload),G)}if(va(k))return V(x,I,k,G);if(la(k))return z(x,I,k,G);fu(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,I!==null&&I.tag===6?(n(x,I.sibling),I=s(I,k),I.return=x,x=I):(n(x,I),I=zh(k,x.mode,G),I.return=x,x=I),l(x)):n(x,I)}return j}var co=$v(!0),qv=$v(!1),Yu=_r(null),Xu=null,Qs=null,Hf=null;function Wf(){Hf=Qs=Xu=null}function Gf(e){var t=Yu.current;Zt(Yu),e._currentValue=t}function Nd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function io(e,t){Xu=e,Hf=Qs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function Pn(e){var t=e._currentValue;if(Hf!==e)if(e={context:e,memoizedValue:t,next:null},Qs===null){if(Xu===null)throw Error(Y(308));Qs=e,Xu.dependencies={lanes:0,firstContext:e}}else Qs=Qs.next=e;return t}var Br=null;function Zf(e){Br===null?Br=[e]:Br.push(e)}function Kv(e,t,n,i){var s=t.interleaved;return s===null?(n.next=n,Zf(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pi(e,i)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zi=!1;function $f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ii(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ot&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Pi(e,n)}return s=i.interleaved,s===null?(t.next=t,Zf(i)):(t.next=s.next,s.next=t),i.interleaved=t,Pi(e,n)}function Cu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,kf(e,n)}}function ng(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function tc(e,t,n,i){var s=e.updateQueue;Zi=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,g=f.next;f.next=null,l===null?o=g:l.next=g,l=f;var v=e.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=g:h.next=g,v.lastBaseUpdate=f))}if(o!==null){var E=s.baseState;l=0,v=g=f=null,h=o;do{var T=h.lane,O=h.eventTime;if((i&T)===T){v!==null&&(v=v.next={eventTime:O,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});t:{var V=e,z=h;switch(T=t,O=n,z.tag){case 1:if(V=z.payload,typeof V=="function"){E=V.call(O,E,T);break t}E=V;break t;case 3:V.flags=V.flags&-65537|128;case 0:if(V=z.payload,T=typeof V=="function"?V.call(O,E,T):V,T==null)break t;E=ee({},E,T);break t;case 2:Zi=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else O={eventTime:O,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(g=v=O,f=E):v=v.next=O,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(v===null&&(f=E),s.baseState=f,s.firstBaseUpdate=g,s.lastBaseUpdate=v,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Jr|=l,e.lanes=l,e.memoizedState=E}}function ig(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Y(191,s));s.call(i)}}}var ml={},Xn=_r(ml),Ka=_r(ml),Qa=_r(ml);function Fr(e){if(e===ml)throw Error(Y(174));return e}function qf(e,t){switch(Ht(Qa,t),Ht(Ka,e),Ht(Xn,ml),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hd(t,e)}Zt(Xn),Ht(Xn,t)}function ho(){Zt(Xn),Zt(Ka),Zt(Qa)}function Jv(e){Fr(Qa.current);var t=Fr(Xn.current),n=hd(t,e.type);t!==n&&(Ht(Ka,e),Ht(Xn,n))}function Kf(e){Ka.current===e&&(Zt(Xn),Zt(Ka))}var Xt=_r(0);function ec(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kh=[];function Qf(){for(var e=0;e<kh.length;e++)kh[e]._workInProgressVersionPrimary=null;kh.length=0}var Pu=bi.ReactCurrentDispatcher,Oh=bi.ReactCurrentBatchConfig,Qr=0,te=null,me=null,Ie=null,nc=!1,La=!1,Ja=0,gS=0;function De(){throw Error(Y(321))}function Jf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hn(e[n],t[n]))return!1;return!0}function Yf(e,t,n,i,s,o){if(Qr=o,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pu.current=e===null||e.memoizedState===null?ES:wS,e=n(i,s),La){o=0;do{if(La=!1,Ja=0,25<=o)throw Error(Y(301));o+=1,Ie=me=null,t.updateQueue=null,Pu.current=TS,e=n(i,s)}while(La)}if(Pu.current=ic,t=me!==null&&me.next!==null,Qr=0,Ie=me=te=null,nc=!1,t)throw Error(Y(300));return e}function Xf(){var e=Ja!==0;return Ja=0,e}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?te.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function Rn(){if(me===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var t=Ie===null?te.memoizedState:Ie.next;if(t!==null)Ie=t,me=e;else{if(e===null)throw Error(Y(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},Ie===null?te.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Ya(e,t){return typeof t=="function"?t(e):t}function bh(e){var t=Rn(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var i=me,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,f=null,g=o;do{var v=g.lane;if((Qr&v)===v)f!==null&&(f=f.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:e(i,g.action);else{var E={lane:v,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};f===null?(h=f=E,l=i):f=f.next=E,te.lanes|=v,Jr|=v}g=g.next}while(g!==null&&g!==o);f===null?l=i:f.next=h,Hn(i,t.memoizedState)||(Ye=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=f,n.lastRenderedState=i}if(e=n.interleaved,e!==null){s=e;do o=s.lane,te.lanes|=o,Jr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Dh(e){var t=Rn(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);Hn(o,t.memoizedState)||(Ye=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Yv(){}function Xv(e,t){var n=te,i=Rn(),s=t(),o=!Hn(i.memoizedState,s);if(o&&(i.memoizedState=s,Ye=!0),i=i.queue,tp(ny.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Xa(9,ey.bind(null,n,i,s,t),void 0,null),Ae===null)throw Error(Y(349));Qr&30||ty(n,t,s)}return s}function ty(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ey(e,t,n,i){t.value=n,t.getSnapshot=i,iy(t)&&ry(e)}function ny(e,t,n){return n(function(){iy(t)&&ry(e)})}function iy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hn(e,n)}catch{return!0}}function ry(e){var t=Pi(e,1);t!==null&&jn(t,e,1,-1)}function rg(e){var t=Qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},t.queue=e,e=e.dispatch=yS.bind(null,te,e),[t.memoizedState,e]}function Xa(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function sy(){return Rn().memoizedState}function Ru(e,t,n,i){var s=Qn();te.flags|=e,s.memoizedState=Xa(1|t,n,void 0,i===void 0?null:i)}function Pc(e,t,n,i){var s=Rn();i=i===void 0?null:i;var o=void 0;if(me!==null){var l=me.memoizedState;if(o=l.destroy,i!==null&&Jf(i,l.deps)){s.memoizedState=Xa(t,n,o,i);return}}te.flags|=e,s.memoizedState=Xa(1|t,n,o,i)}function sg(e,t){return Ru(8390656,8,e,t)}function tp(e,t){return Pc(2048,8,e,t)}function oy(e,t){return Pc(4,2,e,t)}function ay(e,t){return Pc(4,4,e,t)}function ly(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uy(e,t,n){return n=n!=null?n.concat([e]):null,Pc(4,4,ly.bind(null,t,e),n)}function ep(){}function cy(e,t){var n=Rn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Jf(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function hy(e,t){var n=Rn();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Jf(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function dy(e,t,n){return Qr&21?(Hn(n,t)||(n=_v(),te.lanes|=n,Jr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=n)}function _S(e,t){var n=zt;zt=n!==0&&4>n?n:4,e(!0);var i=Oh.transition;Oh.transition={};try{e(!1),t()}finally{zt=n,Oh.transition=i}}function fy(){return Rn().memoizedState}function vS(e,t,n){var i=sr(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},py(e))my(t,n);else if(n=Kv(e,t,n,i),n!==null){var s=Ge();jn(n,e,i,s),gy(n,t,i)}}function yS(e,t,n){var i=sr(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(e))my(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Hn(h,l)){var f=t.interleaved;f===null?(s.next=s,Zf(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=Kv(e,t,s,i),n!==null&&(s=Ge(),jn(n,e,i,s),gy(n,t,i))}}function py(e){var t=e.alternate;return e===te||t!==null&&t===te}function my(e,t){La=nc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gy(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,kf(e,n)}}var ic={readContext:Pn,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},ES={readContext:Pn,useCallback:function(e,t){return Qn().memoizedState=[e,t===void 0?null:t],e},useContext:Pn,useEffect:sg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ru(4194308,4,ly.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ru(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ru(4,2,e,t)},useMemo:function(e,t){var n=Qn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Qn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=vS.bind(null,te,e),[i.memoizedState,e]},useRef:function(e){var t=Qn();return e={current:e},t.memoizedState=e},useState:rg,useDebugValue:ep,useDeferredValue:function(e){return Qn().memoizedState=e},useTransition:function(){var e=rg(!1),t=e[0];return e=_S.bind(null,e[1]),Qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=te,s=Qn();if(Kt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),Ae===null)throw Error(Y(349));Qr&30||ty(i,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,sg(ny.bind(null,i,o,e),[e]),i.flags|=2048,Xa(9,ey.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Qn(),t=Ae.identifierPrefix;if(Kt){var n=Si,i=Ti;n=(i&~(1<<32-Fn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ja++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wS={readContext:Pn,useCallback:cy,useContext:Pn,useEffect:tp,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:hy,useReducer:bh,useRef:sy,useState:function(){return bh(Ya)},useDebugValue:ep,useDeferredValue:function(e){var t=Rn();return dy(t,me.memoizedState,e)},useTransition:function(){var e=bh(Ya)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:Yv,useSyncExternalStore:Xv,useId:fy,unstable_isNewReconciler:!1},TS={readContext:Pn,useCallback:cy,useContext:Pn,useEffect:tp,useImperativeHandle:uy,useInsertionEffect:oy,useLayoutEffect:ay,useMemo:hy,useReducer:Dh,useRef:sy,useState:function(){return Dh(Ya)},useDebugValue:ep,useDeferredValue:function(e){var t=Rn();return me===null?t.memoizedState=e:dy(t,me.memoizedState,e)},useTransition:function(){var e=Dh(Ya)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:Yv,useSyncExternalStore:Xv,useId:fy,unstable_isNewReconciler:!1};function zn(e,t){if(e&&e.defaultProps){t=ee({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function kd(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ee({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Rc={isMounted:function(e){return(e=e._reactInternals)?is(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ge(),s=sr(e),o=Ii(i,s);o.payload=t,n!=null&&(o.callback=n),t=ir(e,o,s),t!==null&&(jn(t,e,s,i),Cu(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ge(),s=sr(e),o=Ii(i,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ir(e,o,s),t!==null&&(jn(t,e,s,i),Cu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ge(),i=sr(e),s=Ii(n,i);s.tag=2,t!=null&&(s.callback=t),t=ir(e,s,i),t!==null&&(jn(t,e,i,n),Cu(t,e,i))}};function og(e,t,n,i,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,l):t.prototype&&t.prototype.isPureReactComponent?!Ga(n,i)||!Ga(s,o):!0}function _y(e,t,n){var i=!1,s=hr,o=t.contextType;return typeof o=="object"&&o!==null?o=Pn(o):(s=tn(t)?qr:Fe.current,i=t.contextTypes,o=(i=i!=null)?lo(e,s):hr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rc,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ag(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Rc.enqueueReplaceState(t,t.state,null)}function Od(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},$f(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Pn(o):(o=tn(t)?qr:Fe.current,s.context=lo(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(kd(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Rc.enqueueReplaceState(s,s.state,null),tc(e,n,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function fo(e,t){try{var n="",i=t;do n+=Qw(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Mh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function bd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var SS=typeof WeakMap=="function"?WeakMap:Map;function vy(e,t,n){n=Ii(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){sc||(sc=!0,Wd=i),bd(e,t)},n}function yy(e,t,n){n=Ii(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){bd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){bd(e,t),typeof i!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function lg(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new SS;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=VS.bind(null,e,t,n),t.then(e,e))}function ug(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cg(e,t,n,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ii(-1,1),t.tag=2,ir(n,t,1))),n.lanes|=1),e)}var IS=bi.ReactCurrentOwner,Ye=!1;function We(e,t,n,i){t.child=e===null?qv(t,null,n,i):co(t,e.child,n,i)}function hg(e,t,n,i,s){n=n.render;var o=t.ref;return io(t,s),i=Yf(e,t,n,i,o,s),n=Xf(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ri(e,t,s)):(Kt&&n&&Bf(t),t.flags|=1,We(e,t,i,s),t.child)}function dg(e,t,n,i,s){if(e===null){var o=n.type;return typeof o=="function"&&!up(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Ey(e,t,o,i,s)):(e=Ou(n.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ga,n(l,i)&&e.ref===t.ref)return Ri(e,t,s)}return t.flags|=1,e=or(o,i),e.ref=t.ref,e.return=t,t.child=e}function Ey(e,t,n,i,s){if(e!==null){var o=e.memoizedProps;if(Ga(o,i)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=i=o,(e.lanes&s)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,Ri(e,t,s)}return Dd(e,t,n,i,s)}function wy(e,t,n){var i=t.pendingProps,s=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Ys,on),on|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ht(Ys,on),on|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Ht(Ys,on),on|=i}else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,Ht(Ys,on),on|=i;return We(e,t,s,n),t.child}function Ty(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Dd(e,t,n,i,s){var o=tn(n)?qr:Fe.current;return o=lo(t,o),io(t,s),n=Yf(e,t,n,i,o,s),i=Xf(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ri(e,t,s)):(Kt&&i&&Bf(t),t.flags|=1,We(e,t,n,s),t.child)}function fg(e,t,n,i,s){if(tn(n)){var o=!0;Ku(t)}else o=!1;if(io(t,s),t.stateNode===null)Lu(e,t),_y(t,n,i),Od(t,n,i,s),i=!0;else if(e===null){var l=t.stateNode,h=t.memoizedProps;l.props=h;var f=l.context,g=n.contextType;typeof g=="object"&&g!==null?g=Pn(g):(g=tn(n)?qr:Fe.current,g=lo(t,g));var v=n.getDerivedStateFromProps,E=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";E||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||f!==g)&&ag(t,l,i,g),Zi=!1;var T=t.memoizedState;l.state=T,tc(t,i,l,s),f=t.memoizedState,h!==i||T!==f||Xe.current||Zi?(typeof v=="function"&&(kd(t,n,v,i),f=t.memoizedState),(h=Zi||og(t,n,h,i,T,f,g))?(E||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=f),l.props=i,l.state=f,l.context=g,i=h):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,Qv(e,t),h=t.memoizedProps,g=t.type===t.elementType?h:zn(t.type,h),l.props=g,E=t.pendingProps,T=l.context,f=n.contextType,typeof f=="object"&&f!==null?f=Pn(f):(f=tn(n)?qr:Fe.current,f=lo(t,f));var O=n.getDerivedStateFromProps;(v=typeof O=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==E||T!==f)&&ag(t,l,i,f),Zi=!1,T=t.memoizedState,l.state=T,tc(t,i,l,s);var V=t.memoizedState;h!==E||T!==V||Xe.current||Zi?(typeof O=="function"&&(kd(t,n,O,i),V=t.memoizedState),(g=Zi||og(t,n,g,i,T,V,f)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,V,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,V,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=V),l.props=i,l.state=V,l.context=f,i=g):(typeof l.componentDidUpdate!="function"||h===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return Md(e,t,n,i,o,s)}function Md(e,t,n,i,s,o){Ty(e,t);var l=(t.flags&128)!==0;if(!i&&!l)return s&&Ym(t,n,!1),Ri(e,t,o);i=t.stateNode,IS.current=t;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&l?(t.child=co(t,e.child,null,o),t.child=co(t,null,h,o)):We(e,t,h,o),t.memoizedState=i.state,s&&Ym(t,n,!0),t.child}function Sy(e){var t=e.stateNode;t.pendingContext?Jm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jm(e,t.context,!1),qf(e,t.containerInfo)}function pg(e,t,n,i,s){return uo(),jf(s),t.flags|=256,We(e,t,n,i),t.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function zd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Iy(e,t,n){var i=t.pendingProps,s=Xt.current,o=!1,l=(t.flags&128)!==0,h;if((h=l)||(h=e!==null&&e.memoizedState===null?!1:(s&2)!==0),h?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ht(Xt,s&1),e===null)return Ld(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=kc(l,i,0,null),e=Wr(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=zd(n),t.memoizedState=Vd,e):np(t,l));if(s=e.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return AS(e,t,l,i,h,s,n);if(o){o=i.fallback,l=t.mode,s=e.child,h=s.sibling;var f={mode:"hidden",children:i.children};return!(l&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=f,t.deletions=null):(i=or(s,f),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=or(h,o):(o=Wr(o,l,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=e.child.memoizedState,l=l===null?zd(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Vd,i}return o=e.child,e=o.sibling,i=or(o,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function np(e,t){return t=kc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pu(e,t,n,i){return i!==null&&jf(i),co(t,e.child,null,n),e=np(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function AS(e,t,n,i,s,o,l){if(n)return t.flags&256?(t.flags&=-257,i=Mh(Error(Y(422))),pu(e,t,l,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=i.fallback,s=t.mode,i=kc({mode:"visible",children:i.children},s,0,null),o=Wr(o,s,l,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,t.mode&1&&co(t,e.child,null,l),t.child.memoizedState=zd(l),t.memoizedState=Vd,o);if(!(t.mode&1))return pu(e,t,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=Mh(o,i,void 0),pu(e,t,l,i)}if(h=(l&e.childLanes)!==0,Ye||h){if(i=Ae,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Pi(e,s),jn(i,e,s,-1))}return lp(),i=Mh(Error(Y(421))),pu(e,t,l,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=zS.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,an=nr(s.nextSibling),un=t,Kt=!0,Bn=null,e!==null&&(Sn[In++]=Ti,Sn[In++]=Si,Sn[In++]=Kr,Ti=e.id,Si=e.overflow,Kr=t),t=np(t,i.children),t.flags|=4096,t)}function mg(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Nd(e.return,t,n)}function Vh(e,t,n,i,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Ay(e,t,n){var i=t.pendingProps,s=i.revealOrder,o=i.tail;if(We(e,t,i.children,n),i=Xt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mg(e,n,t);else if(e.tag===19)mg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ht(Xt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ec(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Vh(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ec(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Vh(t,!0,n,null,o);break;case"together":Vh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ri(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xS(e,t,n){switch(t.tag){case 3:Sy(t),uo();break;case 5:Jv(t);break;case 1:tn(t.type)&&Ku(t);break;case 4:qf(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Ht(Yu,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ht(Xt,Xt.current&1),t.flags|=128,null):n&t.child.childLanes?Iy(e,t,n):(Ht(Xt,Xt.current&1),e=Ri(e,t,n),e!==null?e.sibling:null);Ht(Xt,Xt.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return Ay(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ht(Xt,Xt.current),i)break;return null;case 22:case 23:return t.lanes=0,wy(e,t,n)}return Ri(e,t,n)}var xy,Ud,Cy,Py;xy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ud=function(){};Cy=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Fr(Xn.current);var o=null;switch(n){case"input":s=ad(e,s),i=ad(e,i),o=[];break;case"select":s=ee({},s,{value:void 0}),i=ee({},i,{value:void 0}),o=[];break;case"textarea":s=cd(e,s),i=cd(e,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=$u)}dd(n,i);var l;n=null;for(g in s)if(!i.hasOwnProperty(g)&&s.hasOwnProperty(g)&&s[g]!=null)if(g==="style"){var h=s[g];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(za.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in i){var f=i[g];if(h=s!=null?s[g]:void 0,i.hasOwnProperty(g)&&f!==h&&(f!=null||h!=null))if(g==="style")if(h){for(l in h)!h.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in f)f.hasOwnProperty(l)&&h[l]!==f[l]&&(n||(n={}),n[l]=f[l])}else n||(o||(o=[]),o.push(g,n)),n=f;else g==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(o=o||[]).push(g,f)):g==="children"?typeof f!="string"&&typeof f!="number"||(o=o||[]).push(g,""+f):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(za.hasOwnProperty(g)?(f!=null&&g==="onScroll"&&Gt("scroll",e),o||h===f||(o=[])):(o=o||[]).push(g,f))}n&&(o=o||[]).push("style",n);var g=o;(t.updateQueue=g)&&(t.flags|=4)}};Py=function(e,t,n,i){n!==i&&(t.flags|=4)};function pa(e,t){if(!Kt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function CS(e,t,n){var i=t.pendingProps;switch(Ff(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return tn(t.type)&&qu(),Me(t),null;case 3:return i=t.stateNode,ho(),Zt(Xe),Zt(Fe),Qf(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(du(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&($d(Bn),Bn=null))),Ud(e,t),Me(t),null;case 5:Kf(t);var s=Fr(Qa.current);if(n=t.type,e!==null&&t.stateNode!=null)Cy(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Y(166));return Me(t),null}if(e=Fr(Xn.current),du(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[Jn]=t,i[qa]=o,e=(t.mode&1)!==0,n){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(s=0;s<Ea.length;s++)Gt(Ea[s],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":Im(i,o),Gt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Gt("invalid",i);break;case"textarea":xm(i,o),Gt("invalid",i)}dd(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&hu(i.textContent,h,e),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&hu(i.textContent,h,e),s=["children",""+h]):za.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&Gt("scroll",i)}switch(n){case"input":iu(i),Am(i,o,!0);break;case"textarea":iu(i),Cm(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=$u)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),n==="select"&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[Jn]=t,e[qa]=i,xy(e,t,!1,!1),t.stateNode=e;t:{switch(l=fd(n,i),n){case"dialog":Gt("cancel",e),Gt("close",e),s=i;break;case"iframe":case"object":case"embed":Gt("load",e),s=i;break;case"video":case"audio":for(s=0;s<Ea.length;s++)Gt(Ea[s],e);s=i;break;case"source":Gt("error",e),s=i;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),s=i;break;case"details":Gt("toggle",e),s=i;break;case"input":Im(e,i),s=ad(e,i),Gt("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=ee({},i,{value:void 0}),Gt("invalid",e);break;case"textarea":xm(e,i),s=cd(e,i),Gt("invalid",e);break;default:s=i}dd(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var f=h[o];o==="style"?sv(e,f):o==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&iv(e,f)):o==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Ua(e,f):typeof f=="number"&&Ua(e,""+f):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(za.hasOwnProperty(o)?f!=null&&o==="onScroll"&&Gt("scroll",e):f!=null&&xf(e,o,f,l))}switch(n){case"input":iu(e),Am(e,i,!1);break;case"textarea":iu(e),Cm(e);break;case"option":i.value!=null&&e.setAttribute("value",""+cr(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?Xs(e,!!i.multiple,o,!1):i.defaultValue!=null&&Xs(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Py(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Y(166));if(n=Fr(Qa.current),Fr(Xn.current),du(t)){if(i=t.stateNode,n=t.memoizedProps,i[Jn]=t,(o=i.nodeValue!==n)&&(e=un,e!==null))switch(e.tag){case 3:hu(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hu(i.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Jn]=t,t.stateNode=i}return Me(t),null;case 13:if(Zt(Xt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Kt&&an!==null&&t.mode&1&&!(t.flags&128))Zv(),uo(),t.flags|=98560,o=!1;else if(o=du(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(Y(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Jn]=t}else uo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),o=!1}else Bn!==null&&($d(Bn),Bn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Xt.current&1?_e===0&&(_e=3):lp())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return ho(),Ud(e,t),e===null&&Za(t.stateNode.containerInfo),Me(t),null;case 10:return Gf(t.type._context),Me(t),null;case 17:return tn(t.type)&&qu(),Me(t),null;case 19:if(Zt(Xt),o=t.memoizedState,o===null)return Me(t),null;if(i=(t.flags&128)!==0,l=o.rendering,l===null)if(i)pa(o,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ec(e),l!==null){for(t.flags|=128,pa(o,!1),i=l.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,e=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ht(Xt,Xt.current&1|2),t.child}e=e.sibling}o.tail!==null&&ce()>po&&(t.flags|=128,i=!0,pa(o,!1),t.lanes=4194304)}else{if(!i)if(e=ec(l),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Kt)return Me(t),null}else 2*ce()-o.renderingStartTime>po&&n!==1073741824&&(t.flags|=128,i=!0,pa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ce(),t.sibling=null,n=Xt.current,Ht(Xt,i?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return ap(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?on&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function PS(e,t){switch(Ff(t),t.tag){case 1:return tn(t.type)&&qu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ho(),Zt(Xe),Zt(Fe),Qf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kf(t),null;case 13:if(Zt(Xt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));uo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zt(Xt),null;case 4:return ho(),null;case 10:return Gf(t.type._context),null;case 22:case 23:return ap(),null;case 24:return null;default:return null}}var mu=!1,Ue=!1,RS=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Js(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){se(e,t,i)}else n.current=null}function Bd(e,t,n){try{n()}catch(i){se(e,t,i)}}var gg=!1;function LS(e,t){if(Sd=Wu,e=Ov(),Uf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break t}var l=0,h=-1,f=-1,g=0,v=0,E=e,T=null;e:for(;;){for(var O;E!==n||s!==0&&E.nodeType!==3||(h=l+s),E!==o||i!==0&&E.nodeType!==3||(f=l+i),E.nodeType===3&&(l+=E.nodeValue.length),(O=E.firstChild)!==null;)T=E,E=O;for(;;){if(E===e)break e;if(T===n&&++g===s&&(h=l),T===o&&++v===i&&(f=l),(O=E.nextSibling)!==null)break;E=T,T=E.parentNode}E=O}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Id={focusedElem:e,selectionRange:n},Wu=!1,rt=t;rt!==null;)if(t=rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rt=e;else for(;rt!==null;){t=rt;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var z=V.memoizedProps,j=V.memoizedState,x=t.stateNode,I=x.getSnapshotBeforeUpdate(t.elementType===t.type?z:zn(t.type,z),j);x.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(G){se(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,rt=e;break}rt=t.return}return V=gg,gg=!1,V}function Na(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Bd(t,n,o)}s=s.next}while(s!==i)}}function Lc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Fd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ry(e){var t=e.alternate;t!==null&&(e.alternate=null,Ry(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jn],delete t[qa],delete t[Cd],delete t[dS],delete t[fS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ly(e){return e.tag===5||e.tag===3||e.tag===4}function _g(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ly(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$u));else if(i!==4&&(e=e.child,e!==null))for(jd(e,t,n),e=e.sibling;e!==null;)jd(e,t,n),e=e.sibling}function Hd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Hd(e,t,n),e=e.sibling;e!==null;)Hd(e,t,n),e=e.sibling}var Ce=null,Un=!1;function Wi(e,t,n){for(n=n.child;n!==null;)Ny(e,t,n),n=n.sibling}function Ny(e,t,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Tc,n)}catch{}switch(n.tag){case 5:Ue||Js(n,t);case 6:var i=Ce,s=Un;Ce=null,Wi(e,t,n),Ce=i,Un=s,Ce!==null&&(Un?(e=Ce,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(Un?(e=Ce,n=n.stateNode,e.nodeType===8?Lh(e.parentNode,n):e.nodeType===1&&Lh(e,n),Ha(e)):Lh(Ce,n.stateNode));break;case 4:i=Ce,s=Un,Ce=n.stateNode.containerInfo,Un=!0,Wi(e,t,n),Ce=i,Un=s;break;case 0:case 11:case 14:case 15:if(!Ue&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Bd(n,t,l),s=s.next}while(s!==i)}Wi(e,t,n);break;case 1:if(!Ue&&(Js(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){se(n,t,h)}Wi(e,t,n);break;case 21:Wi(e,t,n);break;case 22:n.mode&1?(Ue=(i=Ue)||n.memoizedState!==null,Wi(e,t,n),Ue=i):Wi(e,t,n);break;default:Wi(e,t,n)}}function vg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new RS),t.forEach(function(i){var s=US.bind(null,e,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Vn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=e,l=t,h=l;t:for(;h!==null;){switch(h.tag){case 5:Ce=h.stateNode,Un=!1;break t;case 3:Ce=h.stateNode.containerInfo,Un=!0;break t;case 4:Ce=h.stateNode.containerInfo,Un=!0;break t}h=h.return}if(Ce===null)throw Error(Y(160));Ny(o,l,s),Ce=null,Un=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(g){se(s,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ky(t,e),t=t.sibling}function ky(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vn(t,e),Kn(e),i&4){try{Na(3,e,e.return),Lc(3,e)}catch(z){se(e,e.return,z)}try{Na(5,e,e.return)}catch(z){se(e,e.return,z)}}break;case 1:Vn(t,e),Kn(e),i&512&&n!==null&&Js(n,n.return);break;case 5:if(Vn(t,e),Kn(e),i&512&&n!==null&&Js(n,n.return),e.flags&32){var s=e.stateNode;try{Ua(s,"")}catch(z){se(e,e.return,z)}}if(i&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,h=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&tv(s,o),fd(h,l);var g=fd(h,o);for(l=0;l<f.length;l+=2){var v=f[l],E=f[l+1];v==="style"?sv(s,E):v==="dangerouslySetInnerHTML"?iv(s,E):v==="children"?Ua(s,E):xf(s,v,E,g)}switch(h){case"input":ld(s,o);break;case"textarea":ev(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var O=o.value;O!=null?Xs(s,!!o.multiple,O,!1):T!==!!o.multiple&&(o.defaultValue!=null?Xs(s,!!o.multiple,o.defaultValue,!0):Xs(s,!!o.multiple,o.multiple?[]:"",!1))}s[qa]=o}catch(z){se(e,e.return,z)}}break;case 6:if(Vn(t,e),Kn(e),i&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(z){se(e,e.return,z)}}break;case 3:if(Vn(t,e),Kn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ha(t.containerInfo)}catch(z){se(e,e.return,z)}break;case 4:Vn(t,e),Kn(e);break;case 13:Vn(t,e),Kn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(sp=ce())),i&4&&vg(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(Ue=(g=Ue)||v,Vn(t,e),Ue=g):Vn(t,e),Kn(e),i&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!v&&e.mode&1)for(rt=e,v=e.child;v!==null;){for(E=rt=v;rt!==null;){switch(T=rt,O=T.child,T.tag){case 0:case 11:case 14:case 15:Na(4,T,T.return);break;case 1:Js(T,T.return);var V=T.stateNode;if(typeof V.componentWillUnmount=="function"){i=T,n=T.return;try{t=i,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(z){se(i,n,z)}}break;case 5:Js(T,T.return);break;case 22:if(T.memoizedState!==null){Eg(E);continue}}O!==null?(O.return=T,rt=O):Eg(E)}v=v.sibling}t:for(v=null,E=e;;){if(E.tag===5){if(v===null){v=E;try{s=E.stateNode,g?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=E.stateNode,f=E.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=rv("display",l))}catch(z){se(e,e.return,z)}}}else if(E.tag===6){if(v===null)try{E.stateNode.nodeValue=g?"":E.memoizedProps}catch(z){se(e,e.return,z)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break t;for(;E.sibling===null;){if(E.return===null||E.return===e)break t;v===E&&(v=null),E=E.return}v===E&&(v=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Vn(t,e),Kn(e),i&4&&vg(e);break;case 21:break;default:Vn(t,e),Kn(e)}}function Kn(e){var t=e.flags;if(t&2){try{t:{for(var n=e.return;n!==null;){if(Ly(n)){var i=n;break t}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ua(s,""),i.flags&=-33);var o=_g(e);Hd(e,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=_g(e);jd(e,h,l);break;default:throw Error(Y(161))}}catch(f){se(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NS(e,t,n){rt=e,Oy(e)}function Oy(e,t,n){for(var i=(e.mode&1)!==0;rt!==null;){var s=rt,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||mu;if(!l){var h=s.alternate,f=h!==null&&h.memoizedState!==null||Ue;h=mu;var g=Ue;if(mu=l,(Ue=f)&&!g)for(rt=s;rt!==null;)l=rt,f=l.child,l.tag===22&&l.memoizedState!==null?wg(s):f!==null?(f.return=l,rt=f):wg(s);for(;o!==null;)rt=o,Oy(o),o=o.sibling;rt=s,mu=h,Ue=g}yg(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,rt=o):yg(e)}}function yg(e){for(;rt!==null;){var t=rt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ue||Lc(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ue)if(n===null)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:zn(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ig(t,o,i);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ig(t,l,n)}break;case 5:var h=t.stateNode;if(n===null&&t.flags&4){n=h;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var v=g.memoizedState;if(v!==null){var E=v.dehydrated;E!==null&&Ha(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ue||t.flags&512&&Fd(t)}catch(T){se(t,t.return,T)}}if(t===e){rt=null;break}if(n=t.sibling,n!==null){n.return=t.return,rt=n;break}rt=t.return}}function Eg(e){for(;rt!==null;){var t=rt;if(t===e){rt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,rt=n;break}rt=t.return}}function wg(e){for(;rt!==null;){var t=rt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Lc(4,t)}catch(f){se(t,n,f)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(f){se(t,s,f)}}var o=t.return;try{Fd(t)}catch(f){se(t,o,f)}break;case 5:var l=t.return;try{Fd(t)}catch(f){se(t,l,f)}}}catch(f){se(t,t.return,f)}if(t===e){rt=null;break}var h=t.sibling;if(h!==null){h.return=t.return,rt=h;break}rt=t.return}}var kS=Math.ceil,rc=bi.ReactCurrentDispatcher,ip=bi.ReactCurrentOwner,xn=bi.ReactCurrentBatchConfig,Ot=0,Ae=null,pe=null,Le=0,on=0,Ys=_r(0),_e=0,tl=null,Jr=0,Nc=0,rp=0,ka=null,Qe=null,sp=0,po=1/0,Ei=null,sc=!1,Wd=null,rr=null,gu=!1,Qi=null,oc=0,Oa=0,Gd=null,Nu=-1,ku=0;function Ge(){return Ot&6?ce():Nu!==-1?Nu:Nu=ce()}function sr(e){return e.mode&1?Ot&2&&Le!==0?Le&-Le:mS.transition!==null?(ku===0&&(ku=_v()),ku):(e=zt,e!==0||(e=window.event,e=e===void 0?16:Iv(e.type)),e):1}function jn(e,t,n,i){if(50<Oa)throw Oa=0,Gd=null,Error(Y(185));dl(e,n,i),(!(Ot&2)||e!==Ae)&&(e===Ae&&(!(Ot&2)&&(Nc|=n),_e===4&&qi(e,Le)),en(e,i),n===1&&Ot===0&&!(t.mode&1)&&(po=ce()+500,Cc&&vr()))}function en(e,t){var n=e.callbackNode;mT(e,t);var i=Hu(e,e===Ae?Le:0);if(i===0)n!==null&&Lm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Lm(n),t===1)e.tag===0?pS(Tg.bind(null,e)):Hv(Tg.bind(null,e)),cS(function(){!(Ot&6)&&vr()}),n=null;else{switch(vv(i)){case 1:n=Nf;break;case 4:n=mv;break;case 16:n=ju;break;case 536870912:n=gv;break;default:n=ju}n=Fy(n,by.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function by(e,t){if(Nu=-1,ku=0,Ot&6)throw Error(Y(327));var n=e.callbackNode;if(ro()&&e.callbackNode!==n)return null;var i=Hu(e,e===Ae?Le:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ac(e,i);else{t=i;var s=Ot;Ot|=2;var o=My();(Ae!==e||Le!==t)&&(Ei=null,po=ce()+500,Hr(e,t));do try{DS();break}catch(h){Dy(e,h)}while(!0);Wf(),rc.current=o,Ot=s,pe!==null?t=0:(Ae=null,Le=0,t=_e)}if(t!==0){if(t===2&&(s=vd(e),s!==0&&(i=s,t=Zd(e,s))),t===1)throw n=tl,Hr(e,0),qi(e,i),en(e,ce()),n;if(t===6)qi(e,i);else{if(s=e.current.alternate,!(i&30)&&!OS(s)&&(t=ac(e,i),t===2&&(o=vd(e),o!==0&&(i=o,t=Zd(e,o))),t===1))throw n=tl,Hr(e,0),qi(e,i),en(e,ce()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(Y(345));case 2:Vr(e,Qe,Ei);break;case 3:if(qi(e,i),(i&130023424)===i&&(t=sp+500-ce(),10<t)){if(Hu(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){Ge(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=xd(Vr.bind(null,e,Qe,Ei),t);break}Vr(e,Qe,Ei);break;case 4:if(qi(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var l=31-Fn(i);o=1<<l,l=t[l],l>s&&(s=l),i&=~o}if(i=s,i=ce()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kS(i/1960))-i,10<i){e.timeoutHandle=xd(Vr.bind(null,e,Qe,Ei),i);break}Vr(e,Qe,Ei);break;case 5:Vr(e,Qe,Ei);break;default:throw Error(Y(329))}}}return en(e,ce()),e.callbackNode===n?by.bind(null,e):null}function Zd(e,t){var n=ka;return e.current.memoizedState.isDehydrated&&(Hr(e,t).flags|=256),e=ac(e,t),e!==2&&(t=Qe,Qe=n,t!==null&&$d(t)),e}function $d(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function OS(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Hn(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qi(e,t){for(t&=~rp,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fn(t),i=1<<n;e[n]=-1,t&=~i}}function Tg(e){if(Ot&6)throw Error(Y(327));ro();var t=Hu(e,0);if(!(t&1))return en(e,ce()),null;var n=ac(e,t);if(e.tag!==0&&n===2){var i=vd(e);i!==0&&(t=i,n=Zd(e,i))}if(n===1)throw n=tl,Hr(e,0),qi(e,t),en(e,ce()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,Qe,Ei),en(e,ce()),null}function op(e,t){var n=Ot;Ot|=1;try{return e(t)}finally{Ot=n,Ot===0&&(po=ce()+500,Cc&&vr())}}function Yr(e){Qi!==null&&Qi.tag===0&&!(Ot&6)&&ro();var t=Ot;Ot|=1;var n=xn.transition,i=zt;try{if(xn.transition=null,zt=1,e)return e()}finally{zt=i,xn.transition=n,Ot=t,!(Ot&6)&&vr()}}function ap(){on=Ys.current,Zt(Ys)}function Hr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uS(n)),pe!==null)for(n=pe.return;n!==null;){var i=n;switch(Ff(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&qu();break;case 3:ho(),Zt(Xe),Zt(Fe),Qf();break;case 5:Kf(i);break;case 4:ho();break;case 13:Zt(Xt);break;case 19:Zt(Xt);break;case 10:Gf(i.type._context);break;case 22:case 23:ap()}n=n.return}if(Ae=e,pe=e=or(e.current,null),Le=on=t,_e=0,tl=null,rp=Nc=Jr=0,Qe=ka=null,Br!==null){for(t=0;t<Br.length;t++)if(n=Br[t],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Br=null}return e}function Dy(e,t){do{var n=pe;try{if(Wf(),Pu.current=ic,nc){for(var i=te.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}nc=!1}if(Qr=0,Ie=me=te=null,La=!1,Ja=0,ip.current=null,n===null||n.return===null){_e=1,tl=t,pe=null;break}t:{var o=e,l=n.return,h=n,f=t;if(t=Le,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var g=f,v=h,E=v.tag;if(!(v.mode&1)&&(E===0||E===11||E===15)){var T=v.alternate;T?(v.updateQueue=T.updateQueue,v.memoizedState=T.memoizedState,v.lanes=T.lanes):(v.updateQueue=null,v.memoizedState=null)}var O=ug(l);if(O!==null){O.flags&=-257,cg(O,l,h,o,t),O.mode&1&&lg(o,g,t),t=O,f=g;var V=t.updateQueue;if(V===null){var z=new Set;z.add(f),t.updateQueue=z}else V.add(f);break t}else{if(!(t&1)){lg(o,g,t),lp();break t}f=Error(Y(426))}}else if(Kt&&h.mode&1){var j=ug(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),cg(j,l,h,o,t),jf(fo(f,h));break t}}o=f=fo(f,h),_e!==4&&(_e=2),ka===null?ka=[o]:ka.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=vy(o,f,t);ng(o,x);break t;case 1:h=f;var I=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(rr===null||!rr.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t;var G=yy(o,h,t);ng(o,G);break t}}o=o.return}while(o!==null)}zy(n)}catch(J){t=J,pe===n&&n!==null&&(pe=n=n.return);continue}break}while(!0)}function My(){var e=rc.current;return rc.current=ic,e===null?ic:e}function lp(){(_e===0||_e===3||_e===2)&&(_e=4),Ae===null||!(Jr&268435455)&&!(Nc&268435455)||qi(Ae,Le)}function ac(e,t){var n=Ot;Ot|=2;var i=My();(Ae!==e||Le!==t)&&(Ei=null,Hr(e,t));do try{bS();break}catch(s){Dy(e,s)}while(!0);if(Wf(),Ot=n,rc.current=i,pe!==null)throw Error(Y(261));return Ae=null,Le=0,_e}function bS(){for(;pe!==null;)Vy(pe)}function DS(){for(;pe!==null&&!oT();)Vy(pe)}function Vy(e){var t=By(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?zy(e):pe=t,ip.current=null}function zy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=PS(n,t),n!==null){n.flags&=32767,pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,pe=null;return}}else if(n=CS(n,t,on),n!==null){pe=n;return}if(t=t.sibling,t!==null){pe=t;return}pe=t=e}while(t!==null);_e===0&&(_e=5)}function Vr(e,t,n){var i=zt,s=xn.transition;try{xn.transition=null,zt=1,MS(e,t,n,i)}finally{xn.transition=s,zt=i}return null}function MS(e,t,n,i){do ro();while(Qi!==null);if(Ot&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(gT(e,o),e===Ae&&(pe=Ae=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,Fy(ju,function(){return ro(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=xn.transition,xn.transition=null;var l=zt;zt=1;var h=Ot;Ot|=4,ip.current=null,LS(e,n),ky(n,e),nS(Id),Wu=!!Sd,Id=Sd=null,e.current=n,NS(n),aT(),Ot=h,zt=l,xn.transition=o}else e.current=n;if(gu&&(gu=!1,Qi=e,oc=s),o=e.pendingLanes,o===0&&(rr=null),cT(n.stateNode),en(e,ce()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(sc)throw sc=!1,e=Wd,Wd=null,e;return oc&1&&e.tag!==0&&ro(),o=e.pendingLanes,o&1?e===Gd?Oa++:(Oa=0,Gd=e):Oa=0,vr(),null}function ro(){if(Qi!==null){var e=vv(oc),t=xn.transition,n=zt;try{if(xn.transition=null,zt=16>e?16:e,Qi===null)var i=!1;else{if(e=Qi,Qi=null,oc=0,Ot&6)throw Error(Y(331));var s=Ot;for(Ot|=4,rt=e.current;rt!==null;){var o=rt,l=o.child;if(rt.flags&16){var h=o.deletions;if(h!==null){for(var f=0;f<h.length;f++){var g=h[f];for(rt=g;rt!==null;){var v=rt;switch(v.tag){case 0:case 11:case 15:Na(8,v,o)}var E=v.child;if(E!==null)E.return=v,rt=E;else for(;rt!==null;){v=rt;var T=v.sibling,O=v.return;if(Ry(v),v===g){rt=null;break}if(T!==null){T.return=O,rt=T;break}rt=O}}}var V=o.alternate;if(V!==null){var z=V.child;if(z!==null){V.child=null;do{var j=z.sibling;z.sibling=null,z=j}while(z!==null)}}rt=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,rt=l;else t:for(;rt!==null;){if(o=rt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Na(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,rt=x;break t}rt=o.return}}var I=e.current;for(rt=I;rt!==null;){l=rt;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,rt=k;else t:for(l=I;rt!==null;){if(h=rt,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Lc(9,h)}}catch(J){se(h,h.return,J)}if(h===l){rt=null;break t}var G=h.sibling;if(G!==null){G.return=h.return,rt=G;break t}rt=h.return}}if(Ot=s,vr(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Tc,e)}catch{}i=!0}return i}finally{zt=n,xn.transition=t}}return!1}function Sg(e,t,n){t=fo(n,t),t=vy(e,t,1),e=ir(e,t,1),t=Ge(),e!==null&&(dl(e,1,t),en(e,t))}function se(e,t,n){if(e.tag===3)Sg(e,e,n);else for(;t!==null;){if(t.tag===3){Sg(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rr===null||!rr.has(i))){e=fo(n,e),e=yy(t,e,1),t=ir(t,e,1),e=Ge(),t!==null&&(dl(t,1,e),en(t,e));break}}t=t.return}}function VS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Ge(),e.pingedLanes|=e.suspendedLanes&n,Ae===e&&(Le&n)===n&&(_e===4||_e===3&&(Le&130023424)===Le&&500>ce()-sp?Hr(e,0):rp|=n),en(e,t)}function Uy(e,t){t===0&&(e.mode&1?(t=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):t=1);var n=Ge();e=Pi(e,t),e!==null&&(dl(e,t,n),en(e,n))}function zS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Uy(e,n)}function US(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(t),Uy(e,n)}var By;By=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Ye=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ye=!1,xS(e,t,n);Ye=!!(e.flags&131072)}else Ye=!1,Kt&&t.flags&1048576&&Wv(t,Ju,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Lu(e,t),e=t.pendingProps;var s=lo(t,Fe.current);io(t,n),s=Yf(null,t,i,e,s,n);var o=Xf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tn(i)?(o=!0,Ku(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$f(t),s.updater=Rc,t.stateNode=s,s._reactInternals=t,Od(t,i,e,n),t=Md(null,t,i,!0,o,n)):(t.tag=0,Kt&&o&&Bf(t),We(null,t,s,n),t=t.child),t;case 16:i=t.elementType;t:{switch(Lu(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=FS(i),e=zn(i,e),s){case 0:t=Dd(null,t,i,e,n);break t;case 1:t=fg(null,t,i,e,n);break t;case 11:t=hg(null,t,i,e,n);break t;case 14:t=dg(null,t,i,zn(i.type,e),n);break t}throw Error(Y(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zn(i,s),Dd(e,t,i,s,n);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zn(i,s),fg(e,t,i,s,n);case 3:t:{if(Sy(t),e===null)throw Error(Y(387));i=t.pendingProps,o=t.memoizedState,s=o.element,Qv(e,t),tc(t,i,null,n);var l=t.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=fo(Error(Y(423)),t),t=pg(e,t,i,n,s);break t}else if(i!==s){s=fo(Error(Y(424)),t),t=pg(e,t,i,n,s);break t}else for(an=nr(t.stateNode.containerInfo.firstChild),un=t,Kt=!0,Bn=null,n=qv(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uo(),i===s){t=Ri(e,t,n);break t}We(e,t,i,n)}t=t.child}return t;case 5:return Jv(t),e===null&&Ld(t),i=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,Ad(i,s)?l=null:o!==null&&Ad(i,o)&&(t.flags|=32),Ty(e,t),We(e,t,l,n),t.child;case 6:return e===null&&Ld(t),null;case 13:return Iy(e,t,n);case 4:return qf(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=co(t,null,i,n):We(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zn(i,s),hg(e,t,i,s,n);case 7:return We(e,t,t.pendingProps,n),t.child;case 8:return We(e,t,t.pendingProps.children,n),t.child;case 12:return We(e,t,t.pendingProps.children,n),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,Ht(Yu,i._currentValue),i._currentValue=l,o!==null)if(Hn(o.value,l)){if(o.children===s.children&&!Xe.current){t=Ri(e,t,n);break t}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var f=h.firstContext;f!==null;){if(f.context===i){if(o.tag===1){f=Ii(-1,n&-n),f.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var v=g.pending;v===null?f.next=f:(f.next=v.next,v.next=f),g.pending=f}}o.lanes|=n,f=o.alternate,f!==null&&(f.lanes|=n),Nd(o.return,n,t),h.lanes|=n;break}f=f.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Nd(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}We(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,io(t,n),s=Pn(s),i=i(s),t.flags|=1,We(e,t,i,n),t.child;case 14:return i=t.type,s=zn(i,t.pendingProps),s=zn(i.type,s),dg(e,t,i,s,n);case 15:return Ey(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zn(i,s),Lu(e,t),t.tag=1,tn(i)?(e=!0,Ku(t)):e=!1,io(t,n),_y(t,i,s),Od(t,i,s,n),Md(null,t,i,!0,e,n);case 19:return Ay(e,t,n);case 22:return wy(e,t,n)}throw Error(Y(156,t.tag))};function Fy(e,t){return pv(e,t)}function BS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(e,t,n,i){return new BS(e,t,n,i)}function up(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FS(e){if(typeof e=="function")return up(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pf)return 11;if(e===Rf)return 14}return 2}function or(e,t){var n=e.alternate;return n===null?(n=An(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,i,s,o){var l=2;if(i=e,typeof e=="function")up(e)&&(l=1);else if(typeof e=="string")l=5;else t:switch(e){case js:return Wr(n.children,s,o,t);case Cf:l=8,s|=8;break;case id:return e=An(12,n,t,s|2),e.elementType=id,e.lanes=o,e;case rd:return e=An(13,n,t,s),e.elementType=rd,e.lanes=o,e;case sd:return e=An(19,n,t,s),e.elementType=sd,e.lanes=o,e;case J_:return kc(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K_:l=10;break t;case Q_:l=9;break t;case Pf:l=11;break t;case Rf:l=14;break t;case Gi:l=16,i=null;break t}throw Error(Y(130,e==null?e:typeof e,""))}return t=An(l,n,t,s),t.elementType=e,t.type=i,t.lanes=o,t}function Wr(e,t,n,i){return e=An(7,e,i,t),e.lanes=n,e}function kc(e,t,n,i){return e=An(22,e,i,t),e.elementType=J_,e.lanes=n,e.stateNode={isHidden:!1},e}function zh(e,t,n){return e=An(6,e,null,t),e.lanes=n,e}function Uh(e,t,n){return t=An(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jS(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yh(0),this.expirationTimes=yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yh(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cp(e,t,n,i,s,o,l,h,f){return e=new jS(e,t,n,h,f),t===1?(t=1,o===!0&&(t|=8)):t=0,o=An(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(o),e}function HS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function jy(e){if(!e)return hr;e=e._reactInternals;t:{if(is(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(tn(n))return jv(e,n,t)}return t}function Hy(e,t,n,i,s,o,l,h,f){return e=cp(n,i,!0,e,s,o,l,h,f),e.context=jy(null),n=e.current,i=Ge(),s=sr(n),o=Ii(i,s),o.callback=t??null,ir(n,o,s),e.current.lanes=s,dl(e,s,i),en(e,i),e}function Oc(e,t,n,i){var s=t.current,o=Ge(),l=sr(s);return n=jy(n),t.context===null?t.context=n:t.pendingContext=n,t=Ii(o,l),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ir(s,t,l),e!==null&&(jn(e,s,l,o),Cu(e,s,l)),l}function lc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ig(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hp(e,t){Ig(e,t),(e=e.alternate)&&Ig(e,t)}function WS(){return null}var Wy=typeof reportError=="function"?reportError:function(e){console.error(e)};function dp(e){this._internalRoot=e}bc.prototype.render=dp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Oc(e,t,null,null)};bc.prototype.unmount=dp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yr(function(){Oc(null,e,null,null)}),t[Ci]=null}};function bc(e){this._internalRoot=e}bc.prototype.unstable_scheduleHydration=function(e){if(e){var t=wv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$i.length&&t!==0&&t<$i[n].priority;n++);$i.splice(n,0,e),n===0&&Sv(e)}};function fp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ag(){}function GS(e,t,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var g=lc(l);o.call(g)}}var l=Hy(t,i,e,0,null,!1,!1,"",Ag);return e._reactRootContainer=l,e[Ci]=l.current,Za(e.nodeType===8?e.parentNode:e),Yr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var g=lc(f);h.call(g)}}var f=cp(e,0,!1,null,null,!1,!1,"",Ag);return e._reactRootContainer=f,e[Ci]=f.current,Za(e.nodeType===8?e.parentNode:e),Yr(function(){Oc(t,f,n,i)}),f}function Mc(e,t,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var f=lc(l);h.call(f)}}Oc(t,l,e,s)}else l=GS(n,t,e,s,i);return lc(l)}yv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ya(t.pendingLanes);n!==0&&(kf(t,n|1),en(t,ce()),!(Ot&6)&&(po=ce()+500,vr()))}break;case 13:Yr(function(){var i=Pi(e,1);if(i!==null){var s=Ge();jn(i,e,1,s)}}),hp(e,1)}};Of=function(e){if(e.tag===13){var t=Pi(e,134217728);if(t!==null){var n=Ge();jn(t,e,134217728,n)}hp(e,134217728)}};Ev=function(e){if(e.tag===13){var t=sr(e),n=Pi(e,t);if(n!==null){var i=Ge();jn(n,e,t,i)}hp(e,t)}};wv=function(){return zt};Tv=function(e,t){var n=zt;try{return zt=e,t()}finally{zt=n}};md=function(e,t,n){switch(t){case"input":if(ld(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=xc(i);if(!s)throw Error(Y(90));X_(i),ld(i,s)}}}break;case"textarea":ev(e,n);break;case"select":t=n.value,t!=null&&Xs(e,!!n.multiple,t,!1)}};lv=op;uv=Yr;var ZS={usingClientEntryPoint:!1,Events:[pl,Zs,xc,ov,av,op]},ma={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$S={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dv(e),e===null?null:e.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||WS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Tc=_u.inject($S),Yn=_u}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZS;dn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(t))throw Error(Y(200));return HS(e,t,null,n)};dn.createRoot=function(e,t){if(!fp(e))throw Error(Y(299));var n=!1,i="",s=Wy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=cp(e,1,!1,null,null,n,!1,i,s),e[Ci]=t.current,Za(e.nodeType===8?e.parentNode:e),new dp(t)};dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=dv(t),e=e===null?null:e.stateNode,e};dn.flushSync=function(e){return Yr(e)};dn.hydrate=function(e,t,n){if(!Dc(t))throw Error(Y(200));return Mc(null,e,t,!0,n)};dn.hydrateRoot=function(e,t,n){if(!fp(e))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=Wy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Hy(t,null,e,1,n??null,s,!1,o,l),e[Ci]=t.current,Za(e),i)for(e=0;e<i.length;e++)n=i[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new bc(t)};dn.render=function(e,t,n){if(!Dc(t))throw Error(Y(200));return Mc(null,e,t,!1,n)};dn.unmountComponentAtNode=function(e){if(!Dc(e))throw Error(Y(40));return e._reactRootContainer?(Yr(function(){Mc(null,null,e,!1,function(){e._reactRootContainer=null,e[Ci]=null})}),!0):!1};dn.unstable_batchedUpdates=op;dn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Dc(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Mc(e,t,n,!1,i)};dn.version="18.3.1-next-f1338f8080-20240426";function Gy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gy)}catch(e){console.error(e)}}Gy(),G_.exports=dn;var Zy=G_.exports,xg=Zy;ed.createRoot=xg.createRoot,ed.hydrateRoot=xg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},el.apply(this,arguments)}var Ji;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ji||(Ji={}));const Cg="popstate";function qS(e){e===void 0&&(e={});function t(s,o){let{pathname:l="/",search:h="",hash:f=""}=rs(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),qd("",{pathname:l,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let l=s.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let f=s.location.href,g=f.indexOf("#");h=g===-1?f:f.slice(0,g)}return h+"#"+(typeof o=="string"?o:$y(o))}function i(s,o){Vc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return QS(t,n,i,e)}function ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function KS(){return Math.random().toString(36).substr(2,8)}function Pg(e,t){return{usr:e.state,key:e.key,idx:t}}function qd(e,t,n,i){return n===void 0&&(n=null),el({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rs(t):t,{state:n,key:t&&t.key||i||KS()})}function $y(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function rs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function QS(e,t,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=Ji.Pop,f=null,g=v();g==null&&(g=0,l.replaceState(el({},l.state,{idx:g}),""));function v(){return(l.state||{idx:null}).idx}function E(){h=Ji.Pop;let j=v(),x=j==null?null:j-g;g=j,f&&f({action:h,location:z.location,delta:x})}function T(j,x){h=Ji.Push;let I=qd(z.location,j,x);n&&n(I,j),g=v()+1;let k=Pg(I,g),G=z.createHref(I);try{l.pushState(k,"",G)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;s.location.assign(G)}o&&f&&f({action:h,location:z.location,delta:1})}function O(j,x){h=Ji.Replace;let I=qd(z.location,j,x);n&&n(I,j),g=v();let k=Pg(I,g),G=z.createHref(I);l.replaceState(k,"",G),o&&f&&f({action:h,location:z.location,delta:0})}function V(j){let x=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof j=="string"?j:$y(j);return I=I.replace(/ $/,"%20"),ve(x,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,x)}let z={get action(){return h},get location(){return e(s,l)},listen(j){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Cg,E),f=j,()=>{s.removeEventListener(Cg,E),f=null}},createHref(j){return t(s,j)},createURL:V,encodeLocation(j){let x=V(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:T,replace:O,go(j){return l.go(j)}};return z}var Rg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rg||(Rg={}));function JS(e,t,n){return n===void 0&&(n="/"),YS(e,t,n)}function YS(e,t,n,i){let s=typeof t=="string"?rs(t):t,o=Qy(s.pathname||"/",n);if(o==null)return null;let l=qy(e);XS(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let g=hI(o);h=lI(l[f],g)}return h}function qy(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(ve(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let g=Gr([i,f.relativePath]),v=n.concat(f);o.children&&o.children.length>0&&(ve(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),qy(o.children,t,v,g)),!(o.path==null&&!o.index)&&t.push({path:g,score:oI(g,o.index),routesMeta:v})};return e.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let f of Ky(o.path))s(o,l,f)}),t}function Ky(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=Ky(i.join("/")),h=[];return h.push(...l.map(f=>f===""?o:[o,f].join("/"))),s&&h.push(...l),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function XS(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:aI(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const tI=/^:[\w-]+$/,eI=3,nI=2,iI=1,rI=10,sI=-2,Lg=e=>e==="*";function oI(e,t){let n=e.split("/"),i=n.length;return n.some(Lg)&&(i+=sI),t&&(i+=nI),n.filter(s=>!Lg(s)).reduce((s,o)=>s+(tI.test(o)?eI:o===""?iI:rI),i)}function aI(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function lI(e,t,n){let{routesMeta:i}=e,s={},o="/",l=[];for(let h=0;h<i.length;++h){let f=i[h],g=h===i.length-1,v=o==="/"?t:t.slice(o.length)||"/",E=uI({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},v),T=f.route;if(!E)return null;Object.assign(s,E.params),l.push({params:s,pathname:Gr([o,E.pathname]),pathnameBase:vI(Gr([o,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(o=Gr([o,E.pathnameBase]))}return l}function uI(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=cI(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((g,v,E)=>{let{paramName:T,isOptional:O}=v;if(T==="*"){let z=h[E]||"";l=o.slice(0,o.length-z.length).replace(/(.)\/+$/,"$1")}const V=h[E];return O&&!V?g[T]=void 0:g[T]=(V||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:l,pattern:e}}function cI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function hI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}const dI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fI=e=>dI.test(e);function pI(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:s=""}=typeof e=="string"?rs(e):e,o;if(n)if(fI(n))o=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Vc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?o=Ng(n.substring(1),"/"):o=Ng(n,t)}else o=t;return{pathname:o,search:yI(i),hash:EI(s)}}function Ng(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Bh(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function gI(e,t){let n=mI(e);return t?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function _I(e,t,n,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=rs(e):(s=el({},e),ve(!s.pathname||!s.pathname.includes("?"),Bh("?","pathname","search",s)),ve(!s.pathname||!s.pathname.includes("#"),Bh("#","pathname","hash",s)),ve(!s.search||!s.search.includes("#"),Bh("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let E=t.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),E-=1;s.pathname=T.join("/")}h=E>=0?t[E]:"/"}let f=pI(s,h),g=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(g||v)&&(f.pathname+="/"),f}const Gr=e=>e.join("/").replace(/\/\/+/g,"/"),vI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jy=["post","put","patch","delete"];new Set(Jy);const TI=["get",...Jy];new Set(TI);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nl.apply(this,arguments)}const pp=$.createContext(null),SI=$.createContext(null),zc=$.createContext(null),Uc=$.createContext(null),Ao=$.createContext({outlet:null,matches:[],isDataRoute:!1}),Yy=$.createContext(null);function Bc(){return $.useContext(Uc)!=null}function Xy(){return Bc()||ve(!1),$.useContext(Uc).location}function t0(e){$.useContext(zc).static||$.useLayoutEffect(e)}function II(){let{isDataRoute:e}=$.useContext(Ao);return e?VI():AI()}function AI(){Bc()||ve(!1);let e=$.useContext(pp),{basename:t,future:n,navigator:i}=$.useContext(zc),{matches:s}=$.useContext(Ao),{pathname:o}=Xy(),l=JSON.stringify(gI(s,n.v7_relativeSplatPath)),h=$.useRef(!1);return t0(()=>{h.current=!0}),$.useCallback(function(g,v){if(v===void 0&&(v={}),!h.current)return;if(typeof g=="number"){i.go(g);return}let E=_I(g,JSON.parse(l),o,v.relative==="path");e==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:Gr([t,E.pathname])),(v.replace?i.replace:i.push)(E,v.state,v)},[t,i,l,o,e])}function xI(e,t){return CI(e,t)}function CI(e,t,n,i){Bc()||ve(!1);let{navigator:s}=$.useContext(zc),{matches:o}=$.useContext(Ao),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let g=Xy(),v;if(t){var E;let j=typeof t=="string"?rs(t):t;f==="/"||(E=j.pathname)!=null&&E.startsWith(f)||ve(!1),v=j}else v=g;let T=v.pathname||"/",O=T;if(f!=="/"){let j=f.replace(/^\//,"").split("/");O="/"+T.replace(/^\//,"").split("/").slice(j.length).join("/")}let V=JS(e,{pathname:O}),z=kI(V&&V.map(j=>Object.assign({},j,{params:Object.assign({},h,j.params),pathname:Gr([f,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?f:Gr([f,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,i);return t&&z?$.createElement(Uc.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Ji.Pop}},z):z}function PI(){let e=MI(),t=wI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),n?$.createElement("pre",{style:s},n):null,null)}const RI=$.createElement(PI,null);class LI extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?$.createElement(Ao.Provider,{value:this.props.routeContext},$.createElement(Yy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NI(e){let{routeContext:t,match:n,children:i}=e,s=$.useContext(pp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Ao.Provider,{value:t},i)}function kI(e,t,n,i){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,h=(s=n)==null?void 0:s.errors;if(h!=null){let v=l.findIndex(E=>E.route.id&&(h==null?void 0:h[E.route.id])!==void 0);v>=0||ve(!1),l=l.slice(0,Math.min(l.length,v+1))}let f=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=v),E.route.id){let{loaderData:T,errors:O}=n,V=E.route.loader&&T[E.route.id]===void 0&&(!O||O[E.route.id]===void 0);if(E.route.lazy||V){f=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((v,E,T)=>{let O,V=!1,z=null,j=null;n&&(O=h&&E.route.id?h[E.route.id]:void 0,z=E.route.errorElement||RI,f&&(g<0&&T===0?(zI("route-fallback"),V=!0,j=null):g===T&&(V=!0,j=E.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,T+1)),I=()=>{let k;return O?k=z:V?k=j:E.route.Component?k=$.createElement(E.route.Component,null):E.route.element?k=E.route.element:k=v,$.createElement(NI,{match:E,routeContext:{outlet:v,matches:x,isDataRoute:n!=null},children:k})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?$.createElement(LI,{location:n.location,revalidation:n.revalidation,component:z,error:O,children:I(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):I()},null)}var e0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(e0||{}),n0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(n0||{});function OI(e){let t=$.useContext(pp);return t||ve(!1),t}function bI(e){let t=$.useContext(SI);return t||ve(!1),t}function DI(e){let t=$.useContext(Ao);return t||ve(!1),t}function i0(e){let t=DI(),n=t.matches[t.matches.length-1];return n.route.id||ve(!1),n.route.id}function MI(){var e;let t=$.useContext(Yy),n=bI(),i=i0();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function VI(){let{router:e}=OI(e0.UseNavigateStable),t=i0(n0.UseNavigateStable),n=$.useRef(!1);return t0(()=>{n.current=!0}),$.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,nl({fromRouteId:t},o)))},[e,t])}const kg={};function zI(e,t,n){kg[e]||(kg[e]=!0)}function UI(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function r0(e){ve(!1)}function BI(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Ji.Pop,navigator:o,static:l=!1,future:h}=e;Bc()&&ve(!1);let f=t.replace(/^\/*/,"/"),g=$.useMemo(()=>({basename:f,navigator:o,static:l,future:nl({v7_relativeSplatPath:!1},h)}),[f,h,o,l]);typeof i=="string"&&(i=rs(i));let{pathname:v="/",search:E="",hash:T="",state:O=null,key:V="default"}=i,z=$.useMemo(()=>{let j=Qy(v,f);return j==null?null:{location:{pathname:j,search:E,hash:T,state:O,key:V},navigationType:s}},[f,v,E,T,O,V,s]);return z==null?null:$.createElement(zc.Provider,{value:g},$.createElement(Uc.Provider,{children:n,value:z}))}function FI(e){let{children:t,location:n}=e;return xI(Kd(t),n)}new Promise(()=>{});function Kd(e,t){t===void 0&&(t=[]);let n=[];return $.Children.forEach(e,(i,s)=>{if(!$.isValidElement(i))return;let o=[...t,s];if(i.type===$.Fragment){n.push.apply(n,Kd(i.props.children,o));return}i.type!==r0&&ve(!1),!i.props.index||!i.props.children||ve(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Kd(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const jI="6";try{window.__reactRouterVersion=jI}catch{}const HI="startTransition",Og=Vw[HI];function WI(e){let{basename:t,children:n,future:i,window:s}=e,o=$.useRef();o.current==null&&(o.current=qS({window:s,v5Compat:!0}));let l=o.current,[h,f]=$.useState({action:l.action,location:l.location}),{v7_startTransition:g}=i||{},v=$.useCallback(E=>{g&&Og?Og(()=>f(E)):f(E)},[f,g]);return $.useLayoutEffect(()=>l.listen(v),[l,v]),$.useEffect(()=>UI(i),[i]),$.createElement(BI,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}var bg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bg||(bg={}));var Dg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Dg||(Dg={}));function s0(e,t){const n=$.useRef(t);$.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function GI(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const ZI=1;function $I(e){return Object.freeze({__version:ZI,map:e})}function o0(e,t){return Object.freeze({...e,...t})}const a0=$.createContext(null),l0=a0.Provider;function Fc(){const e=$.useContext(a0);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function qI(e){function t(n,i){const{instance:s,context:o}=e(n).current;return $.useImperativeHandle(i,()=>s),n.children==null?null:$r.createElement(l0,{value:o},n.children)}return $.forwardRef(t)}function KI(e){function t(n,i){const[s,o]=$.useState(!1),{instance:l}=e(n,o).current;$.useImperativeHandle(i,()=>l),$.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?Zy.createPortal(n.children,h):null}return $.forwardRef(t)}function QI(e){function t(n,i){const{instance:s}=e(n).current;return $.useImperativeHandle(i,()=>s),null}return $.forwardRef(t)}function mp(e,t){const n=$.useRef();$.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function jc(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function JI(e,t){return function(i,s){const o=Fc(),l=e(jc(i,o),o);return s0(o.map,i.attribution),mp(l.current,i.eventHandlers),t(l.current,o,i,s),l}}var Qd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(Ew,function(n){var i="1.9.4";function s(r){var a,c,d,m;for(c=1,d=arguments.length;c<d;c++){m=arguments[c];for(a in m)r[a]=m[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var d=c.call(arguments,2);return function(){return r.apply(a,d.length?d.concat(c.call(arguments)):arguments)}}var h=0;function f(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function g(r,a,c){var d,m,y,N;return N=function(){d=!1,m&&(y.apply(c,m),m=!1)},y=function(){d?m=arguments:(r.apply(c,arguments),setTimeout(N,a),d=!0)},y}function v(r,a,c){var d=a[1],m=a[0],y=d-m;return r===d&&c?r:((r-m)%y+y)%y+m}function E(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function O(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function V(r){return O(r).split(/\s+/)}function z(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function j(r,a,c){var d=[];for(var m in r)d.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function I(r,a){return r.replace(x,function(c,d){var m=a[d];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(a)),m})}var k=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function G(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var J="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function tt(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var C=0;function S(r){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(r,c)}var A=window.requestAnimationFrame||tt("RequestAnimationFrame")||S,P=window.cancelAnimationFrame||tt("CancelAnimationFrame")||tt("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function b(r,a,c){if(c&&A===S)r.call(a);else return A.call(window,l(r,a))}function M(r){r&&P.call(window,r)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:f,throttle:g,wrapNum:v,falseFn:E,formatNum:T,trim:O,splitWords:V,setOptions:z,getParamString:j,template:I,isArray:k,indexOf:G,emptyImageUrl:J,requestFn:A,cancelFn:P,requestAnimFrame:b,cancelAnimFrame:M};function Wt(){}Wt.extend=function(r){var a=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,d=o(c);d.constructor=a,a.prototype=d;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(a[m]=this[m]);return r.statics&&s(a,r.statics),r.includes&&(Ln(r.includes),s.apply(null,[d].concat(r.includes))),s(d,r),delete d.statics,delete d.includes,d.options&&(d.options=c.options?o(c.options):{},s(d.options,r.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,N=d._initHooks.length;y<N;y++)d._initHooks[y].call(this)}},a},Wt.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Wt.mergeOptions=function(r){return s(this.prototype.options,r),this},Wt.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Ln(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=k(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var oe={on:function(r,a,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],a);else{r=V(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var d in r)this._off(d,r[d],a);else{r=V(r);for(var m=arguments.length===1,y=0,N=r.length;y<N;y++)m?this._off(r[y]):this._off(r[y],a,c)}return this},_on:function(r,a,c,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var m={fn:a,ctx:c};d&&(m.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(m)}},_off:function(r,a,c){var d,m,y;if(this._events&&(d=this._events[r],!!d)){if(arguments.length===1){if(this._firingCount)for(m=0,y=d.length;m<y;m++)d[m].fn=E;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var N=this._listens(r,a,c);if(N!==!1){var B=d[N];this._firingCount&&(B.fn=E,this._events[r]=d=d.slice()),d.splice(N,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var d=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,N=m.length;y<N;y++){var B=m[y],H=B.fn;B.once&&this.off(r,H,B.ctx),H.call(B.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(r,a,c,d){typeof r!="string"&&console.warn('"string" type argument expected');var m=a;typeof a!="function"&&(d=!!a,m=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,m,c)!==!1)return!0;if(d){for(var N in this._eventParents)if(this._eventParents[N].listens(r,a,c,d))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var d=this._events[r]||[];if(!a)return!!d.length;c===this&&(c=void 0);for(var m=0,y=d.length;m<y;m++)if(d[m].fn===a&&d[m].ctx===c)return m;return!1},once:function(r,a,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],a,!0);else{r=V(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};oe.addEventListener=oe.on,oe.removeEventListener=oe.clearAllEventListeners=oe.off,oe.addOneTimeEventListener=oe.once,oe.fireEvent=oe.fire,oe.hasEventListeners=oe.listens;var Ee=Wt.extend(oe);function Z(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var lt=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new Z(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new Z(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=lt(this.x),this.y=lt(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function X(r,a,c){return r instanceof Z?r:k(r)?new Z(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new Z(r.x,r.y):new Z(r,a,c)}function dt(r,a){if(r)for(var c=a?[r,a]:r,d=0,m=c.length;d<m;d++)this.extend(c[d])}dt.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof Z||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=vt(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof Z?r=X(r):r=vt(r),r instanceof dt?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=vt(r);var a=this.min,c=this.max,d=r.min,m=r.max,y=m.x>=a.x&&d.x<=c.x,N=m.y>=a.y&&d.y<=c.y;return y&&N},overlaps:function(r){r=vt(r);var a=this.min,c=this.max,d=r.min,m=r.max,y=m.x>a.x&&d.x<c.x,N=m.y>a.y&&d.y<c.y;return y&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,d=Math.abs(a.x-c.x)*r,m=Math.abs(a.y-c.y)*r;return vt(X(a.x-d,a.y-m),X(c.x+d,c.y+m))},equals:function(r){return r?(r=vt(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function vt(r,a){return!r||r instanceof dt?r:new dt(r,a)}function St(r,a){if(r)for(var c=a?[r,a]:r,d=0,m=c.length;d<m;d++)this.extend(c[d])}St.prototype={extend:function(r){var a=this._southWest,c=this._northEast,d,m;if(r instanceof Tt)d=r,m=r;else if(r instanceof St){if(d=r._southWest,m=r._northEast,!d||!m)return this}else return r?this.extend(mt(r)||bt(r)):this;return!a&&!c?(this._southWest=new Tt(d.lat,d.lng),this._northEast=new Tt(m.lat,m.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,d=Math.abs(a.lat-c.lat)*r,m=Math.abs(a.lng-c.lng)*r;return new St(new Tt(a.lat-d,a.lng-m),new Tt(c.lat+d,c.lng+m))},getCenter:function(){return new Tt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Tt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Tt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Tt||"lat"in r?r=mt(r):r=bt(r);var a=this._southWest,c=this._northEast,d,m;return r instanceof St?(d=r.getSouthWest(),m=r.getNorthEast()):d=m=r,d.lat>=a.lat&&m.lat<=c.lat&&d.lng>=a.lng&&m.lng<=c.lng},intersects:function(r){r=bt(r);var a=this._southWest,c=this._northEast,d=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>=a.lat&&d.lat<=c.lat,N=m.lng>=a.lng&&d.lng<=c.lng;return y&&N},overlaps:function(r){r=bt(r);var a=this._southWest,c=this._northEast,d=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>a.lat&&d.lat<c.lat,N=m.lng>a.lng&&d.lng<c.lng;return y&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=bt(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function bt(r,a){return r instanceof St?r:new St(r,a)}function Tt(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}Tt.prototype={equals:function(r,a){if(!r)return!1;r=mt(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return pn.distance(this,mt(r))},wrap:function(){return pn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return bt([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Tt(this.lat,this.lng,this.alt)}};function mt(r,a,c){return r instanceof Tt?r:k(r)&&typeof r[0]!="object"?r.length===3?new Tt(r[0],r[1],r[2]):r.length===2?new Tt(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Tt(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new Tt(r,a,c)}var ie={latLngToPoint:function(r,a){var c=this.projection.project(r),d=this.scale(a);return this.transformation._transform(c,d)},pointToLatLng:function(r,a){var c=this.scale(a),d=this.transformation.untransform(r,c);return this.projection.unproject(d)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),d=this.transformation.transform(a.min,c),m=this.transformation.transform(a.max,c);return new dt(d,m)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,d=r.alt;return new Tt(c,a,d)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),d=a.lat-c.lat,m=a.lng-c.lng;if(d===0&&m===0)return r;var y=r.getSouthWest(),N=r.getNorthEast(),B=new Tt(y.lat-d,y.lng-m),H=new Tt(N.lat-d,N.lng-m);return new St(B,H)}},pn=s({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,d=r.lat*c,m=a.lat*c,y=Math.sin((a.lat-r.lat)*c/2),N=Math.sin((a.lng-r.lng)*c/2),B=y*y+Math.cos(d)*Math.cos(m)*N*N,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),as=6378137,Wn={R:as,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,r.lat),-c),m=Math.sin(d*a);return new Z(this.R*r.lng*a,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var a=180/Math.PI;return new Tt((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=as*Math.PI;return new dt([-r,-r],[r,r])}()};function be(r,a,c,d){if(k(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=d}be.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new Z((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function Nn(r,a,c,d){return new be(r,a,c,d)}var ri=s({},pn,{code:"EPSG:3857",projection:Wn,transformation:function(){var r=.5/(Math.PI*Wn.R);return Nn(r,.5,-r,.5)}()}),Er=s({},ri,{code:"EPSG:900913"});function si(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function wr(r,a){var c="",d,m,y,N,B,H;for(d=0,y=r.length;d<y;d++){for(B=r[d],m=0,N=B.length;m<N;m++)H=B[m],c+=(m?"L":"M")+H.x+" "+H.y;c+=a?at.svg?"z":"x":""}return c||"M0 0"}var Tr=document.documentElement.style,oi="ActiveXObject"in window,ls=oi&&!document.addEventListener,ai="msLaunchUri"in navigator&&!("documentMode"in document),li=mn("webkit"),F=mn("android"),nt=mn("android 2")||mn("android 3"),ct=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Mt=F&&mn("Google")&&ct<537&&!("AudioNode"in window),ht=!!window.opera,Nt=!ai&&mn("chrome"),ae=mn("gecko")&&!li&&!ht&&!oi,Sr=!Nt&&mn("safari"),Lo=mn("phantom"),Il="OTransition"in Tr,Ir=navigator.platform.indexOf("Win")===0,No=oi&&"transition"in Tr,us="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,cs="MozPerspective"in Tr,oh=!window.L_DISABLE_3D&&(No||us||cs)&&!Il&&!Lo,Ar=typeof orientation<"u"||mn("mobile"),ko=Ar&&li,Al=Ar&&us,Oo=!window.PointerEvent&&window.MSPointerEvent,Di=!!(window.PointerEvent||Oo),hs="ontouchstart"in window||!!window.TouchEvent,bo=!window.L_NO_TOUCH&&(hs||Di),ui=Ar&&ht,xl=Ar&&ae,ds=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cl=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",E,a),window.removeEventListener("testPassiveEventSupport",E,a)}catch{}return r}(),xr=function(){return!!document.createElement("canvas").getContext}(),fs=!!(document.createElementNS&&si("svg").createSVGRect),xe=!!fs&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pl=!fs&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Cr=navigator.platform.indexOf("Mac")===0,Pr=navigator.platform.indexOf("Linux")===0;function mn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var at={ie:oi,ielt9:ls,edge:ai,webkit:li,android:F,android23:nt,androidStock:Mt,opera:ht,chrome:Nt,gecko:ae,safari:Sr,phantom:Lo,opera12:Il,win:Ir,ie3d:No,webkit3d:us,gecko3d:cs,any3d:oh,mobile:Ar,mobileWebkit:ko,mobileWebkit3d:Al,msPointer:Oo,pointer:Di,touch:bo,touchNative:hs,mobileOpera:ui,mobileGecko:xl,retina:ds,passiveEvents:Cl,canvas:xr,svg:fs,vml:Pl,inlineSvg:xe,mac:Cr,linux:Pr},ci=at.msPointer?"MSPointerDown":"pointerdown",Rl=at.msPointer?"MSPointerMove":"pointermove",Ll=at.msPointer?"MSPointerUp":"pointerup",Rr=at.msPointer?"MSPointerCancel":"pointercancel",ps={touchstart:ci,touchmove:Rl,touchend:Ll,touchcancel:Rr},ms={touchstart:_s,touchmove:gs,touchend:gs,touchcancel:gs},kn={},On=!1;function Nl(r,a,c){return a==="touchstart"&&Ol(),ms[a]?(c=ms[a].bind(this,c),r.addEventListener(ps[a],c,!1),c):(console.warn("wrong event specified:",a),E)}function kl(r,a,c){if(!ps[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(ps[a],c,!1)}function Do(r){kn[r.pointerId]=r}function Mo(r){kn[r.pointerId]&&(kn[r.pointerId]=r)}function Vo(r){delete kn[r.pointerId]}function Ol(){On||(document.addEventListener(ci,Do,!0),document.addEventListener(Rl,Mo,!0),document.addEventListener(Ll,Vo,!0),document.addEventListener(Rr,Vo,!0),On=!0)}function gs(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in kn)a.touches.push(kn[c]);a.changedTouches=[a],r(a)}}function _s(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Jt(a),gs(r,a)}function bl(r){var a={},c,d;for(d in r)c=r[d],a[d]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var zo=200;function Lr(r,a){r.addEventListener("dblclick",a);var c=0,d;function m(y){if(y.detail!==1){d=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var N=Qo(y);if(!(N.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!N.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=zo?(d++,d===2&&a(bl(y))):d=1,c=B}}}return r.addEventListener("click",m),{dblclick:a,simDblclick:m}}function hi(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Nr=fi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kr=fi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Uo=kr==="webkitTransition"||kr==="OTransition"?kr+"End":"transitionend";function Bo(r){return typeof r=="string"?document.getElementById(r):r}function Mi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(r,null);c=d?d[a]:null}return c==="auto"?null:c}function Ct(r,a,c){var d=document.createElement(r);return d.className=a||"",c&&c.appendChild(d),d}function jt(r){var a=r.parentNode;a&&a.removeChild(r)}function Or(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function di(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Vi(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function Fo(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=gn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function wt(r,a){if(r.classList!==void 0)for(var c=V(a),d=0,m=c.length;d<m;d++)r.classList.add(c[d]);else if(!Fo(r,a)){var y=gn(r);jo(r,(y?y+" ":"")+a)}}function $t(r,a){r.classList!==void 0?r.classList.remove(a):jo(r,O((" "+gn(r)+" ").replace(" "+a+" "," ")))}function jo(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function gn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function re(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&vs(r,a)}function vs(r,a){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+d+"(opacity="+a+")"}function fi(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Gn(r,a,c){var d=a||new Z(0,0);r.style[Nr]=(at.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function gt(r,a){r._leaflet_pos=a,at.any3d?Gn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function _n(r){return r._leaflet_pos||new Z(0,0)}var bn,Dn,Ho;if("onselectstart"in document)bn=function(){ft(window,"selectstart",Jt)},Dn=function(){Bt(window,"selectstart",Jt)};else{var zi=fi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bn=function(){if(zi){var r=document.documentElement.style;Ho=r[zi],r[zi]="none"}},Dn=function(){zi&&(document.documentElement.style[zi]=Ho,Ho=void 0)}}function Wo(){ft(window,"dragstart",Jt)}function Go(){Bt(window,"dragstart",Jt)}var ys,Zo;function pi(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(nn(),ys=r,Zo=r.style.outlineStyle,r.style.outlineStyle="none",ft(window,"keydown",nn))}function nn(){ys&&(ys.style.outlineStyle=Zo,ys=void 0,Zo=void 0,Bt(window,"keydown",nn))}function $o(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Es(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Dl={__proto__:null,TRANSFORM:Nr,TRANSITION:kr,TRANSITION_END:Uo,get:Bo,getStyle:Mi,create:Ct,remove:jt,empty:Or,toFront:di,toBack:Vi,hasClass:Fo,addClass:wt,removeClass:$t,setClass:jo,getClass:gn,setOpacity:re,testProp:fi,setTransform:Gn,setPosition:gt,getPosition:_n,get disableTextSelection(){return bn},get enableTextSelection(){return Dn},disableImageDrag:Wo,enableImageDrag:Go,preventOutline:pi,restoreOutline:nn,getSizedParentNode:$o,getScale:Es};function ft(r,a,c,d){if(a&&typeof a=="object")for(var m in a)qo(r,m,a[m],c);else{a=V(a);for(var y=0,N=a.length;y<N;y++)qo(r,a[y],c,d)}return this}var vn="_leaflet_events";function Bt(r,a,c,d){if(arguments.length===1)Ml(r),delete r[vn];else if(a&&typeof a=="object")for(var m in a)Ko(r,m,a[m],c);else if(a=V(a),arguments.length===2)Ml(r,function(B){return G(a,B)!==-1});else for(var y=0,N=a.length;y<N;y++)Ko(r,a[y],c,d);return this}function Ml(r,a){for(var c in r[vn]){var d=c.split(/\d/)[0];(!a||a(d))&&Ko(r,d,null,null,c)}}var yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qo(r,a,c,d){var m=a+f(c)+(d?"_"+f(d):"");if(r[vn]&&r[vn][m])return this;var y=function(B){return c.call(d||r,B||window.event)},N=y;!at.touchNative&&at.pointer&&a.indexOf("touch")===0?y=Nl(r,a,y):at.touch&&a==="dblclick"?y=Lr(r,y):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(yn[a]||a,y,at.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(y=function(B){B=B||window.event,Jo(r,B)&&N(B)},r.addEventListener(yn[a],y,!1)):r.addEventListener(a,N,!1):r.attachEvent("on"+a,y),r[vn]=r[vn]||{},r[vn][m]=y}function Ko(r,a,c,d,m){m=m||a+f(c)+(d?"_"+f(d):"");var y=r[vn]&&r[vn][m];if(!y)return this;!at.touchNative&&at.pointer&&a.indexOf("touch")===0?kl(r,a,y):at.touch&&a==="dblclick"?hi(r,y):"removeEventListener"in r?r.removeEventListener(yn[a]||a,y,!1):r.detachEvent("on"+a,y),r[vn][m]=null}function En(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ui(r){return qo(r,"wheel",En),this}function Bi(r){return ft(r,"mousedown touchstart dblclick contextmenu",En),r._leaflet_disable_click=!0,this}function Jt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function rn(r){return Jt(r),En(r),this}function Qo(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function ws(r,a){if(!a)return new Z(r.clientX,r.clientY);var c=Es(a),d=c.boundingClientRect;return new Z((r.clientX-d.left)/c.x-a.clientLeft,(r.clientY-d.top)/c.y-a.clientTop)}var qt=at.linux&&at.chrome?window.devicePixelRatio:at.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Vl(r){return at.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/qt:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Jo(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var zl={__proto__:null,on:ft,off:Bt,stopPropagation:En,disableScrollPropagation:Ui,disableClickPropagation:Bi,preventDefault:Jt,stop:rn,getPropagationPath:Qo,getMousePosition:ws,getWheelDelta:Vl,isExternalTarget:Jo,addListener:ft,removeListener:Bt},Yo=Ee.extend({run:function(r,a,c,d){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=_n(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),gt(this._el,c),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),At=Ee.extend({options:{crs:ri,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=z(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(mt(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=kr&&at.any3d&&!at.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ft(this._proxy,Uo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(mt(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(at.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var d=this.getZoomScale(a),m=this.getSize().divideBy(2),y=r instanceof Z?r:this.latLngToContainerPoint(r),N=y.subtract(m).multiplyBy(1-1/d),B=this.containerPointToLatLng(m.add(N));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():bt(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),d=X(a.paddingBottomRight||a.padding||[0,0]),m=this.getBoundsZoom(r,!1,c.add(d));if(m=typeof a.maxZoom=="number"?Math.min(a.maxZoom,m):m,m===1/0)return{center:r.getCenter(),zoom:m};var y=d.subtract(c).divideBy(2),N=this.project(r.getSouthWest(),m),B=this.project(r.getNorthEast(),m),H=this.unproject(N.add(B).divideBy(2).add(y),m);return{center:H,zoom:m}},fitBounds:function(r,a){if(r=bt(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Yo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){wt(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!at.any3d)return this.setView(r,a,c);this._stop();var d=this.project(this.getCenter()),m=this.project(r),y=this.getSize(),N=this._zoom;r=mt(r),a=a===void 0?N:a;var B=Math.max(y.x,y.y),H=B*this.getZoomScale(N,a),q=m.distanceTo(d)||1,it=1.42,pt=it*it;function It(de){var tu=de?-1:1,mw=de?H:B,gw=H*H-B*B+tu*pt*pt*q*q,_w=2*mw*pt*q,fh=gw/_w,_m=Math.sqrt(fh*fh+1)-fh,vw=_m<1e-9?-18:Math.log(_m);return vw}function He(de){return(Math.exp(de)-Math.exp(-de))/2}function Te(de){return(Math.exp(de)+Math.exp(-de))/2}function Tn(de){return He(de)/Te(de)}var Ke=It(0);function bs(de){return B*(Te(Ke)/Te(Ke+it*de))}function hw(de){return B*(Te(Ke)*Tn(Ke+it*de)-He(Ke))/pt}function dw(de){return 1-Math.pow(1-de,1.5)}var fw=Date.now(),mm=(It(1)-Ke)/it,pw=c.duration?1e3*c.duration:1e3*mm*.8;function gm(){var de=(Date.now()-fw)/pw,tu=dw(de)*mm;de<=1?(this._flyToFrame=b(gm,this),this._move(this.unproject(d.add(m.subtract(d).multiplyBy(hw(tu)/q)),N),this.getScaleZoom(B/bs(tu),N),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),gm.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=bt(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,bt(r));return c.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),d=X(a.paddingBottomRight||a.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(r),N=this.getPixelBounds(),B=vt([N.min.add(c),N.max.subtract(d)]),H=B.getSize();if(!B.contains(y)){this._enforcingBounds=!0;var q=y.subtract(B.getCenter()),it=B.extend(y).getSize().subtract(H);m.x+=q.x<0?-it.x:it.x,m.y+=q.y<0?-it.y:it.y,this.panTo(this.unproject(m),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=a.divideBy(2).round(),m=c.divideBy(2).round(),y=d.subtract(m);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,d=new Tt(a,c),m=d.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var N=this.getBoundsZoom(m);this.setView(d,y.maxZoom?Math.min(N,y.maxZoom):N)}var B={latlng:d,bounds:m,timestamp:r.timestamp};for(var H in r.coords)typeof r.coords[H]=="number"&&(B[H]=r.coords[H]);this.fire("locationfound",B)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),jt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)jt(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),d=Ct("div",c,a||this._mapPane);return r&&(this._panes[r]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new St(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=bt(r),c=X(c||[0,0]);var d=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),N=r.getNorthWest(),B=r.getSouthEast(),H=this.getSize().subtract(c),q=vt(this.project(B,d),this.project(N,d)).getSize(),it=at.any3d?this.options.zoomSnap:1,pt=H.x/q.x,It=H.y/q.y,He=a?Math.max(pt,It):Math.min(pt,It);return d=this.getScaleZoom(He,d),it&&(d=Math.round(d/(it/100))*(it/100),d=a?Math.ceil(d/it)*it:Math.floor(d/it)*it),Math.max(m,Math.min(y,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new dt(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var d=c.zoom(r*c.scale(a));return isNaN(d)?1/0:d},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(mt(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(mt(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(mt(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(bt(r))},distance:function(r,a){return this.options.crs.distance(mt(r),mt(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(mt(r)))},mouseEventToContainerPoint:function(r){return ws(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=Bo(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ft(a,"scroll",this._onScroll,this),this._containerId=f(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&at.any3d,wt(r,"leaflet-container"+(at.touch?" leaflet-touch":"")+(at.retina?" leaflet-retina":"")+(at.ielt9?" leaflet-oldie":"")+(at.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Mi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(wt(r.markerPane,"leaflet-zoom-hide"),wt(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){gt(this._mapPane,new Z(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var m=this._zoom!==a;this._moveStart(m,c)._move(r,a)._moveEnd(m),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,d){a===void 0&&(a=this._zoom);var m=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),d?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){gt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[f(this._container)]=this;var a=r?Bt:ft;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),at.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],d,m=a==="mouseout"||a==="mouseover",y=r.target||r.srcElement,N=!1;y;){if(d=this._targets[f(y)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){N=!0;break}if(d&&d.listens(a,!0)&&(m&&!Jo(y,r)||(c.push(d),m))||y===this._container)break;y=y.parentNode}return!c.length&&!N&&!m&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&pi(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var d=s({},r);d.type="preclick",this._fireDOMEvent(d,d.type,c)}var m=this._findEventTargets(r,a);if(c){for(var y=[],N=0;N<c.length;N++)c[N].listens(a,!0)&&y.push(c[N]);m=y.concat(m)}if(m.length){a==="contextmenu"&&Jt(r);var B=m[0],H={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var q=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=q?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(r),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=q?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(N=0;N<m.length;N++)if(m[N].fire(a,H,!0),H.originalEvent._stopped||m[N].options.bubblingMouseEvents===!1&&G(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return _n(this._mapPane)||new Z(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var d=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(r,a,c){var d=this._getNewPixelOrigin(c,a);return vt([this.project(r.getSouthWest(),a)._subtract(d),this.project(r.getNorthWest(),a)._subtract(d),this.project(r.getSouthEast(),a)._subtract(d),this.project(r.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var d=this.project(r,a),m=this.getSize().divideBy(2),y=new dt(d.subtract(m),d.add(m)),N=this._getBoundsOffset(y,c,a);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?r:this.unproject(d.add(N),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),d=new dt(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(r,a,c){var d=vt(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),m=d.min.subtract(r.min),y=d.max.subtract(r.max),N=this._rebound(m.x,-y.x),B=this._rebound(m.y,-y.y);return new Z(N,B)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),d=at.any3d?this.options.zoomSnap:1;return d&&(r=Math.round(r/d)*d),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$t(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Nr,d=this._proxy.style[c];Gn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){jt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Gn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),m=this._getCenterOffset(r)._divideBy(1-1/d);return c.animate!==!0&&!this.getSize().contains(m)?!1:(b(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,wt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$t(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ts(r,a){return new At(r,a)}var qe=Wt.extend({options:{position:"topright"},initialize:function(r){z(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),d=r._controlCorners[c];return wt(a,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(jt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),je=function(r){return new qe(r)};At.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Ct("div",a+"control-container",this._container);function d(m,y){var N=a+m+" "+a+y;r[m+y]=Ct("div",N,c)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)jt(this._controlCorners[r]);jt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xo=qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,d){return c<d?-1:d<c?1:0}},initialize:function(r,a,c){z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in r)this._addLayer(r[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return qe.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(f(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){wt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(wt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):$t(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $t(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Ct("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Bi(a),Ui(a);var d=this._section=Ct("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ft(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Ct("a",r+"-toggle",a);m.href="#",m.title="Layers",m.setAttribute("role","button"),ft(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){Jt(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Ct("div",r+"-base",d),this._separator=Ct("div",r+"-separator",d),this._overlaysList=Ct("div",r+"-overlays",d),a.appendChild(d)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&f(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(d,m){return this.options.sortFunction(d.layer,m.layer,d.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Or(this._baseLayersList),Or(this._overlaysList),this._layerControlInputs=[];var r,a,c,d,m=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),a=a||d.overlay,r=r||!d.overlay,m+=d.overlay?0:1;return this.options.hideSingleBase&&(r=r&&m>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(f(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),d;r.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers_"+f(this),c),this._layerControlInputs.push(d),d.layerId=f(r.layer),ft(d,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var y=document.createElement("span");a.appendChild(y),y.appendChild(d),y.appendChild(m);var N=r.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,d=[],m=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)a=r[y],c=this._getLayer(a.layerId).layer,a.checked?d.push(c):a.checked||m.push(c);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<d.length;y++)this._map.hasLayer(d[y])||this._map.addLayer(d[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,d=this._map.getZoom(),m=r.length-1;m>=0;m--)a=r[m],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&d<c.options.minZoom||c.options.maxZoom!==void 0&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ft(r,"click",Jt),this.expand();var a=this;setTimeout(function(){Bt(r,"click",Jt),a._preventClick=!1})}}),ah=function(r,a,c){return new Xo(r,a,c)},mi=qe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Ct("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,d,m){var y=Ct("a",c,d);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),Bi(y),ft(y,"click",rn),ft(y,"click",m,this),ft(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";$t(this._zoomInButton,a),$t(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(wt(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(wt(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});At.mergeOptions({zoomControl:!0}),At.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mi,this.addControl(this.zoomControl))});var Ul=function(r){return new mi(r)},Ss=qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Ct("div",a),d=this.options;return this._addScales(d,a+"-line",c),r.on(d.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Ct("div",a,c)),r.imperial&&(this._iScale=Ct("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,d,m;a>5280?(c=a/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(m=this._getRoundNum(a),this._updateScale(this._iScale,m+" ft",m/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Is=function(r){return new Ss(r)},Bl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fi=qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(at.inlineSvg?Bl+" ":"")+"Leaflet</a>"},initialize:function(r){z(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),Bi(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});At.mergeOptions({attributionControl:!0}),At.addInitHook(function(){this.options.attributionControl&&new Fi().addTo(this)});var lh=function(r){return new Fi(r)};qe.Layers=Xo,qe.Zoom=mi,qe.Scale=Ss,qe.Attribution=Fi,je.layers=ah,je.zoom=Ul,je.scale=Is,je.attribution=lh;var sn=Wt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sn.addTo=function(r,a){return r.addHandler(a,this),this};var br={Events:oe},ta=at.touch?"touchstart mousedown":"mousedown",Mn=Ee.extend({options:{clickTolerance:3},initialize:function(r,a,c,d){z(this,d),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ft(this._dragStartTarget,ta,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,ta,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Fo(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Mn._dragging=this,this._preventOutline&&pi(this._element),Wo(),bn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=$o(this._element);this._startPoint=new Z(a.clientX,a.clientY),this._startPos=_n(this._element),this._parentScale=Es(c);var d=r.type==="mousedown";ft(document,d?"mousemove":"touchmove",this._onMove,this),ft(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new Z(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Jt(r),this._moved||(this.fire("dragstart"),this._moved=!0,wt(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),wt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),gt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){$t(document.body,"leaflet-dragging"),this._lastTarget&&($t(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),Go(),Dn();var a=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function As(r,a,c){var d,m=[1,4,2,8],y,N,B,H,q,it,pt,It;for(y=0,it=r.length;y<it;y++)r[y]._code=Zn(r[y],a);for(B=0;B<4;B++){for(pt=m[B],d=[],y=0,it=r.length,N=it-1;y<it;N=y++)H=r[y],q=r[N],H._code&pt?q._code&pt||(It=we(q,H,pt,a,c),It._code=Zn(It,a),d.push(It)):(q._code&pt&&(It=we(q,H,pt,a,c),It._code=Zn(It,a),d.push(It)),d.push(H));r=d}return r}function xs(r,a){var c,d,m,y,N,B,H,q,it;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var pt=mt([0,0]),It=bt(r),He=It.getNorthWest().distanceTo(It.getSouthWest())*It.getNorthEast().distanceTo(It.getNorthWest());He<1700&&(pt=Cs(r));var Te=r.length,Tn=[];for(c=0;c<Te;c++){var Ke=mt(r[c]);Tn.push(a.project(mt([Ke.lat-pt.lat,Ke.lng-pt.lng])))}for(B=H=q=0,c=0,d=Te-1;c<Te;d=c++)m=Tn[c],y=Tn[d],N=m.y*y.x-y.y*m.x,H+=(m.x+y.x)*N,q+=(m.y+y.y)*N,B+=N*3;B===0?it=Tn[0]:it=[H/B,q/B];var bs=a.unproject(X(it));return mt([bs.lat+pt.lat,bs.lng+pt.lng])}function Cs(r){for(var a=0,c=0,d=0,m=0;m<r.length;m++){var y=mt(r[m]);a+=y.lat,c+=y.lng,d++}return mt([a/d,c/d])}var Ps={__proto__:null,clipPolygon:As,polygonCenter:xs,centroid:Cs};function ea(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=jl(r,c),r=Fl(r,c),r}function na(r,a,c){return Math.sqrt(wn(r,a,c,!0))}function gi(r,a,c){return wn(r,a,c)}function Fl(r,a){var c=r.length,d=typeof Uint8Array<"u"?Uint8Array:Array,m=new d(c);m[0]=m[c-1]=1,Rs(r,m,a,0,c-1);var y,N=[];for(y=0;y<c;y++)m[y]&&N.push(r[y]);return N}function Rs(r,a,c,d,m){var y=0,N,B,H;for(B=d+1;B<=m-1;B++)H=wn(r[B],r[d],r[m],!0),H>y&&(N=B,y=H);y>c&&(a[N]=1,Rs(r,a,c,d,N),Rs(r,a,c,N,m))}function jl(r,a){for(var c=[r[0]],d=1,m=0,y=r.length;d<y;d++)Hl(r[d],r[m])>a&&(c.push(r[d]),m=d);return m<y-1&&c.push(r[y-1]),c}var ia;function Dr(r,a,c,d,m){var y=d?ia:Zn(r,c),N=Zn(a,c),B,H,q;for(ia=N;;){if(!(y|N))return[r,a];if(y&N)return!1;B=y||N,H=we(r,a,B,c,m),q=Zn(H,c),B===y?(r=H,y=q):(a=H,N=q)}}function we(r,a,c,d,m){var y=a.x-r.x,N=a.y-r.y,B=d.min,H=d.max,q,it;return c&8?(q=r.x+y*(H.y-r.y)/N,it=H.y):c&4?(q=r.x+y*(B.y-r.y)/N,it=B.y):c&2?(q=H.x,it=r.y+N*(H.x-r.x)/y):c&1&&(q=B.x,it=r.y+N*(B.x-r.x)/y),new Z(q,it,m)}function Zn(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Hl(r,a){var c=a.x-r.x,d=a.y-r.y;return c*c+d*d}function wn(r,a,c,d){var m=a.x,y=a.y,N=c.x-m,B=c.y-y,H=N*N+B*B,q;return H>0&&(q=((r.x-m)*N+(r.y-y)*B)/H,q>1?(m=c.x,y=c.y):q>0&&(m+=N*q,y+=B*q)),N=r.x-m,B=r.y-y,d?N*N+B*B:new Z(m,y)}function u(r){return!k(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function _(r,a){var c,d,m,y,N,B,H,q;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var it=mt([0,0]),pt=bt(r),It=pt.getNorthWest().distanceTo(pt.getSouthWest())*pt.getNorthEast().distanceTo(pt.getNorthWest());It<1700&&(it=Cs(r));var He=r.length,Te=[];for(c=0;c<He;c++){var Tn=mt(r[c]);Te.push(a.project(mt([Tn.lat-it.lat,Tn.lng-it.lng])))}for(c=0,d=0;c<He-1;c++)d+=Te[c].distanceTo(Te[c+1])/2;if(d===0)q=Te[0];else for(c=0,y=0;c<He-1;c++)if(N=Te[c],B=Te[c+1],m=N.distanceTo(B),y+=m,y>d){H=(y-d)/m,q=[B.x-H*(B.x-N.x),B.y-H*(B.y-N.y)];break}var Ke=a.unproject(X(q));return mt([Ke.lat+it.lat,Ke.lng+it.lng])}var w={__proto__:null,simplify:ea,pointToSegmentDistance:na,closestPointOnSegment:gi,clipSegment:Dr,_getEdgeIntersection:we,_getBitCode:Zn,_sqClosestPointOnSegment:wn,isFlat:u,_flat:p,polylineCenter:_},U={project:function(r){return new Z(r.lng,r.lat)},unproject:function(r){return new Tt(r.y,r.x)},bounds:new dt([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new dt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,d=r.lat*a,m=this.R_MINOR/c,y=Math.sqrt(1-m*m),N=y*Math.sin(d),B=Math.tan(Math.PI/4-d/2)/Math.pow((1-N)/(1+N),y/2);return d=-c*Math.log(Math.max(B,1e-10)),new Z(r.lng*a*c,d)},unproject:function(r){for(var a=180/Math.PI,c=this.R,d=this.R_MINOR/c,m=Math.sqrt(1-d*d),y=Math.exp(-r.y/c),N=Math.PI/2-2*Math.atan(y),B=0,H=.1,q;B<15&&Math.abs(H)>1e-7;B++)q=m*Math.sin(N),q=Math.pow((1-q)/(1+q),m/2),H=Math.PI/2-2*Math.atan(y*q)-N,N+=H;return new Tt(N*a,r.x*a/c)}},et={__proto__:null,LonLat:U,Mercator:W,SphericalMercator:Wn},Vt=s({},pn,{code:"EPSG:3395",projection:W,transformation:function(){var r=.5/(Math.PI*W.R);return Nn(r,.5,-r,.5)}()}),he=s({},pn,{code:"EPSG:4326",projection:U,transformation:Nn(1/180,1,-1/180,.5)}),Rt=s({},ie,{projection:U,transformation:Nn(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,d=a.lat-r.lat;return Math.sqrt(c*c+d*d)},infinite:!0});ie.Earth=pn,ie.EPSG3395=Vt,ie.EPSG3857=ri,ie.EPSG900913=Er,ie.EPSG4326=he,ie.Simple=Rt;var Ft=Ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[f(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[f(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});At.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=f(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=f(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return f(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?k(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[f(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=f(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var m=this._zoomBoundLayers[d].options;r=m.minZoom===void 0?r:Math.min(r,m.minZoom),a=m.maxZoom===void 0?a:Math.max(a,m.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yt=Ft.extend({initialize:function(r,a){z(this,a),this._layers={};var c,d;if(r)for(c=0,d=r.length;c<d;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,d;for(c in this._layers)d=this._layers[c],d[r]&&d[r].apply(d,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return f(r)}}),ji=function(r,a){return new Yt(r,a)},le=Yt.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Yt.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Yt.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new St;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Ls=function(r,a){return new le(r,a)},$n=Wt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){z(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(r,a){var c=this.options,d=c[a+"Size"];typeof d=="number"&&(d=[d,d]);var m=X(d),y=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return at.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function ZE(r){return new $n(r)}var ra=$n.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ra.imagePath!="string"&&(ra.imagePath=this._detectIconPath()),(this.options.imagePath||ra.imagePath)+$n.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,d,m){var y=d.exec(c);return y&&y[m]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ct("div","leaflet-default-icon-path",document.body),a=Mi(r,"background-image")||Mi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Qp=sn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Mn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),wt(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$t(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,d=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=_n(a._icon),N=c.getPixelBounds(),B=c.getPixelOrigin(),H=vt(N.min._subtract(B).add(m),N.max._subtract(B).subtract(m));if(!H.contains(y)){var q=X((Math.max(H.max.x,y.x)-H.max.x)/(N.max.x-H.max.x)-(Math.min(H.min.x,y.x)-H.min.x)/(N.min.x-H.min.x),(Math.max(H.max.y,y.y)-H.max.y)/(N.max.y-H.max.y)-(Math.min(H.min.y,y.y)-H.min.y)/(N.min.y-H.min.y)).multiplyBy(d);c.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),gt(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=b(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,d=_n(a._icon),m=a._map.layerPointToLatLng(d);c&&gt(c,d),a._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Wl=Ft.extend({options:{icon:new ra,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){z(this,a),this._latlng=mt(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=mt(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),wt(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(c,"focus",this._panOnFocus,this);var m=r.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(wt(m,a),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),jt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&jt(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&gt(this._icon,r),this._shadow&&gt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(wt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qp)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qp(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&re(this._icon,r),this._shadow&&re(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),d=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:c.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $E(r,a){return new Wl(r,a)}var Hi=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return z(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Gl=Hi.extend({options:{fill:!0,radius:10},initialize:function(r,a){z(this,a),this._latlng=mt(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=mt(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Hi.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),d=[r+c,a+c];this._pxBounds=new dt(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qE(r,a){return new Gl(r,a)}var uh=Gl.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),z(this,a),this._latlng=mt(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new St(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Hi.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===pn.distance){var m=Math.PI/180,y=this._mRadius/pn.R/m,N=c.project([a+y,r]),B=c.project([a-y,r]),H=N.add(B).divideBy(2),q=c.unproject(H).lat,it=Math.acos((Math.cos(y*m)-Math.sin(a*m)*Math.sin(q*m))/(Math.cos(a*m)*Math.cos(q*m)))/m;(isNaN(it)||it===0)&&(it=y/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(it)?0:H.x-c.project([q,r-it]).x,this._radiusY=H.y-N.y}else{var pt=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(pt).x}this._updateBounds()}});function KE(r,a,c){return new uh(r,a,c)}var _i=Hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){z(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,d=wn,m,y,N=0,B=this._parts.length;N<B;N++)for(var H=this._parts[N],q=1,it=H.length;q<it;q++){m=H[q-1],y=H[q];var pt=d(r,m,y,!0);pt<a&&(a=pt,c=d(r,m,y))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=mt(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new St,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),d=0,m=r.length;d<m;d++)c?(a[d]=mt(r[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(r[d]);return a},_project:function(){var r=new dt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new Z(r,r);this._rawPxBounds&&(this._pxBounds=new dt([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var d=r[0]instanceof Tt,m=r.length,y,N;if(d){for(N=[],y=0;y<m;y++)N[y]=this._map.latLngToLayerPoint(r[y]),c.extend(N[y]);a.push(N)}else for(y=0;y<m;y++)this._projectLatlngs(r[y],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,d,m,y,N,B,H;for(c=0,m=0,y=this._rings.length;c<y;c++)for(H=this._rings[c],d=0,N=H.length;d<N-1;d++)B=Dr(H[d],H[d+1],r,d,!0),B&&(a[m]=a[m]||[],a[m].push(B[0]),(B[1]!==H[d+1]||d===N-2)&&(a[m].push(B[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,d=r.length;c<d;c++)r[c]=ea(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,d,m,y,N,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(B=this._parts[c],d=0,N=B.length,m=N-1;d<N;m=d++)if(!(!a&&d===0)&&na(r,B[m],B[d])<=H)return!0;return!1}});function QE(r,a){return new _i(r,a)}_i._flat=p;var Ns=_i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=_i.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof Tt&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){_i.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new Z(a,a);if(r=new dt(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,m=this._rings.length,y;d<m;d++)y=As(this._rings[d],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,d,m,y,N,B,H,q;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,H=this._parts.length;y<H;y++)for(c=this._parts[y],N=0,q=c.length,B=q-1;N<q;B=N++)d=c[N],m=c[B],d.y>r.y!=m.y>r.y&&r.x<(m.x-d.x)*(r.y-d.y)/(m.y-d.y)+d.x&&(a=!a);return a||_i.prototype._containsPoint.call(this,r,!0)}});function JE(r,a){return new Ns(r,a)}var vi=le.extend({initialize:function(r,a){z(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=k(r)?r:r.features,c,d,m;if(a){for(c=0,d=a.length;c<d;c++)m=a[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var N=Zl(r,y);return N?(N.feature=Kl(r),N.defaultOptions=N.options,this.resetStyle(N),y.onEachFeature&&y.onEachFeature(r,N),this.addLayer(N)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Zl(r,a){var c=r.type==="Feature"?r.geometry:r,d=c?c.coordinates:null,m=[],y=a&&a.pointToLayer,N=a&&a.coordsToLatLng||ch,B,H,q,it;if(!d&&!c)return null;switch(c.type){case"Point":return B=N(d),Jp(y,r,B,a);case"MultiPoint":for(q=0,it=d.length;q<it;q++)B=N(d[q]),m.push(Jp(y,r,B,a));return new le(m);case"LineString":case"MultiLineString":return H=$l(d,c.type==="LineString"?0:1,N),new _i(H,a);case"Polygon":case"MultiPolygon":return H=$l(d,c.type==="Polygon"?1:2,N),new Ns(H,a);case"GeometryCollection":for(q=0,it=c.geometries.length;q<it;q++){var pt=Zl({geometry:c.geometries[q],type:"Feature",properties:r.properties},a);pt&&m.push(pt)}return new le(m);case"FeatureCollection":for(q=0,it=c.features.length;q<it;q++){var It=Zl(c.features[q],a);It&&m.push(It)}return new le(m);default:throw new Error("Invalid GeoJSON object.")}}function Jp(r,a,c,d){return r?r(a,c):new Wl(c,d&&d.markersInheritOptions&&d)}function ch(r){return new Tt(r[1],r[0],r[2])}function $l(r,a,c){for(var d=[],m=0,y=r.length,N;m<y;m++)N=a?$l(r[m],a-1,c):(c||ch)(r[m]),d.push(N);return d}function hh(r,a){return r=mt(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function ql(r,a,c,d){for(var m=[],y=0,N=r.length;y<N;y++)m.push(a?ql(r[y],u(r[y])?0:a-1,c,d):hh(r[y],d));return!a&&c&&m.length>0&&m.push(m[0].slice()),m}function ks(r,a){return r.feature?s({},r.feature,{geometry:a}):Kl(a)}function Kl(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var dh={toGeoJSON:function(r){return ks(this,{type:"Point",coordinates:hh(this.getLatLng(),r)})}};Wl.include(dh),uh.include(dh),Gl.include(dh),_i.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=ql(this._latlngs,a?1:0,!1,r);return ks(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),Ns.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),d=ql(this._latlngs,c?2:a?1:0,!0,r);return a||(d=[d]),ks(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),Yt.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),ks(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",d=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(r);if(c)d.push(y.geometry);else{var N=Kl(y);N.type==="FeatureCollection"?d.push.apply(d,N.features):d.push(N)}}}),c?ks(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Yp(r,a){return new vi(r,a)}var YE=Yp,Ql=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=bt(a),z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(wt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){jt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&di(this._image),this},bringToBack:function(){return this._map&&Vi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=bt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Ct("img");if(wt(a,"leaflet-image-layer"),this._zoomAnimated&&wt(a,"leaflet-zoom-animated"),this.options.className&&wt(a,this.options.className),a.onselectstart=E,a.onmousemove=E,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Gn(this._image,c,a)},_reset:function(){var r=this._image,a=new dt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();gt(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){re(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),XE=function(r,a,c){return new Ql(r,a,c)},Xp=Ql.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Ct("video");if(wt(a,"leaflet-image-layer"),this._zoomAnimated&&wt(a,"leaflet-zoom-animated"),this.options.className&&wt(a,this.options.className),a.onselectstart=E,a.onmousemove=E,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),d=[],m=0;m<c.length;m++)d.push(c[m].src);this._url=c.length>0?d:[a.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var N=Ct("source");N.src=this._url[y],a.appendChild(N)}}});function tw(r,a,c){return new Xp(r,a,c)}var tm=Ql.extend({_initImage:function(){var r=this._image=this._url;wt(r,"leaflet-image-layer"),this._zoomAnimated&&wt(r,"leaflet-zoom-animated"),this.options.className&&wt(r,this.options.className),r.onselectstart=E,r.onmousemove=E}});function ew(r,a,c){return new tm(r,a,c)}var qn=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof Tt||k(r))?(this._latlng=mt(r),z(this,a)):(z(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&re(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&re(this._container,1),this.bringToFront(),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(re(this._container,0),this._removeTimeout=setTimeout(l(jt,void 0,this._container),200)):jt(this._container),this.options.interactive&&($t(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=mt(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&di(this._container),this},bringToBack:function(){return this._map&&Vi(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof le){a=null;var c=this._source._layers;for(var d in c)if(c[d]._map){a=c[d];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?gt(this._container,r.add(c)):a=a.add(r).add(c);var d=this._containerBottom=-a.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});At.include({_initOverlay:function(r,a,c,d){var m=a;return m instanceof r||(m=new r(d).setContent(a)),c&&m.setLatLng(c),m}}),Ft.include({_initOverlay:function(r,a,c,d){var m=c;return m instanceof r?(z(m,d),m._source=this):(m=a&&!d?a:new r(d,this),m.setContent(c)),m}});var Jl=qn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,qn.prototype.openOn.call(this,r)},onAdd:function(r){qn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hi||this._source.on("preclick",En))},onRemove:function(r){qn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hi||this._source.off("preclick",En))},getEvents:function(){var r=qn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Ct("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Ct("div",r+"-content-wrapper",a);if(this._contentNode=Ct("div",r+"-content",c),Bi(a),Ui(this._contentNode),ft(a,"contextmenu",En),this._tipContainer=Ct("div",r+"-tip-container",a),this._tip=Ct("div",r+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=Ct("a",r+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',ft(d,"click",function(m){Jt(m),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var d=r.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&d>m?(a.height=m+"px",wt(r,y)):$t(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();gt(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Mi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,d=this._containerWidth,m=new Z(this._containerLeft,-c-this._containerBottom);m._add(_n(this._container));var y=r.layerPointToContainerPoint(m),N=X(this.options.autoPanPadding),B=X(this.options.autoPanPaddingTopLeft||N),H=X(this.options.autoPanPaddingBottomRight||N),q=r.getSize(),it=0,pt=0;y.x+d+H.x>q.x&&(it=y.x+d-q.x+H.x),y.x-it-B.x<0&&(it=y.x-B.x),y.y+c+H.y>q.y&&(pt=y.y+c-q.y+H.y),y.y-pt-B.y<0&&(pt=y.y-B.y),(it||pt)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([it,pt]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),nw=function(r,a){return new Jl(r,a)};At.mergeOptions({closePopupOnClick:!0}),At.include({openPopup:function(r,a,c){return this._initOverlay(Jl,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Ft.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Jl,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof le||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){rn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Yl=qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){qn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){qn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=qn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,d=this._map,m=this._container,y=d.latLngToContainerPoint(d.getCenter()),N=d.layerPointToContainerPoint(r),B=this.options.direction,H=m.offsetWidth,q=m.offsetHeight,it=X(this.options.offset),pt=this._getAnchor();B==="top"?(a=H/2,c=q):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=q/2):B==="right"?(a=0,c=q/2):B==="left"?(a=H,c=q/2):N.x<y.x?(B="right",a=0,c=q/2):(B="left",a=H+(it.x+pt.x)*2,c=q/2),r=r.subtract(X(a,c,!0)).add(it).add(pt),$t(m,"leaflet-tooltip-right"),$t(m,"leaflet-tooltip-left"),$t(m,"leaflet-tooltip-top"),$t(m,"leaflet-tooltip-bottom"),wt(m,"leaflet-tooltip-"+B),gt(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&re(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),iw=function(r,a){return new Yl(r,a)};At.include({openTooltip:function(r,a,c){return this._initOverlay(Yl,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Ft.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Yl,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof le||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ft(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ft(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,d;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),d=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var em=$n.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Or(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=X(c.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function rw(r){return new em(r)}$n.Default=ra;var sa=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:at.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){z(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),jt(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof Z?r:new Z(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),d=0,m=a.length,y;d<m;d++)y=a[d].style.zIndex,a[d]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!at.ielt9){re(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var d in this._tiles){var m=this._tiles[d];if(!(!m.current||!m.loaded)){var y=Math.min(1,(r-m.loaded)/200);re(m.el,y),y<1?a=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(M(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(jt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[r],m=this._map;return d||(d=this._levels[r]={},d.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),d.zoom=r,this._setZoomTransform(d,m.getCenter(),m.getZoom()),E(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)jt(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,d){var m=Math.floor(r/2),y=Math.floor(a/2),N=c-1,B=new Z(+m,+y);B.z=+N;var H=this._tileCoordsToKey(B),q=this._tiles[H];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),N>d?this._retainParent(m,y,N,d):!1)},_retainChildren:function(r,a,c,d){for(var m=2*r;m<2*r+2;m++)for(var y=2*a;y<2*a+2;y++){var N=new Z(m,y);N.z=c+1;var B=this._tileCoordsToKey(N),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<d&&this._retainChildren(m,y,c+1,d)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,d){var m=Math.round(a);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!d||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var d=this._map.getZoomScale(c,r.zoom),m=r.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,c)).round();at.any3d?Gn(r.el,m,d):gt(r.el,m)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],d).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],d).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],d).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(c,this._tileZoom),m=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(d*2);return new dt(m.subtract(y),m.add(y))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(d),y=m.getCenter(),N=[],B=this.options.keepBuffer,H=new dt(m.getBottomLeft().subtract([B,-B]),m.getTopRight().add([B,-B]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var it=this._tiles[q].coords;(it.z!==this._tileZoom||!H.contains(new Z(it.x,it.y)))&&(this._tiles[q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var pt=m.min.y;pt<=m.max.y;pt++)for(var It=m.min.x;It<=m.max.x;It++){var He=new Z(It,pt);if(He.z=this._tileZoom,!!this._isValidTile(He)){var Te=this._tiles[this._tileCoordsToKey(He)];Te?Te.current=!0:N.push(He)}}if(N.sort(function(Ke,bs){return Ke.distanceTo(y)-bs.distanceTo(y)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Tn=document.createDocumentFragment();for(It=0;It<N.length;It++)this._addTile(N[It],Tn);this._level.el.appendChild(Tn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(r);return bt(this.options.bounds).overlaps(d)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),d=r.scaleBy(c),m=d.add(c),y=a.unproject(d,r.z),N=a.unproject(m,r.z);return[y,N]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new St(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new Z(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(jt(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){wt(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=E,r.onmousemove=E,at.ielt9&&this.options.opacity<1&&re(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),d=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&b(l(this._tileReady,this,r,null,m)),gt(m,c),this._tiles[d]={el:m,coords:r,current:!0},a.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var d=this._tileCoordsToKey(r);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(re(c.el,0),M(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(wt(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),at.ielt9||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new Z(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new dt(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function sw(r){return new sa(r)}var Os=sa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=z(this,a),a.detectRetina&&at.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ft(c,"load",l(this._tileOnLoad,this,a,c)),ft(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:at.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return I(this._url,s(a,this.options))},_tileOnLoad:function(r,a){at.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(r=a-r),r+d},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=E,a.onerror=E,!a.complete)){a.src=J;var c=this._tiles[r].coords;jt(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",J),sa.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===J))return sa.prototype._tileReady.call(this,r,a,c)}});function nm(r,a){return new Os(r,a)}var im=Os.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var d in a)d in this.options||(c[d]=a[d]);a=z(this,a);var m=a.detectRetina&&at.retina?2:1,y=this.getTileSize();c.width=y.x*m,c.height=y.y*m,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Os.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,d=vt(c.project(a[0]),c.project(a[1])),m=d.min,y=d.max,N=(this._wmsVersion>=1.3&&this._crs===he?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),B=Os.prototype.getTileUrl.call(this,r);return B+j(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function ow(r,a){return new im(r,a)}Os.WMS=im,nm.wms=ow;var yi=Ft.extend({options:{padding:.1},initialize:function(r){z(this,r),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),wt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,a),y=d.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(r,a));at.any3d?Gn(this._container,y,c):gt(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new dt(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rm=yi.extend({options:{tolerance:0},getEvents:function(){var r=yi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){yi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ft(r,"mousemove",this._onMouseMove,this),ft(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ft(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,jt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),d=at.retina?2:1;gt(a,r.min),a.width=d*c.x,a.height=d*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",at.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){yi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[f(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,d=a.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete r._order,delete this._layers[f(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],d,m;for(m=0;m<a.length;m++){if(d=Number(a[m]),isNaN(d))return;c.push(d)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new dt,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)r=d.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,d,m,y,N=r._parts,B=N.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(d=0,m=N[c].length;d<m;d++)y=N[c][d],H[d?"lineTo":"moveTo"](y.x,y.y);a&&H.closePath()}this._fillStroke(H,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,d=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||d)/d;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(a.x,a.y/m,d,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,d,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(d=c);this._fireEvent(d?[d]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&($t(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,d,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(a)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(r),d&&(wt(this._container,"leaflet-interactive"),this._fireEvent([d],r,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,d=a.prev;if(c)c.prev=d;else return;d?d.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,d=a.prev;if(d)d.next=c;else return;c?c.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function sm(r){return at.canvas?new rm(r):null}var oa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),aw={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(yi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=oa("shape");wt(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=oa("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;jt(a),r.removeInteractiveTarget(a),delete this._layers[f(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,d=r.options,m=r._container;m.stroked=!!d.stroke,m.filled=!!d.fill,d.stroke?(a||(a=r._stroke=oa("stroke")),m.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=k(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(m.removeChild(a),r._stroke=null),d.fill?(c||(c=r._fill=oa("fill")),m.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(m.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),d=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+d+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){di(r._container)},_bringToBack:function(r){Vi(r._container)}},Xl=at.vml?oa:si,aa=yi.extend({_initContainer:function(){this._container=Xl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Xl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){jt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){yi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),gt(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Xl("path");r.options.className&&wt(a,r.options.className),r.options.interactive&&wt(a,"leaflet-interactive"),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){jt(r._path),r.removeInteractiveTarget(r._path),delete this._layers[f(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,wr(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),d=Math.max(Math.round(r._radiusY),1)||c,m="a"+c+","+d+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){di(r._path)},_bringToBack:function(r){Vi(r._path)}});at.vml&&aa.include(aw);function om(r){return at.svg||at.vml?new aa(r):null}At.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&sm(r)||om(r)}});var am=Ns.extend({initialize:function(r,a){Ns.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=bt(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function lw(r,a){return new am(r,a)}aa.create=Xl,aa.pointsToPath=wr,vi.geometryToLayer=Zl,vi.coordsToLatLng=ch,vi.coordsToLatLngs=$l,vi.latLngToCoords=hh,vi.latLngsToCoords=ql,vi.getFeature=ks,vi.asFeature=Kl,At.mergeOptions({boxZoom:!0});var lm=sn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){jt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bn(),Wo(),this._startPoint=this._map.mouseEventToContainerPoint(r),ft(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),wt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new dt(this._point,this._startPoint),c=a.getSize();gt(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(jt(this._box),$t(this._container,"leaflet-crosshair")),Dn(),Go(),Bt(document,{contextmenu:rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new St(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});At.addInitHook("addHandler","boxZoom",lm),At.mergeOptions({doubleClickZoom:!0});var um=sn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),d=a.options.zoomDelta,m=r.originalEvent.shiftKey?c-d:c+d;a.options.doubleClickZoom==="center"?a.setZoom(m):a.setZoomAround(r.containerPoint,m)}});At.addInitHook("addHandler","doubleClickZoom",um),At.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cm=sn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Mn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}wt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$t(this._map._container,"leaflet-grab"),$t(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=bt(this._map.options.maxBounds);this._offsetLimit=vt(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,m=(d-a+c)%r+a-c,y=(d+a+c)%r-a-c,N=Math.abs(m+c)<Math.abs(y+c)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(r){var a=this._map,c=a.options,d=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),d)a.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,N=c.easeLinearity,B=m.multiplyBy(N/y),H=B.distanceTo([0,0]),q=Math.min(c.inertiaMaxSpeed,H),it=B.multiplyBy(q/H),pt=q/(c.inertiaDeceleration*N),It=it.multiplyBy(-pt/2).round();!It.x&&!It.y?a.fire("moveend"):(It=a._limitOffset(It,a.options.maxBounds),b(function(){a.panBy(It,{duration:pt,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});At.addInitHook("addHandler","dragging",cm),At.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hm=sn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ft(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,d=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,d,m;for(d=0,m=c.left.length;d<m;d++)a[c.left[d]]=[-1*r,0];for(d=0,m=c.right.length;d<m;d++)a[c.right[d]]=[r,0];for(d=0,m=c.down.length;d<m;d++)a[c.down[d]]=[0,r];for(d=0,m=c.up.length;d<m;d++)a[c.up[d]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,d,m;for(d=0,m=c.zoomIn.length;d<m;d++)a[c.zoomIn[d]]=r;for(d=0,m=c.zoomOut.length;d<m;d++)a[c.zoomOut[d]]=-r},_addHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,d;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(d=this._panKeys[a],r.shiftKey&&(d=X(d).multiplyBy(3)),c.options.maxBounds&&(d=c._limitOffset(X(d),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(d)));c.panTo(m)}else c.panBy(d)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;rn(r)}}});At.addInitHook("addHandler","keyboard",hm),At.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dm=sn.extend({addHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Vl(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),d),rn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,y=c?Math.ceil(m/c)*c:m,N=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,N&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+N):r.setZoomAround(this._lastMousePos,a+N))}});At.addInitHook("addHandler","scrollWheelZoom",dm);var uw=600;At.mergeOptions({tapHold:at.touchNative&&at.safari&&at.mobile,tapTolerance:15});var fm=sn.extend({addHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new Z(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ft(document,"touchend",Jt),ft(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),uw),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Bt(document,"touchend",Jt),Bt(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new Z(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});At.addInitHook("addHandler","tapHold",fm),At.mergeOptions({touchZoom:at.touch,bounceAtZoomLimits:!0});var pm=sn.extend({addHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$t(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),d=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),Jt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),d=a.mouseEventToContainerPoint(r.touches[1]),m=c.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(m,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&m<1||this._zoom>a.getMaxZoom()&&m>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var N=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=b(N,this,!0),Jt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});At.addInitHook("addHandler","touchZoom",pm),At.BoxZoom=lm,At.DoubleClickZoom=um,At.Drag=cm,At.Keyboard=hm,At.ScrollWheelZoom=dm,At.TapHold=fm,At.TouchZoom=pm,n.Bounds=dt,n.Browser=at,n.CRS=ie,n.Canvas=rm,n.Circle=uh,n.CircleMarker=Gl,n.Class=Wt,n.Control=qe,n.DivIcon=em,n.DivOverlay=qn,n.DomEvent=zl,n.DomUtil=Dl,n.Draggable=Mn,n.Evented=Ee,n.FeatureGroup=le,n.GeoJSON=vi,n.GridLayer=sa,n.Handler=sn,n.Icon=$n,n.ImageOverlay=Ql,n.LatLng=Tt,n.LatLngBounds=St,n.Layer=Ft,n.LayerGroup=Yt,n.LineUtil=w,n.Map=At,n.Marker=Wl,n.Mixin=br,n.Path=Hi,n.Point=Z,n.PolyUtil=Ps,n.Polygon=Ns,n.Polyline=_i,n.Popup=Jl,n.PosAnimation=Yo,n.Projection=et,n.Rectangle=am,n.Renderer=yi,n.SVG=aa,n.SVGOverlay=tm,n.TileLayer=Os,n.Tooltip=Yl,n.Transformation=be,n.Util=R,n.VideoOverlay=Xp,n.bind=l,n.bounds=vt,n.canvas=sm,n.circle=KE,n.circleMarker=qE,n.control=je,n.divIcon=rw,n.extend=s,n.featureGroup=Ls,n.geoJSON=Yp,n.geoJson=YE,n.gridLayer=sw,n.icon=ZE,n.imageOverlay=XE,n.latLng=mt,n.latLngBounds=bt,n.layerGroup=ji,n.map=Ts,n.marker=$E,n.point=X,n.polygon=JE,n.polyline=QE,n.popup=nw,n.rectangle=lw,n.setOptions=z,n.stamp=f,n.svg=om,n.svgOverlay=ew,n.tileLayer=nm,n.tooltip=iw,n.transformation=Nn,n.version=i,n.videoOverlay=tw;var cw=window.L;n.noConflict=function(){return window.L=cw,this},window.L=n})})(Qd,Qd.exports);var gl=Qd.exports;function Hc(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function gp(e,t){return t==null?function(i,s){const o=$.useRef();return o.current||(o.current=e(i,s)),o}:function(i,s){const o=$.useRef();o.current||(o.current=e(i,s));const l=$.useRef(i),{instance:h}=o.current;return $.useEffect(function(){l.current!==i&&(t(h,i,l.current),l.current=i)},[h,i,s]),o}}function u0(e,t){$.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var o;(o=t.layerContainer)==null||o.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function YI(e){return function(n){const i=Fc(),s=e(jc(n,i),i);return s0(i.map,n.attribution),mp(s.current,n.eventHandlers),u0(s.current,i),s}}function XI(e,t){const n=$.useRef();$.useEffect(function(){if(t.pathOptions!==n.current){const s=t.pathOptions??{};e.instance.setStyle(s),n.current=s}},[e,t])}function tA(e){return function(n){const i=Fc(),s=e(jc(n,i),i);return mp(s.current,n.eventHandlers),u0(s.current,i),XI(s.current,n),s}}function eA(e,t){const n=gp(e),i=JI(n,t);return KI(i)}function c0(e,t){const n=gp(e,t),i=tA(n);return qI(i)}function nA(e,t){const n=gp(e,t),i=YI(n);return QI(i)}function iA(e,t,n){const{opacity:i,zIndex:s}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),s!=null&&s!==n.zIndex&&e.setZIndex(s)}function rA(){return Fc().map}const sA=c0(function({center:t,children:n,...i},s){const o=new gl.CircleMarker(t,i);return Hc(o,o0(s,{overlayContainer:o}))},GI),oA=c0(function({data:t,...n},i){const s=new gl.GeoJSON(t,n);return Hc(s,o0(i,{overlayContainer:s}))},function(t,n,i){n.style!==i.style&&(n.style==null?t.resetStyle():t.setStyle(n.style))});function Jd(){return Jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jd.apply(this,arguments)}function aA({bounds:e,boundsOptions:t,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:f,zoom:g,...v},E){const[T]=$.useState({className:s,id:o,style:h}),[O,V]=$.useState(null);$.useImperativeHandle(E,()=>(O==null?void 0:O.map)??null,[O]);const z=$.useCallback(x=>{if(x!==null&&O===null){const I=new gl.Map(x,v);n!=null&&g!=null?I.setView(n,g):e!=null&&I.fitBounds(e,t),f!=null&&I.whenReady(f),V($I(I))}},[]);$.useEffect(()=>()=>{O==null||O.map.remove()},[O]);const j=O?$r.createElement(l0,{value:O},i):l??null;return $r.createElement("div",Jd({},T,{ref:z}),j)}const lA=$.forwardRef(aA),uA=nA(function({url:t,...n},i){const s=new gl.TileLayer(t,jc(n,i));return Hc(s,i)},function(t,n,i){iA(t,n,i);const{url:s}=n;s!=null&&s!==i.url&&t.setUrl(s)}),Mg=eA(function(t,n){const i=new gl.Tooltip(t,n.overlayContainer);return Hc(i,n)},function(t,n,{position:i},s){$.useEffect(function(){const l=n.overlayContainer;if(l==null)return;const{instance:h}=t,f=v=>{v.tooltip===h&&(i!=null&&h.setLatLng(i),h.update(),s(!0))},g=v=>{v.tooltip===h&&s(!1)};return l.on({tooltipopen:f,tooltipclose:g}),l.bindTooltip(h),function(){l.off({tooltipopen:f,tooltipclose:g}),l._map!=null&&l.unbindTooltip()}},[t,n,s,i])});var Vg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},cA=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=e[n++];t[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=e[n++],l=e[n++],h=e[n++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=e[n++],l=e[n++];t[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return t.join("")},d0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const o=e[s],l=s+1<e.length,h=l?e[s+1]:0,f=s+2<e.length,g=f?e[s+2]:0,v=o>>2,E=(o&3)<<4|h>>4;let T=(h&15)<<2|g>>6,O=g&63;f||(O=64,l||(T=64)),i.push(n[v],n[E],n[T],n[O])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h0(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):cA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const o=n[e.charAt(s++)],h=s<e.length?n[e.charAt(s)]:0;++s;const g=s<e.length?n[e.charAt(s)]:64;++s;const E=s<e.length?n[e.charAt(s)]:64;if(++s,o==null||h==null||g==null||E==null)throw new hA;const T=o<<2|h>>4;if(i.push(T),g!==64){const O=h<<4&240|g>>2;if(i.push(O),E!==64){const V=g<<6&192|E;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dA=function(e){const t=h0(e);return d0.encodeByteArray(t,!0)},uc=function(e){return dA(e).replace(/\./g,"")},fA=function(e){try{return d0.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=()=>pA().__FIREBASE_DEFAULTS__,gA=()=>{if(typeof process>"u"||typeof Vg>"u")return;const e=Vg.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_A=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&fA(e[1]);return t&&JSON.parse(t)},_p=()=>{try{return mA()||gA()||_A()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vA=e=>{var t,n;return(n=(t=_p())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yA=e=>{const t=vA(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},f0=()=>{var e;return(e=_p())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[uc(JSON.stringify(n)),uc(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SA(){var e;const t=(e=_p())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IA(){return!SA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;t(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="FirebaseError";class xo extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=CA,Object.setPrototypeOf(this,xo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p0.prototype.create)}}class p0{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},s=`${this.service}/${t}`,o=this.errors[t],l=o?PA(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new xo(s,h,i)}}function PA(e,t){return e.replace(RA,(n,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const RA=/\{\$([^}]+)}/g;function Yd(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const o=e[s],l=t[s];if(zg(o)&&zg(l)){if(!Yd(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function zg(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(e){return e&&e._delegate?e._delegate:e}class il{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new EA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kA(t))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(t=zr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zr){return this.instances.has(t)}getOptions(t=zr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(t,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(t),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&t(l,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NA(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=zr){return this.component?this.component.multipleInstances?t:zr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NA(e){return e===zr?void 0:e}function kA(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new LA(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(kt||(kt={}));const bA={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},DA=kt.INFO,MA={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},VA=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),s=MA[t];if(s)console[s](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class m0{constructor(t){this.name=t,this._logLevel=DA,this._logHandler=VA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?bA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const zA=(e,t)=>t.some(n=>e instanceof n);let Ug,Bg;function UA(){return Ug||(Ug=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BA(){return Bg||(Bg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,Xd=new WeakMap,_0=new WeakMap,Fh=new WeakMap,vp=new WeakMap;function FA(e){const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("success",o),e.removeEventListener("error",l)},o=()=>{n(ar(e.result)),s()},l=()=>{i(e.error),s()};e.addEventListener("success",o),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&g0.set(n,e)}).catch(()=>{}),vp.set(t,e),t}function jA(e){if(Xd.has(e))return;const t=new Promise((n,i)=>{const s=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",l),e.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",o),e.addEventListener("error",l),e.addEventListener("abort",l)});Xd.set(e,t)}let tf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Xd.get(e);if(t==="objectStoreNames")return e.objectStoreNames||_0.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function HA(e){tf=e(tf)}function WA(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(jh(this),t,...n);return _0.set(i,t.sort?t.sort():[t]),ar(i)}:BA().includes(e)?function(...t){return e.apply(jh(this),t),ar(g0.get(this))}:function(...t){return ar(e.apply(jh(this),t))}}function GA(e){return typeof e=="function"?WA(e):(e instanceof IDBTransaction&&jA(e),zA(e,UA())?new Proxy(e,tf):e)}function ar(e){if(e instanceof IDBRequest)return FA(e);if(Fh.has(e))return Fh.get(e);const t=GA(e);return t!==e&&(Fh.set(e,t),vp.set(t,e)),t}const jh=e=>vp.get(e);function ZA(e,t,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(e,t),h=ar(l);return i&&l.addEventListener("upgradeneeded",f=>{i(ar(l.result),f.oldVersion,f.newVersion,ar(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const $A=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],Hh=new Map;function Fg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Hh.get(t))return Hh.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=qA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||$A.includes(n)))return;const o=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let g=f.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),s&&f.done]))[0]};return Hh.set(t,o),o}HA(e=>({...e,get:(t,n,i)=>Fg(t,n)||e.get(t,n,i),has:(t,n)=>!!Fg(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function QA(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ef="@firebase/app",jg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new m0("@firebase/app"),JA="@firebase/app-compat",YA="@firebase/analytics-compat",XA="@firebase/analytics",t1="@firebase/app-check-compat",e1="@firebase/app-check",n1="@firebase/auth",i1="@firebase/auth-compat",r1="@firebase/database",s1="@firebase/data-connect",o1="@firebase/database-compat",a1="@firebase/functions",l1="@firebase/functions-compat",u1="@firebase/installations",c1="@firebase/installations-compat",h1="@firebase/messaging",d1="@firebase/messaging-compat",f1="@firebase/performance",p1="@firebase/performance-compat",m1="@firebase/remote-config",g1="@firebase/remote-config-compat",_1="@firebase/storage",v1="@firebase/storage-compat",y1="@firebase/firestore",E1="@firebase/vertexai-preview",w1="@firebase/firestore-compat",T1="firebase",S1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="[DEFAULT]",I1={[ef]:"fire-core",[JA]:"fire-core-compat",[XA]:"fire-analytics",[YA]:"fire-analytics-compat",[e1]:"fire-app-check",[t1]:"fire-app-check-compat",[n1]:"fire-auth",[i1]:"fire-auth-compat",[r1]:"fire-rtdb",[s1]:"fire-data-connect",[o1]:"fire-rtdb-compat",[a1]:"fire-fn",[l1]:"fire-fn-compat",[u1]:"fire-iid",[c1]:"fire-iid-compat",[h1]:"fire-fcm",[d1]:"fire-fcm-compat",[f1]:"fire-perf",[p1]:"fire-perf-compat",[m1]:"fire-rc",[g1]:"fire-rc-compat",[_1]:"fire-gcs",[v1]:"fire-gcs-compat",[y1]:"fire-fst",[w1]:"fire-fst-compat",[E1]:"fire-vertex","fire-js":"fire-js",[T1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,A1=new Map,rf=new Map;function Hg(e,t){try{e.container.addComponent(t)}catch(n){Ni.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function hc(e){const t=e.name;if(rf.has(t))return Ni.debug(`There were multiple attempts to register component ${t}.`),!1;rf.set(t,e);for(const n of cc.values())Hg(n,e);for(const n of A1.values())Hg(n,e);return!0}function x1(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new p0("app","Firebase",C1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=S1;function v0(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:nf,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw lr.create("bad-app-name",{appName:String(s)});if(n||(n=f0()),!n)throw lr.create("no-options");const o=cc.get(s);if(o){if(Yd(n,o.options)&&Yd(i,o.config))return o;throw lr.create("duplicate-app",{appName:s})}const l=new OA(s);for(const f of rf.values())l.addComponent(f);const h=new P1(n,i,l);return cc.set(s,h),h}function L1(e=nf){const t=cc.get(e);if(!t&&e===nf&&f0())return v0();if(!t)throw lr.create("no-app",{appName:e});return t}function so(e,t,n){var i;let s=(i=I1[e])!==null&&i!==void 0?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=t.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${t}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ni.warn(h.join(" "));return}hc(new il(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="firebase-heartbeat-database",k1=1,rl="firebase-heartbeat-store";let Wh=null;function y0(){return Wh||(Wh=ZA(N1,k1,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(rl)}catch(n){console.warn(n)}}}}).catch(e=>{throw lr.create("idb-open",{originalErrorMessage:e.message})})),Wh}async function O1(e){try{const n=(await y0()).transaction(rl),i=await n.objectStore(rl).get(E0(e));return await n.done,i}catch(t){if(t instanceof xo)Ni.warn(t.message);else{const n=lr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ni.warn(n.message)}}}async function Wg(e,t){try{const i=(await y0()).transaction(rl,"readwrite");await i.objectStore(rl).put(t,E0(e)),await i.done}catch(n){if(n instanceof xo)Ni.warn(n.message);else{const i=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(i.message)}}}function E0(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=1024,D1=30*24*60*60*1e3;class M1{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Gg();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=D1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ni.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gg(),{heartbeatsToSend:i,unsentEntries:s}=V1(this._heartbeatsCache.heartbeats),o=uc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ni.warn(n),""}}}function Gg(){return new Date().toISOString().substring(0,10)}function V1(e,t=b1){const n=[];let i=e.slice();for(const s of e){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Zg(n)>t){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zg(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class z1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await O1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wg(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Wg(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Zg(e){return uc(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(e){hc(new il("platform-logger",t=>new KA(t),"PRIVATE")),hc(new il("heartbeat",t=>new M1(t),"PRIVATE")),so(ef,jg,e),so(ef,jg,"esm2017"),so("fire-js","")}U1("");var B1="firebase",F1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so(B1,F1,"app");var $g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,w0;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,S){function A(){}A.prototype=S.prototype,C.D=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.C=function(P,b,M){for(var R=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)R[Wt-2]=arguments[Wt];return S.prototype[b].apply(P,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,A){A||(A=0);var P=Array(16);if(typeof S=="string")for(var b=0;16>b;++b)P[b]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(b=0;16>b;++b)P[b]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],b=C.g[2];var M=C.g[3],R=S+(M^A&(b^M))+P[0]+3614090360&4294967295;S=A+(R<<7&4294967295|R>>>25),R=M+(b^S&(A^b))+P[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(A^M&(S^A))+P[2]+606105819&4294967295,b=M+(R<<17&4294967295|R>>>15),R=A+(S^b&(M^S))+P[3]+3250441966&4294967295,A=b+(R<<22&4294967295|R>>>10),R=S+(M^A&(b^M))+P[4]+4118548399&4294967295,S=A+(R<<7&4294967295|R>>>25),R=M+(b^S&(A^b))+P[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(A^M&(S^A))+P[6]+2821735955&4294967295,b=M+(R<<17&4294967295|R>>>15),R=A+(S^b&(M^S))+P[7]+4249261313&4294967295,A=b+(R<<22&4294967295|R>>>10),R=S+(M^A&(b^M))+P[8]+1770035416&4294967295,S=A+(R<<7&4294967295|R>>>25),R=M+(b^S&(A^b))+P[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(A^M&(S^A))+P[10]+4294925233&4294967295,b=M+(R<<17&4294967295|R>>>15),R=A+(S^b&(M^S))+P[11]+2304563134&4294967295,A=b+(R<<22&4294967295|R>>>10),R=S+(M^A&(b^M))+P[12]+1804603682&4294967295,S=A+(R<<7&4294967295|R>>>25),R=M+(b^S&(A^b))+P[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=b+(A^M&(S^A))+P[14]+2792965006&4294967295,b=M+(R<<17&4294967295|R>>>15),R=A+(S^b&(M^S))+P[15]+1236535329&4294967295,A=b+(R<<22&4294967295|R>>>10),R=S+(b^M&(A^b))+P[1]+4129170786&4294967295,S=A+(R<<5&4294967295|R>>>27),R=M+(A^b&(S^A))+P[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^A&(M^S))+P[11]+643717713&4294967295,b=M+(R<<14&4294967295|R>>>18),R=A+(M^S&(b^M))+P[0]+3921069994&4294967295,A=b+(R<<20&4294967295|R>>>12),R=S+(b^M&(A^b))+P[5]+3593408605&4294967295,S=A+(R<<5&4294967295|R>>>27),R=M+(A^b&(S^A))+P[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^A&(M^S))+P[15]+3634488961&4294967295,b=M+(R<<14&4294967295|R>>>18),R=A+(M^S&(b^M))+P[4]+3889429448&4294967295,A=b+(R<<20&4294967295|R>>>12),R=S+(b^M&(A^b))+P[9]+568446438&4294967295,S=A+(R<<5&4294967295|R>>>27),R=M+(A^b&(S^A))+P[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^A&(M^S))+P[3]+4107603335&4294967295,b=M+(R<<14&4294967295|R>>>18),R=A+(M^S&(b^M))+P[8]+1163531501&4294967295,A=b+(R<<20&4294967295|R>>>12),R=S+(b^M&(A^b))+P[13]+2850285829&4294967295,S=A+(R<<5&4294967295|R>>>27),R=M+(A^b&(S^A))+P[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=b+(S^A&(M^S))+P[7]+1735328473&4294967295,b=M+(R<<14&4294967295|R>>>18),R=A+(M^S&(b^M))+P[12]+2368359562&4294967295,A=b+(R<<20&4294967295|R>>>12),R=S+(A^b^M)+P[5]+4294588738&4294967295,S=A+(R<<4&4294967295|R>>>28),R=M+(S^A^b)+P[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^A)+P[11]+1839030562&4294967295,b=M+(R<<16&4294967295|R>>>16),R=A+(b^M^S)+P[14]+4259657740&4294967295,A=b+(R<<23&4294967295|R>>>9),R=S+(A^b^M)+P[1]+2763975236&4294967295,S=A+(R<<4&4294967295|R>>>28),R=M+(S^A^b)+P[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^A)+P[7]+4139469664&4294967295,b=M+(R<<16&4294967295|R>>>16),R=A+(b^M^S)+P[10]+3200236656&4294967295,A=b+(R<<23&4294967295|R>>>9),R=S+(A^b^M)+P[13]+681279174&4294967295,S=A+(R<<4&4294967295|R>>>28),R=M+(S^A^b)+P[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^A)+P[3]+3572445317&4294967295,b=M+(R<<16&4294967295|R>>>16),R=A+(b^M^S)+P[6]+76029189&4294967295,A=b+(R<<23&4294967295|R>>>9),R=S+(A^b^M)+P[9]+3654602809&4294967295,S=A+(R<<4&4294967295|R>>>28),R=M+(S^A^b)+P[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=b+(M^S^A)+P[15]+530742520&4294967295,b=M+(R<<16&4294967295|R>>>16),R=A+(b^M^S)+P[2]+3299628645&4294967295,A=b+(R<<23&4294967295|R>>>9),R=S+(b^(A|~M))+P[0]+4096336452&4294967295,S=A+(R<<6&4294967295|R>>>26),R=M+(A^(S|~b))+P[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~A))+P[14]+2878612391&4294967295,b=M+(R<<15&4294967295|R>>>17),R=A+(M^(b|~S))+P[5]+4237533241&4294967295,A=b+(R<<21&4294967295|R>>>11),R=S+(b^(A|~M))+P[12]+1700485571&4294967295,S=A+(R<<6&4294967295|R>>>26),R=M+(A^(S|~b))+P[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~A))+P[10]+4293915773&4294967295,b=M+(R<<15&4294967295|R>>>17),R=A+(M^(b|~S))+P[1]+2240044497&4294967295,A=b+(R<<21&4294967295|R>>>11),R=S+(b^(A|~M))+P[8]+1873313359&4294967295,S=A+(R<<6&4294967295|R>>>26),R=M+(A^(S|~b))+P[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~A))+P[6]+2734768916&4294967295,b=M+(R<<15&4294967295|R>>>17),R=A+(M^(b|~S))+P[13]+1309151649&4294967295,A=b+(R<<21&4294967295|R>>>11),R=S+(b^(A|~M))+P[4]+4149444226&4294967295,S=A+(R<<6&4294967295|R>>>26),R=M+(A^(S|~b))+P[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=b+(S^(M|~A))+P[2]+718787259&4294967295,b=M+(R<<15&4294967295|R>>>17),R=A+(M^(b|~S))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+M&4294967295}i.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var A=S-this.blockSize,P=this.B,b=this.h,M=0;M<S;){if(b==0)for(;M<=A;)s(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<S;)if(P[b++]=C.charCodeAt(M++),b==this.blockSize){s(this,P),b=0;break}}else for(;M<S;)if(P[b++]=C[M++],b==this.blockSize){s(this,P),b=0;break}}this.h=b,this.o+=S},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var A=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=A&255,A/=256;for(this.u(C),C=Array(16),S=A=0;4>S;++S)for(var P=0;32>P;P+=8)C[A++]=this.g[S]>>>P&255;return C};function o(C,S){var A=h;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function l(C,S){this.h=S;for(var A=[],P=!0,b=C.length-1;0<=b;b--){var M=C[b]|0;P&&M==S||(A[b]=M,P=!1)}this.g=A}var h={};function f(C){return-128<=C&&128>C?o(C,function(S){return new l([S|0],0>S?-1:0)}):new l([C|0],0>C?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return E;if(0>C)return j(g(-C));for(var S=[],A=1,P=0;C>=A;P++)S[P]=C/A|0,A*=4294967296;return new l(S,0)}function v(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return j(v(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=g(Math.pow(S,8)),P=E,b=0;b<C.length;b+=8){var M=Math.min(8,C.length-b),R=parseInt(C.substring(b,b+M),S);8>M?(M=g(Math.pow(S,M)),P=P.j(M).add(g(R))):(P=P.j(A),P=P.add(g(R)))}return P}var E=f(0),T=f(1),O=f(16777216);e=l.prototype,e.m=function(){if(z(this))return-j(this).m();for(var C=0,S=1,A=0;A<this.g.length;A++){var P=this.i(A);C+=(0<=P?P:4294967296+P)*S,S*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V(this))return"0";if(z(this))return"-"+j(this).toString(C);for(var S=g(Math.pow(C,6)),A=this,P="";;){var b=G(A,S).g;A=x(A,b.j(S));var M=((0<A.g.length?A.g[0]:A.h)>>>0).toString(C);if(A=b,V(A))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function V(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function z(C){return C.h==-1}e.l=function(C){return C=x(this,C),z(C)?-1:V(C)?0:1};function j(C){for(var S=C.g.length,A=[],P=0;P<S;P++)A[P]=~C.g[P];return new l(A,~C.h).add(T)}e.abs=function(){return z(this)?j(this):this},e.add=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0,b=0;b<=S;b++){var M=P+(this.i(b)&65535)+(C.i(b)&65535),R=(M>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);P=R>>>16,M&=65535,R&=65535,A[b]=R<<16|M}return new l(A,A[A.length-1]&-2147483648?-1:0)};function x(C,S){return C.add(j(S))}e.j=function(C){if(V(this)||V(C))return E;if(z(this))return z(C)?j(this).j(j(C)):j(j(this).j(C));if(z(C))return j(this.j(j(C)));if(0>this.l(O)&&0>C.l(O))return g(this.m()*C.m());for(var S=this.g.length+C.g.length,A=[],P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var b=0;b<C.g.length;b++){var M=this.i(P)>>>16,R=this.i(P)&65535,Wt=C.i(b)>>>16,Ln=C.i(b)&65535;A[2*P+2*b]+=R*Ln,I(A,2*P+2*b),A[2*P+2*b+1]+=M*Ln,I(A,2*P+2*b+1),A[2*P+2*b+1]+=R*Wt,I(A,2*P+2*b+1),A[2*P+2*b+2]+=M*Wt,I(A,2*P+2*b+2)}for(P=0;P<S;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=S;P<2*S;P++)A[P]=0;return new l(A,0)};function I(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function k(C,S){this.g=C,this.h=S}function G(C,S){if(V(S))throw Error("division by zero");if(V(C))return new k(E,E);if(z(C))return S=G(j(C),S),new k(j(S.g),j(S.h));if(z(S))return S=G(C,j(S)),new k(j(S.g),S.h);if(30<C.g.length){if(z(C)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var A=T,P=S;0>=P.l(C);)A=J(A),P=J(P);var b=tt(A,1),M=tt(P,1);for(P=tt(P,2),A=tt(A,2);!V(P);){var R=M.add(P);0>=R.l(C)&&(b=b.add(A),M=R),P=tt(P,1),A=tt(A,1)}return S=x(C,b.j(S)),new k(b,S)}for(b=E;0<=C.l(S);){for(A=Math.max(1,Math.floor(C.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=g(A),R=M.j(S);z(R)||0<R.l(C);)A-=P,M=g(A),R=M.j(S);V(M)&&(M=T),b=b.add(M),C=x(C,R)}return new k(b,C)}e.A=function(C){return G(this,C).h},e.and=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)&C.i(P);return new l(A,this.h&C.h)},e.or=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)|C.i(P);return new l(A,this.h|C.h)},e.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)^C.i(P);return new l(A,this.h^C.h)};function J(C){for(var S=C.g.length+1,A=[],P=0;P<S;P++)A[P]=C.i(P)<<1|C.i(P-1)>>>31;return new l(A,C.h)}function tt(C,S){var A=S>>5;S%=32;for(var P=C.g.length-A,b=[],M=0;M<P;M++)b[M]=0<S?C.i(M+A)>>>S|C.i(M+A+1)<<32-S:C.i(M+A);return new l(b,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,w0=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=g,l.fromString=v,Zr=l}).apply(typeof $g<"u"?$g:typeof self<"u"?self:typeof window<"u"?window:{});var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T0,wa,S0,bu,sf,I0,A0,x0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof vu=="object"&&vu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)t:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var U=u[w];if(!(U in _))break t;_=_[U]}u=u[u.length-1],w=_[u],p=p(w),p!=w&&p!=null&&t(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,w=!1,U={next:function(){if(!w&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function g(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function E(u,p,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,w),u.apply(p,U)}}return function(){return u.apply(p,arguments)}}function T(u,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,T.apply(null,arguments)}function O(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function V(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,U,W){for(var et=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)et[Vt-2]=arguments[Vt];return p.prototype[U].apply(w,et)}}function z(u){const p=u.length;if(0<p){const _=Array(p);for(let w=0;w<p;w++)_[w]=u[w];return _}return[]}function j(u,p){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(f(w)){const U=u.length||0,W=w.length||0;u.length=U+W;for(let et=0;et<W;et++)u[U+et]=w[et]}else u.push(w)}}class x{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function I(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var J=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function tt(u,p,_){for(const w in u)p.call(_,u[w],w,u)}function C(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function S(u){const p={};for(const _ in u)p[_]=u[_];return p}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let _,w;for(let U=1;U<arguments.length;U++){w=arguments[U];for(_ in w)u[_]=w[_];for(let W=0;W<A.length;W++)_=A[W],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function b(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function M(u){h.setTimeout(()=>{throw u},0)}function R(){var u=lt;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Wt{constructor(){this.h=this.g=null}add(p,_){const w=Ln.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Ln=new x(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,Z=!1,lt=new Wt,X=()=>{const u=h.Promise.resolve(void 0);Ee=()=>{u.then(dt)}};var dt=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){M(_)}var p=Ln;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Z=!1};function vt(){this.s=this.s,this.C=this.C}vt.prototype.s=!1,vt.prototype.ma=function(){this.s||(this.s=!0,this.N())},vt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function St(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var bt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function Tt(u,p){if(St.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(J){t:{try{G(p.nodeName);var U=!0;break t}catch{}U=!1}U||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Tt.aa.h.call(this)}}V(Tt,St);var mt={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),pn=0;function as(u,p,_,w,U){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=U,this.key=++pn,this.da=this.fa=!1}function Wn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function be(u){this.src=u,this.g={},this.h=0}be.prototype.add=function(u,p,_,w,U){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var et=ri(u,p,w,U);return-1<et?(p=u[et],_||(p.fa=!1)):(p=new as(p,this.src,W,!!w,U),p.fa=_,u.push(p)),p};function Nn(u,p){var _=p.type;if(_ in u.g){var w=u.g[_],U=Array.prototype.indexOf.call(w,p,void 0),W;(W=0<=U)&&Array.prototype.splice.call(w,U,1),W&&(Wn(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ri(u,p,_,w){for(var U=0;U<u.length;++U){var W=u[U];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==w)return U}return-1}var Er="closure_lm_"+(1e6*Math.random()|0),si={};function wr(u,p,_,w,U){if(Array.isArray(p)){for(var W=0;W<p.length;W++)wr(u,p[W],_,w,U);return null}return _=Mt(_),u&&u[ie]?u.K(p,_,g(w)?!!w.capture:!1,U):Tr(u,p,_,!1,w,U)}function Tr(u,p,_,w,U,W){if(!p)throw Error("Invalid event type");var et=g(U)?!!U.capture:!!U,Vt=nt(u);if(Vt||(u[Er]=Vt=new be(u)),_=Vt.add(p,_,w,et,W),_.proxy)return _;if(w=oi(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)bt||(U=et),U===void 0&&(U=!1),u.addEventListener(p.toString(),w,U);else if(u.attachEvent)u.attachEvent(li(p.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function oi(){function u(_){return p.call(u.src,u.listener,_)}const p=F;return u}function ls(u,p,_,w,U){if(Array.isArray(p))for(var W=0;W<p.length;W++)ls(u,p[W],_,w,U);else w=g(w)?!!w.capture:!!w,_=Mt(_),u&&u[ie]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=ri(W,_,w,U),-1<_&&(Wn(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=nt(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ri(p,_,w,U)),(_=-1<u?p[u]:null)&&ai(_))}function ai(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ie])Nn(p.i,u);else{var _=u.type,w=u.proxy;p.removeEventListener?p.removeEventListener(_,w,u.capture):p.detachEvent?p.detachEvent(li(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=nt(p))?(Nn(_,u),_.h==0&&(_.src=null,p[Er]=null)):Wn(u)}}}function li(u){return u in si?si[u]:si[u]="on"+u}function F(u,p){if(u.da)u=!0;else{p=new Tt(p,this);var _=u.listener,w=u.ha||u.src;u.fa&&ai(u),u=_.call(w,p)}return u}function nt(u){return u=u[Er],u instanceof be?u:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(u){return typeof u=="function"?u:(u[ct]||(u[ct]=function(p){return u.handleEvent(p)}),u[ct])}function ht(){vt.call(this),this.i=new be(this),this.M=this,this.F=null}V(ht,vt),ht.prototype[ie]=!0,ht.prototype.removeEventListener=function(u,p,_,w){ls(this,u,p,_,w)};function Nt(u,p){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=p.type||p,typeof p=="string")p=new St(p,u);else if(p instanceof St)p.target=p.target||u;else{var U=p;p=new St(w,u),P(p,U)}if(U=!0,_)for(var W=_.length-1;0<=W;W--){var et=p.g=_[W];U=ae(et,w,!0,p)&&U}if(et=p.g=u,U=ae(et,w,!0,p)&&U,U=ae(et,w,!1,p)&&U,_)for(W=0;W<_.length;W++)et=p.g=_[W],U=ae(et,w,!1,p)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],w=0;w<_.length;w++)Wn(_[w]);delete u.g[p],u.h--}}this.F=null},ht.prototype.K=function(u,p,_,w){return this.i.add(String(u),p,!1,_,w)},ht.prototype.L=function(u,p,_,w){return this.i.add(String(u),p,!0,_,w)};function ae(u,p,_,w){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var U=!0,W=0;W<p.length;++W){var et=p[W];if(et&&!et.da&&et.capture==_){var Vt=et.listener,he=et.ha||et.src;et.fa&&Nn(u.i,et),U=Vt.call(he,w)!==!1&&U}}return U&&!w.defaultPrevented}function Sr(u,p,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Lo(u){u.g=Sr(()=>{u.g=null,u.i&&(u.i=!1,Lo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Il extends vt{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Lo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(u){vt.call(this),this.h=u,this.g={}}V(Ir,vt);var No=[];function us(u){tt(u.g,function(p,_){this.g.hasOwnProperty(_)&&ai(p)},u),u.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),us(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=h.JSON.stringify,oh=h.JSON.parse,Ar=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ko(){}ko.prototype.h=null;function Al(u){return u.h||(u.h=u.i())}function Oo(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hs(){St.call(this,"d")}V(hs,St);function bo(){St.call(this,"c")}V(bo,St);var ui={},xl=null;function ds(){return xl=xl||new ht}ui.La="serverreachability";function Cl(u){St.call(this,ui.La,u)}V(Cl,St);function xr(u){const p=ds();Nt(p,new Cl(p))}ui.STAT_EVENT="statevent";function fs(u,p){St.call(this,ui.STAT_EVENT,u),this.stat=p}V(fs,St);function xe(u){const p=ds();Nt(p,new fs(p,u))}ui.Ma="timingevent";function Pl(u,p){St.call(this,ui.Ma,u),this.size=p}V(Pl,St);function Cr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Pr(){this.g=!0}Pr.prototype.xa=function(){this.g=!1};function mn(u,p,_,w,U,W){u.info(function(){if(u.g)if(W)for(var et="",Vt=W.split("&"),he=0;he<Vt.length;he++){var Rt=Vt[he].split("=");if(1<Rt.length){var Ft=Rt[0];Rt=Rt[1];var Yt=Ft.split("_");et=2<=Yt.length&&Yt[1]=="type"?et+(Ft+"="+Rt+"&"):et+(Ft+"=redacted&")}}else et=null;else et=W;return"XMLHTTP REQ ("+w+") [attempt "+U+"]: "+p+`
`+_+`
`+et})}function at(u,p,_,w,U,W,et){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+U+"]: "+p+`
`+_+`
`+W+" "+et})}function ci(u,p,_,w){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ll(u,_)+(w?" "+w:"")})}function Rl(u,p){u.info(function(){return"TIMEOUT: "+p})}Pr.prototype.info=function(){};function Ll(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var U=w[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var et=1;et<U.length;et++)U[et]=""}}}}return cs(_)}catch{return p}}var Rr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ps={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ms;function kn(){}V(kn,ko),kn.prototype.g=function(){return new XMLHttpRequest},kn.prototype.i=function(){return{}},ms=new kn;function On(u,p,_,w){this.j=u,this.i=p,this.l=_,this.R=w||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nl}function Nl(){this.i=null,this.g="",this.h=!1}var kl={},Do={};function Mo(u,p,_){u.L=1,u.v=_n(re(p)),u.m=_,u.P=!0,Vo(u,null)}function Vo(u,p){u.F=Date.now(),_s(u),u.A=re(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Dl(_.i,"t",w),u.C=0,_=u.j.J,u.h=new Nl,u.g=jl(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Il(T(u.Y,u,u.g),u.O)),p=u.U,_=u.g,w=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(No[0]=U.toString()),U=No);for(var W=0;W<U.length;W++){var et=wr(_,U[W],w||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),xr(),mn(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;const p=this.M;p&&je(u)==3?p.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)t:{const Yt=je(this.g);var p=this.g.Ba();const ji=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||Yt!=4||p==7||(p==8||0>=ji?xr(3):xr(2)),zo(this);var _=this.g.Z();this.X=_;e:if(Ol(this)){var w=Xo(this.g);u="";var U=w.length,W=je(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hi(this),Lr(this);var et="";break e}this.h.i=new h.TextDecoder}for(p=0;p<U;p++)this.h.h=!0,u+=this.h.i.decode(w[p],{stream:!(W&&p==U-1)});w.length=0,this.h.g+=u,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=_==200,at(this.i,this.u,this.A,this.l,this.R,Yt,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Vt,he=this.g;if((Vt=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Vt)){var Rt=Vt;break e}}Rt=null}if(_=Rt)ci(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nr(this,_);else{this.o=!1,this.s=3,xe(12),hi(this),Lr(this);break t}}if(this.P){_=!0;let le;for(;!this.J&&this.C<et.length;)if(le=gs(this,et),le==Do){Yt==4&&(this.s=4,xe(14),_=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(le==kl){this.s=4,xe(15),ci(this.i,this.l,et,"[Invalid Chunk]"),_=!1;break}else ci(this.i,this.l,le,null),Nr(this,le);if(Ol(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||et.length!=0||this.h.h||(this.s=1,xe(16),_=!1),this.o=this.o&&_,!_)ci(this.i,this.l,et,"[Invalid Chunked Response]"),hi(this),Lr(this);else if(0<et.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),xs(Ft),Ft.M=!0,xe(11))}}else ci(this.i,this.l,et,null),Nr(this,et);Yt==4&&hi(this),this.o&&!this.J&&(Yt==4?ea(this.j,this):(this.o=!1,_s(this)))}else ah(this.g),_==400&&0<et.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),hi(this),Lr(this)}}}catch{}finally{}};function Ol(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function gs(u,p){var _=u.C,w=p.indexOf(`
`,_);return w==-1?Do:(_=Number(p.substring(_,w)),isNaN(_)?kl:(w+=1,w+_>p.length?Do:(p=p.slice(w,w+_),u.C=w+_,p)))}On.prototype.cancel=function(){this.J=!0,hi(this)};function _s(u){u.S=Date.now()+u.I,bl(u,u.I)}function bl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Cr(T(u.ba,u),p)}function zo(u){u.B&&(h.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Rl(this.i,this.A),this.L!=2&&(xr(),xe(17)),hi(this),this.s=2,Lr(this)):bl(this,this.S-u)};function Lr(u){u.j.G==0||u.J||ea(u.j,u)}function hi(u){zo(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,us(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Nr(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Ct(_.h,u))){if(!u.K&&Ct(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var U=w;if(U[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Ps(_),Is(_);else break t;As(_),xe(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=Cr(T(_.Za,_),6e3));if(1>=Mi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else gi(_,11)}else if((u.K||_.g==u)&&Ps(_),!I(p))for(U=_.Da.g.parse(p),p=0;p<U.length;p++){let Rt=U[p];if(_.T=Rt[0],Rt=Rt[1],_.G==2)if(Rt[0]=="c"){_.K=Rt[1],_.ia=Rt[2];const Ft=Rt[3];Ft!=null&&(_.la=Ft,_.j.info("VER="+_.la));const Yt=Rt[4];Yt!=null&&(_.Aa=Yt,_.j.info("SVER="+_.Aa));const ji=Rt[5];ji!=null&&typeof ji=="number"&&0<ji&&(w=1.5*ji,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const le=u.g;if(le){const Ls=le.g?le.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var W=w.h;W.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(jt(W,W.h),W.h=null))}if(w.D){const $n=le.g?le.g.getResponseHeader("X-HTTP-Session-Id"):null;$n&&(w.ya=$n,gt(w.I,w.D,$n))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var et=u;if(w.qa=Rs(w,w.J?w.ia:null,w.W),et.K){Or(w.h,et);var Vt=et,he=w.L;he&&(Vt.I=he),Vt.B&&(zo(Vt),_s(Vt)),w.g=et}else Mn(w);0<_.i.length&&Fi(_)}else Rt[0]!="stop"&&Rt[0]!="close"||gi(_,7);else _.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?gi(_,7):Ss(_):Rt[0]!="noop"&&_.l&&_.l.ta(Rt),_.v=0)}}xr(4)}catch{}}var kr=class{constructor(u,p){this.g=u,this.map=p}};function Uo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mi(u){return u.h?1:u.g?u.g.size:0}function Ct(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function jt(u,p){u.g?u.g.add(p):u.h=p}function Or(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Uo.prototype.cancel=function(){if(this.i=di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function di(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return z(u.i)}function Vi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(f(u)){for(var p=[],_=u.length,w=0;w<_;w++)p.push(u[w]);return p}p=[],_=0;for(w in u)p[_++]=u[w];return p}function Fo(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(f(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const w in u)p[_++]=w;return p}}}function wt(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(f(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Fo(u),w=Vi(u),U=w.length,W=0;W<U;W++)p.call(void 0,w[W],_&&_[W],u)}var $t=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jo(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),U=null;if(0<=w){var W=u[_].substring(0,w);U=u[_].substring(w+1)}else W=u[_];p(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function gn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gn){this.h=u.h,vs(this,u.j),this.o=u.o,this.g=u.g,fi(this,u.s),this.l=u.l;var p=u.i,_=new pi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Gn(this,_),this.m=u.m}else u&&(p=String(u).match($t))?(this.h=!1,vs(this,p[1]||"",!0),this.o=bn(p[2]||""),this.g=bn(p[3]||"",!0),fi(this,p[4]),this.l=bn(p[5]||"",!0),Gn(this,p[6]||"",!0),this.m=bn(p[7]||"")):(this.h=!1,this.i=new pi(null,this.h))}gn.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Dn(p,zi,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Dn(p,zi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Dn(_,_.charAt(0)=="/"?Go:Wo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Dn(_,Zo)),u.join("")};function re(u){return new gn(u)}function vs(u,p,_){u.j=_?bn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function fi(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Gn(u,p,_){p instanceof pi?(u.i=p,vn(u.i,u.h)):(_||(p=Dn(p,ys)),u.i=new pi(p,u.h))}function gt(u,p,_){u.i.set(p,_)}function _n(u){return gt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Dn(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ho),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ho(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zi=/[#\/\?@]/g,Wo=/[#\?:]/g,Go=/[#\?]/g,ys=/[#\?@]/g,Zo=/#/g;function pi(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function nn(u){u.g||(u.g=new Map,u.h=0,u.i&&jo(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}e=pi.prototype,e.add=function(u,p){nn(this),this.i=null,u=ft(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function $o(u,p){nn(u),p=ft(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Es(u,p){return nn(u),p=ft(u,p),u.g.has(p)}e.forEach=function(u,p){nn(this),this.g.forEach(function(_,w){_.forEach(function(U){u.call(p,U,w,this)},this)},this)},e.na=function(){nn(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){const U=u[w];for(let W=0;W<U.length;W++)_.push(p[w])}return _},e.V=function(u){nn(this);let p=[];if(typeof u=="string")Es(this,u)&&(p=p.concat(this.g.get(ft(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},e.set=function(u,p){return nn(this),this.i=null,u=ft(this,u),Es(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},e.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Dl(u,p,_){$o(u,p),0<_.length&&(u.i=null,u.g.set(ft(u,p),z(_)),u.h+=_.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];const W=encodeURIComponent(String(w)),et=this.V(w);for(w=0;w<et.length;w++){var U=W;et[w]!==""&&(U+="="+encodeURIComponent(String(et[w]))),u.push(U)}}return this.i=u.join("&")};function ft(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function vn(u,p){p&&!u.j&&(nn(u),u.i=null,u.g.forEach(function(_,w){var U=w.toLowerCase();w!=U&&($o(this,w),Dl(this,U,_))},u)),u.j=p}function Bt(u,p){const _=new Pr;if(h.Image){const w=new Image;w.onload=O(yn,_,"TestLoadImage: loaded",!0,p,w),w.onerror=O(yn,_,"TestLoadImage: error",!1,p,w),w.onabort=O(yn,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=O(yn,_,"TestLoadImage: timeout",!1,p,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else p(!1)}function Ml(u,p){const _=new Pr,w=new AbortController,U=setTimeout(()=>{w.abort(),yn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:w.signal}).then(W=>{clearTimeout(U),W.ok?yn(_,"TestPingServer: ok",!0,p):yn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),yn(_,"TestPingServer: error",!1,p)})}function yn(u,p,_,w,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),w(_)}catch{}}function qo(){this.g=new Ar}function Ko(u,p,_){const w=_||"";try{wt(u,function(U,W){let et=U;g(U)&&(et=cs(U)),p.push(w+W+"="+encodeURIComponent(et))})}catch(U){throw p.push(w+"type="+encodeURIComponent("_badmap")),U}}function En(u){this.l=u.Ub||null,this.j=u.eb||!1}V(En,ko),En.prototype.g=function(){return new Ui(this.l,this.j)},En.prototype.i=function(u){return function(){return u}}({});function Ui(u,p){ht.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Ui,ht),e=Ui.prototype,e.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,rn(this)},e.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jt(this)),this.readyState=0},e.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}e.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Jt(this):rn(this),this.readyState==3&&Bi(this)}},e.Ra=function(u){this.g&&(this.response=this.responseText=u,Jt(this))},e.Qa=function(u){this.g&&(this.response=u,Jt(this))},e.ga=function(){this.g&&Jt(this)};function Jt(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rn(u)}e.setRequestHeader=function(u,p){this.u.append(u,p)},e.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function rn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qo(u){let p="";return tt(u,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function ws(u,p,_){t:{for(w in _){var w=!1;break t}w=!0}w||(_=Qo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):gt(u,p,_))}function qt(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(qt,ht);var Vl=/^https?$/i,Jo=["POST","PUT"];e=qt.prototype,e.Ha=function(u){this.J=u},e.ea=function(u,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ms.g(),this.v=this.o?Al(this.o):Al(ms),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){zl(this,W);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var U in w)_.set(U,w[U]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())_.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Jo,p,void 0))||w||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,et]of _)this.g.setRequestHeader(W,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qe(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){zl(this,W)}};function zl(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Yo(u),Ts(u)}function Yo(u){u.A||(u.A=!0,Nt(u,"complete"),Nt(u,"error"))}e.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Nt(this,"complete"),Nt(this,"abort"),Ts(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?At(this):this.bb())},e.bb=function(){At(this)};function At(u){if(u.h&&typeof l<"u"&&(!u.v[1]||je(u)!=4||u.Z()!=2)){if(u.u&&je(u)==4)Sr(u.Ea,0,u);else if(Nt(u,"readystatechange"),je(u)==4){u.h=!1;try{const et=u.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var w;if(w=et===0){var U=String(u.D).match($t)[1]||null;!U&&h.self&&h.self.location&&(U=h.self.location.protocol.slice(0,-1)),w=!Vl.test(U?U.toLowerCase():"")}_=w}if(_)Nt(u,"complete"),Nt(u,"success");else{u.m=6;try{var W=2<je(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Yo(u)}}finally{Ts(u)}}}}function Ts(u,p){if(u.g){qe(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Nt(u,"ready");try{_.onreadystatechange=w}catch{}}}function qe(u){u.I&&(h.clearTimeout(u.I),u.I=null)}e.isActive=function(){return!!this.g};function je(u){return u.g?u.g.readyState:0}e.Z=function(){try{return 2<je(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),oh(p)}};function Xo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ah(u){const p={};u=(u.g&&2<=je(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(I(u[w]))continue;var _=b(u[w]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[U]||[];p[U]=W,W.push(_)}C(p,function(w){return w.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Ul(u){this.Aa=0,this.i=[],this.j=new Pr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mi("baseRetryDelayMs",5e3,u),this.cb=mi("retryDelaySeedMs",1e4,u),this.Wa=mi("forwardChannelMaxRetries",2,u),this.wa=mi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Uo(u&&u.concurrentRequestLimit),this.Da=new qo,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ul.prototype,e.la=8,e.G=1,e.connect=function(u,p,_,w){xe(0),this.W=u,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Rs(this,null,this.W),Fi(this)};function Ss(u){if(Bl(u),u.G==3){var p=u.U++,_=re(u.I);if(gt(_,"SID",u.K),gt(_,"RID",p),gt(_,"TYPE","terminate"),br(u,_),p=new On(u,u.j,p),p.L=2,p.v=_n(re(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=jl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),_s(p)}Fl(u)}function Is(u){u.g&&(xs(u),u.g.cancel(),u.g=null)}function Bl(u){Is(u),u.u&&(h.clearTimeout(u.u),u.u=null),Ps(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Fi(u){if(!Bo(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ee||X(),Z||(Ee(),Z=!0),lt.add(p,u),u.B=0}}function lh(u,p){return Mi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Cr(T(u.Ga,u,p),na(u,u.B)),u.B++,!0)}e.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new On(this,this.j,u);let W=this.o;if(this.S&&(W?(W=S(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=ta(this,U,p),_=re(this.I),gt(_,"RID",u),gt(_,"CVER",22),this.D&&gt(_,"X-HTTP-Session-Id",this.D),br(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(Qo(W)))+"&"+p:this.m&&ws(_,this.m,W)),jt(this.h,U),this.Ua&&gt(_,"TYPE","init"),this.P?(gt(_,"$req",p),gt(_,"SID","null"),U.T=!0,Mo(U,_,null)):Mo(U,_,p),this.G=2}}else this.G==3&&(u?sn(this,u):this.i.length==0||Bo(this.h)||sn(this))};function sn(u,p){var _;p?_=p.l:_=u.U++;const w=re(u.I);gt(w,"SID",u.K),gt(w,"RID",_),gt(w,"AID",u.T),br(u,w),u.m&&u.o&&ws(w,u.m,u.o),_=new On(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ta(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),jt(u.h,_),Mo(_,w,p)}function br(u,p){u.H&&tt(u.H,function(_,w){gt(p,w,_)}),u.l&&wt({},function(_,w){gt(p,w,_)})}function ta(u,p,_){_=Math.min(u.i.length,_);var w=u.l?T(u.l.Na,u.l,u):null;t:{var U=u.i;let W=-1;for(;;){const et=["count="+_];W==-1?0<_?(W=U[0].g,et.push("ofs="+W)):W=0:et.push("ofs="+W);let Vt=!0;for(let he=0;he<_;he++){let Rt=U[he].g;const Ft=U[he].map;if(Rt-=W,0>Rt)W=Math.max(0,U[he].g-100),Vt=!1;else try{Ko(Ft,et,"req"+Rt+"_")}catch{w&&w(Ft)}}if(Vt){w=et.join("&");break t}}}return u=u.i.splice(0,_),p.D=u,w}function Mn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ee||X(),Z||(Ee(),Z=!0),lt.add(p,u),u.v=0}}function As(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Cr(T(u.Fa,u),na(u,u.v)),u.v++,!0)}e.Fa=function(){if(this.u=null,Cs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Cr(T(this.ab,this),u)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),Is(this),Cs(this))};function xs(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Cs(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=re(u.qa);gt(p,"RID","rpc"),gt(p,"SID",u.K),gt(p,"AID",u.T),gt(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&gt(p,"TO",u.ja),gt(p,"TYPE","xmlhttp"),br(u,p),u.m&&u.o&&ws(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=_n(re(p)),_.m=null,_.P=!0,Vo(_,u)}e.Za=function(){this.C!=null&&(this.C=null,Is(this),As(this),xe(19))};function Ps(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function ea(u,p){var _=null;if(u.g==p){Ps(u),xs(u),u.g=null;var w=2}else if(Ct(u.h,p))_=p.D,Or(u.h,p),w=1;else return;if(u.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var U=u.B;w=ds(),Nt(w,new Pl(w,_)),Fi(u)}else Mn(u);else if(U=p.s,U==3||U==0&&0<p.X||!(w==1&&lh(u,p)||w==2&&As(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),U){case 1:gi(u,5);break;case 4:gi(u,10);break;case 3:gi(u,6);break;default:gi(u,2)}}}function na(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function gi(u,p){if(u.j.info("Error code "+p),p==2){var _=T(u.fb,u),w=u.Xa;const U=!w;w=new gn(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||vs(w,"https"),_n(w),U?Bt(w.toString(),_):Ml(w.toString(),_)}else xe(2);u.G=0,u.l&&u.l.sa(p),Fl(u),Bl(u)}e.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Fl(u){if(u.G=0,u.ka=[],u.l){const p=di(u.h);(p.length!=0||u.i.length!=0)&&(j(u.ka,p),j(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function Rs(u,p,_){var w=_ instanceof gn?re(_):new gn(_);if(w.g!="")p&&(w.g=p+"."+w.g),fi(w,w.s);else{var U=h.location;w=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;var W=new gn(null);w&&vs(W,w),p&&(W.g=p),U&&fi(W,U),_&&(W.l=_),w=W}return _=u.D,p=u.ya,_&&p&&gt(w,_,p),gt(w,"VER",u.la),br(u,w),w}function jl(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new qt(new En({eb:_})):new qt(u.pa),p.Ha(u.J),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ia(){}e=ia.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Dr(){}Dr.prototype.g=function(u,p){return new we(u,p)};function we(u,p){ht.call(this),this.g=new Ul(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!I(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new wn(this)}V(we,ht),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){Ss(this.g)},we.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=cs(u),u=_);p.i.push(new kr(p.Ya++,u)),p.G==3&&Fi(p)},we.prototype.N=function(){this.g.l=null,delete this.j,Ss(this.g),delete this.g,we.aa.N.call(this)};function Zn(u){hs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){t:{for(const _ in p){u=_;break t}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}V(Zn,hs);function Hl(){bo.call(this),this.status=1}V(Hl,bo);function wn(u){this.g=u}V(wn,ia),wn.prototype.ua=function(){Nt(this.g,"a")},wn.prototype.ta=function(u){Nt(this.g,new Zn(u))},wn.prototype.sa=function(u){Nt(this.g,new Hl)},wn.prototype.ra=function(){Nt(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,x0=function(){return new Dr},A0=function(){return ds()},I0=ui,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rr.NO_ERROR=0,Rr.TIMEOUT=8,Rr.HTTP_ERROR=6,bu=Rr,ps.COMPLETE="complete",S0=ps,Oo.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",ht.prototype.listen=ht.prototype.K,wa=Oo,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,T0=qt}).apply(typeof vu<"u"?vu:typeof self<"u"?self:typeof window<"u"?window:{});const qg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new m0("@firebase/firestore");function ga(){return Xr.logLevel}function st(e,...t){if(Xr.logLevel<=kt.DEBUG){const n=t.map(yp);Xr.debug(`Firestore (${Co}): ${e}`,...n)}}function ki(e,...t){if(Xr.logLevel<=kt.ERROR){const n=t.map(yp);Xr.error(`Firestore (${Co}): ${e}`,...n)}}function mo(e,...t){if(Xr.logLevel<=kt.WARN){const n=t.map(yp);Xr.warn(`Firestore (${Co}): ${e}`,...n)}}function yp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(e="Unexpected state"){const t=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+e;throw ki(t),new Error(t)}function Ut(e,t){e||_t()}function Et(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends xo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class j1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}}class H1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class W1{constructor(t){this.t=t,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ut(this.o===void 0);let i=this.i;const s=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let o=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ai,t.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=o;t.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ai)}},0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ut(typeof i.accessToken=="string"),new C0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ut(t===null||typeof t=="string"),new ze(t)}}class G1{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z1{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new G1(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Ut(this.o===void 0);const i=o=>{o.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,st("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const s=o=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ut(typeof n.token=="string"),this.R=n.token,new $1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const s=K1(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=t.charAt(s[o]%t.length))}return i}}function Dt(e,t){return e<t?-1:e>t?1:0}function go(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ot(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ot(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new ye(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Dt(this.nanoseconds,t.nanoseconds):Dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new yt(t)}static min(){return new yt(new ye(0,0))}static max(){return new yt(new ye(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n,i){n===void 0?n=0:n>t.length&&_t(),i===void 0?i=t.length-n:i>t.length-n&&_t(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return sl.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof sl?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let s=0;s<i;s++){const o=t.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Qt extends sl{construct(t,n,i){return new Qt(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new ot(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Qt(n)}static emptyPath(){return new Qt([])}}const Q1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Re extends sl{construct(t,n,i){return new Re(t,n,i)}static isValidIdentifier(t){return Q1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Re.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Re(["__name__"])}static fromServerFormat(t){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ot(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<t.length;){const h=t[s];if(h==="\\"){if(s+1===t.length)throw new ot(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ot(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ot(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Re(n)}static emptyPath(){return new Re([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Qt.fromString(t))}static fromName(t){return new ut(Qt.fromString(t).popFirst(5))}static empty(){return new ut(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Qt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Qt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Qt(t.slice()))}}function J1(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=yt.fromTimestamp(i===1e9?new ye(n+1,0):new ye(n,i));return new dr(s,ut.empty(),t)}function Y1(e){return new dr(e.readTime,e.key,-1)}class dr{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new dr(yt.min(),ut.empty(),-1)}static max(){return new dr(yt.max(),ut.empty(),-1)}}function X1(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ut.comparator(e.documentKey,t.documentKey),n!==0?n:Dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ex{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(e){if(e.code!==K.FAILED_PRECONDITION||e.message!==tx)throw e;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Q((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Q.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Q.reject(n)}static resolve(t){return new Q((n,i)=>{n(t)})}static reject(t){return new Q((n,i)=>{i(t)})}static waitFor(t){return new Q((n,i)=>{let s=0,o=0,l=!1;t.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},f=>i(f))}),l=!0,o===s&&n()})}static or(t){let n=Q.resolve(!1);for(const i of t)n=n.next(s=>s?Q.resolve(s):i());return n}static forEach(t,n){const i=[];return t.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(t,n){return new Q((i,s)=>{const o=t.length,l=new Array(o);let h=0;for(let f=0;f<o;f++){const g=f;n(t[g]).next(v=>{l[g]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(t,n){return new Q((i,s)=>{const o=()=>{t()===!0?n().next(()=>{o()},s):i()};o()})}}function nx(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Ep.oe=-1;function Wc(e){return e==null}function dc(e){return e===0&&1/e==-1/0}function ix(e){return typeof e=="number"&&Number.isInteger(e)&&!dc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ss(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function R0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,n){this.comparator=t,this.root=n||Pe.EMPTY}insert(t,n){return new ne(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Pe.BLACK,null,null))}remove(t){return new ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Pe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yu(this.root,t,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yu(this.root,t,this.comparator,!0)}}class yu{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&s&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Pe{constructor(t,n,i,s,o){this.key=t,this.value=n,this.color=i??Pe.RED,this.left=s??Pe.EMPTY,this.right=o??Pe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,o){return new Pe(t??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Pe.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Pe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Pe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const t=this.left.check();if(t!==this.right.check())throw _t();return t+(this.isRed()?0:1)}}Pe.EMPTY=null,Pe.RED=!0,Pe.BLACK=!1;Pe.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(t,n,i,s,o){return this}insert(t,n,i){return new Pe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.comparator=t,this.data=new ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qg(this.data.getIterator())}getIteratorFrom(t){return new Qg(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Ne)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ne(this.comparator);return n.data=t,n}}class Qg{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.fields=t,t.sort(Re.comparator)}static empty(){return new ln([])}unionWith(t){let n=new Ne(Re.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new ln(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return go(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new L0("Invalid base64 string: "+o):o}}(t);return new Oe(n)}static fromUint8Array(t){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(t);return new Oe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Oe.EMPTY_BYTE_STRING=new Oe("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(e){if(Ut(!!e),typeof e=="string"){let t=0;const n=rx.exec(e);if(Ut(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ue(e.seconds),nanos:ue(e.nanos)}}function ue(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ts(e){return typeof e=="string"?Oe.fromBase64String(e):Oe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tp(e){const t=e.mapValue.fields.__previous_value__;return wp(t)?Tp(t):t}function ol(e){const t=fr(e.mapValue.fields.__local_write_time__.timestampValue);return new ye(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t,n,i,s,o,l,h,f,g){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g}}class al{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof al&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={mapValue:{}};function es(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wp(e)?4:ax(e)?9007199254740991:ox(e)?10:11:_t()}function ni(e,t){if(e===t)return!0;const n=es(e);if(n!==es(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ol(e).isEqual(ol(t));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=fr(s.timestampValue),h=fr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,o){return ts(s.bytesValue).isEqual(ts(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,o){return ue(s.geoPointValue.latitude)===ue(o.geoPointValue.latitude)&&ue(s.geoPointValue.longitude)===ue(o.geoPointValue.longitude)}(e,t);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return ue(s.integerValue)===ue(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=ue(s.doubleValue),h=ue(o.doubleValue);return l===h?dc(l)===dc(h):isNaN(l)&&isNaN(h)}return!1}(e,t);case 9:return go(e.arrayValue.values||[],t.arrayValue.values||[],ni);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Kg(l)!==Kg(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!ni(l[f],h[f])))return!1;return!0}(e,t);default:return _t()}}function ll(e,t){return(e.values||[]).find(n=>ni(n,t))!==void 0}function _o(e,t){if(e===t)return 0;const n=es(e),i=es(t);if(n!==i)return Dt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(e.booleanValue,t.booleanValue);case 2:return function(o,l){const h=ue(o.integerValue||o.doubleValue),f=ue(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(e,t);case 3:return Jg(e.timestampValue,t.timestampValue);case 4:return Jg(ol(e),ol(t));case 5:return Dt(e.stringValue,t.stringValue);case 6:return function(o,l){const h=ts(o),f=ts(l);return h.compareTo(f)}(e.bytesValue,t.bytesValue);case 7:return function(o,l){const h=o.split("/"),f=l.split("/");for(let g=0;g<h.length&&g<f.length;g++){const v=Dt(h[g],f[g]);if(v!==0)return v}return Dt(h.length,f.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,l){const h=Dt(ue(o.latitude),ue(l.latitude));return h!==0?h:Dt(ue(o.longitude),ue(l.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Yg(e.arrayValue,t.arrayValue);case 10:return function(o,l){var h,f,g,v;const E=o.fields||{},T=l.fields||{},O=(h=E.value)===null||h===void 0?void 0:h.arrayValue,V=(f=T.value)===null||f===void 0?void 0:f.arrayValue,z=Dt(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return z!==0?z:Yg(O,V)}(e.mapValue,t.mapValue);case 11:return function(o,l){if(o===Eu.mapValue&&l===Eu.mapValue)return 0;if(o===Eu.mapValue)return 1;if(l===Eu.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),g=l.fields||{},v=Object.keys(g);f.sort(),v.sort();for(let E=0;E<f.length&&E<v.length;++E){const T=Dt(f[E],v[E]);if(T!==0)return T;const O=_o(h[f[E]],g[v[E]]);if(O!==0)return O}return Dt(f.length,v.length)}(e.mapValue,t.mapValue);default:throw _t()}}function Jg(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Dt(e,t);const n=fr(e),i=fr(t),s=Dt(n.seconds,i.seconds);return s!==0?s:Dt(n.nanos,i.nanos)}function Yg(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=_o(n[s],i[s]);if(o)return o}return Dt(n.length,i.length)}function vo(e){return of(e)}function of(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=fr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ts(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=of(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${of(n.fields[l])}`;return s+"}"}(e.mapValue):_t()}function af(e){return!!e&&"integerValue"in e}function Sp(e){return!!e&&"arrayValue"in e}function Xg(e){return!!e&&"nullValue"in e}function t_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Du(e){return!!e&&"mapValue"in e}function ox(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ba(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ss(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=ba(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ba(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ax(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.value=t}static empty(){return new Je({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Du(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ba(n)}setAll(t){let n=Re.emptyPath(),i={},s=[];t.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=ba(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(t){const n=this.field(t.popLast());Du(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ni(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];Du(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){ss(n,(s,o)=>t[s]=o);for(const s of i)delete t[s]}clone(){return new Je(ba(this.value))}}function N0(e){const t=[];return ss(e.fields,(n,i)=>{const s=new Re([n]);if(Du(i)){const o=N0(i.mapValue).fields;if(o.length===0)t.push(s);else for(const l of o)t.push(s.child(l))}else t.push(s)}),new ln(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n,i,s,o,l,h){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(t){return new Be(t,0,yt.min(),yt.min(),yt.min(),Je.empty(),0)}static newFoundDocument(t,n,i,s){return new Be(t,1,n,yt.min(),i,s,0)}static newNoDocument(t,n){return new Be(t,2,n,yt.min(),yt.min(),Je.empty(),0)}static newUnknownDocument(t,n){return new Be(t,3,n,yt.min(),yt.min(),Je.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Je.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Je.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Be&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(t,n){this.position=t,this.inclusive=n}}function e_(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const o=t[s],l=e.position[s];if(o.field.isKeyField()?i=ut.comparator(ut.fromName(l.referenceValue),n.key):i=_o(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function n_(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ni(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,n="asc"){this.field=t,this.dir=n}}function lx(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{}class ge extends k0{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new cx(t,n,i):n==="array-contains"?new fx(t,i):n==="in"?new px(t,i):n==="not-in"?new mx(t,i):n==="array-contains-any"?new gx(t,i):new ge(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new hx(t,i):new dx(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_o(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends k0{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new ii(t,n)}matches(t){return O0(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function O0(e){return e.op==="and"}function b0(e){return ux(e)&&O0(e)}function ux(e){for(const t of e.filters)if(t instanceof ii)return!1;return!0}function lf(e){if(e instanceof ge)return e.field.canonicalString()+e.op.toString()+vo(e.value);if(b0(e))return e.filters.map(t=>lf(t)).join(",");{const t=e.filters.map(n=>lf(n)).join(",");return`${e.op}(${t})`}}function D0(e,t){return e instanceof ge?function(i,s){return s instanceof ge&&i.op===s.op&&i.field.isEqual(s.field)&&ni(i.value,s.value)}(e,t):e instanceof ii?function(i,s){return s instanceof ii&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&D0(l,s.filters[h]),!0):!1}(e,t):void _t()}function M0(e){return e instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`}(e):e instanceof ii?function(n){return n.op.toString()+" {"+n.getFilters().map(M0).join(" ,")+"}"}(e):"Filter"}class cx extends ge{constructor(t,n,i){super(t,n,i),this.key=ut.fromName(i.referenceValue)}matches(t){const n=ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class hx extends ge{constructor(t,n){super(t,"in",n),this.keys=V0("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class dx extends ge{constructor(t,n){super(t,"not-in",n),this.keys=V0("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function V0(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ut.fromName(i.referenceValue))}class fx extends ge{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Sp(n)&&ll(n.arrayValue,this.value)}}class px extends ge{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ll(this.value.arrayValue,n)}}class mx extends ge{constructor(t,n){super(t,"not-in",n)}matches(t){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!ll(this.value.arrayValue,n)}}class gx extends ge{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ll(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t,n=null,i=[],s=[],o=null,l=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function i_(e,t=null,n=[],i=[],s=null,o=null,l=null){return new _x(e,t,n,i,s,o,l)}function Ip(e){const t=Et(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>lf(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Wc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>vo(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>vo(i)).join(",")),t.ue=n}return t.ue}function Ap(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lx(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!D0(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!n_(e.startAt,t.startAt)&&n_(e.endAt,t.endAt)}function uf(e){return ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n=null,i=[],s=[],o=null,l="F",h=null,f=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vx(e,t,n,i,s,o,l,h){return new Gc(e,t,n,i,s,o,l,h)}function xp(e){return new Gc(e)}function r_(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function yx(e){return e.collectionGroup!==null}function Da(e){const t=Et(e);if(t.ce===null){t.ce=[];const n=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),n.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Ne(Re.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.ce.push(new pc(o,i))}),n.has(Re.keyField().canonicalString())||t.ce.push(new pc(Re.keyField(),i))}return t.ce}function ti(e){const t=Et(e);return t.le||(t.le=Ex(t,Da(e))),t.le}function Ex(e,t){if(e.limitType==="F")return i_(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new pc(s.field,o)});const n=e.endAt?new fc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new fc(e.startAt.position,e.startAt.inclusive):null;return i_(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function cf(e,t,n){return new Gc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zc(e,t){return Ap(ti(e),ti(t))&&e.limitType===t.limitType}function z0(e){return`${Ip(ti(e))}|lt:${e.limitType}`}function Vs(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>M0(s)).join(", ")}]`),Wc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>vo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>vo(s)).join(",")),`Target(${i})`}(ti(e))}; limitType=${e.limitType})`}function $c(e,t){return t.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ut.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(e,t)&&function(i,s){for(const o of Da(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(e,t)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(l,h,f){const g=e_(l,h,f);return l.inclusive?g<=0:g<0}(i.startAt,Da(i),s)||i.endAt&&!function(l,h,f){const g=e_(l,h,f);return l.inclusive?g>=0:g>0}(i.endAt,Da(i),s))}(e,t)}function wx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function U0(e){return(t,n)=>{let i=!1;for(const s of Da(e)){const o=Tx(s,t,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function Tx(e,t,n){const i=e.field.isKeyField()?ut.comparator(t.key,n.key):function(o,l,h){const f=l.data.field(o),g=h.data.field(o);return f!==null&&g!==null?_o(f,g):_t()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return _t()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return void(s[o]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ss(this.inner,(n,i)=>{for(const[s,o]of i)t(s,o)})}isEmpty(){return R0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new ne(ut.comparator);function Oi(){return Sx}const B0=new ne(ut.comparator);function Ta(...e){let t=B0;for(const n of e)t=t.insert(n.key,n);return t}function F0(e){let t=B0;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function jr(){return Ma()}function j0(){return Ma()}function Ma(){return new Po(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ix=new ne(ut.comparator),Ax=new Ne(ut.comparator);function Pt(...e){let t=Ax;for(const n of e)t=t.add(n);return t}const xx=new Ne(Dt);function Cx(){return xx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(t)?"-0":t}}function H0(e){return{integerValue:""+e}}function Px(e,t){return ix(t)?H0(t):Cp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this._=void 0}}function Rx(e,t,n){return e instanceof mc?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&wp(o)&&(o=Tp(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,t):e instanceof ul?G0(e,t):e instanceof cl?Z0(e,t):function(s,o){const l=W0(s,o),h=s_(l)+s_(s.Pe);return af(l)&&af(s.Pe)?H0(h):Cp(s.serializer,h)}(e,t)}function Lx(e,t,n){return e instanceof ul?G0(e,t):e instanceof cl?Z0(e,t):n}function W0(e,t){return e instanceof gc?function(i){return af(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class mc extends qc{}class ul extends qc{constructor(t){super(),this.elements=t}}function G0(e,t){const n=$0(t);for(const i of e.elements)n.some(s=>ni(s,i))||n.push(i);return{arrayValue:{values:n}}}class cl extends qc{constructor(t){super(),this.elements=t}}function Z0(e,t){let n=$0(t);for(const i of e.elements)n=n.filter(s=>!ni(s,i));return{arrayValue:{values:n}}}class gc extends qc{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function s_(e){return ue(e.integerValue||e.doubleValue)}function $0(e){return Sp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Nx(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof ul&&s instanceof ul||i instanceof cl&&s instanceof cl?go(i.elements,s.elements,ni):i instanceof gc&&s instanceof gc?ni(i.Pe,s.Pe):i instanceof mc&&s instanceof mc}(e.transform,t.transform)}class kx{constructor(t,n){this.version=t,this.transformResults=n}}class Cn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Cn}static exists(t){return new Cn(void 0,t)}static updateTime(t){return new Cn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Mu(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Kc{}function q0(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Pp(e.key,Cn.none()):new yl(e.key,e.data,Cn.none());{const n=e.data,i=Je.empty();let s=new Ne(Re.comparator);for(let o of t.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new yr(e.key,i,new ln(s.toArray()),Cn.none())}}function Ox(e,t,n){e instanceof yl?function(s,o,l){const h=s.value.clone(),f=a_(s.fieldTransforms,o,l.transformResults);h.setAll(f),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(e,t,n):e instanceof yr?function(s,o,l){if(!Mu(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=a_(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(K0(s)),f.setAll(h),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(e,t,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,t,n)}function Va(e,t,n,i){return e instanceof yl?function(o,l,h,f){if(!Mu(o.precondition,l))return h;const g=o.value.clone(),v=l_(o.fieldTransforms,f,l);return g.setAll(v),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),null}(e,t,n,i):e instanceof yr?function(o,l,h,f){if(!Mu(o.precondition,l))return h;const g=l_(o.fieldTransforms,f,l),v=l.data;return v.setAll(K0(o)),v.setAll(g),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(e,t,n,i):function(o,l,h){return Mu(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(e,t,n)}function bx(e,t){let n=null;for(const i of e.fieldTransforms){const s=t.data.field(i.field),o=W0(i.transform,s||null);o!=null&&(n===null&&(n=Je.empty()),n.set(i.field,o))}return n||null}function o_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&go(i,s,(o,l)=>Nx(o,l))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yl extends Kc{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yr extends Kc{constructor(t,n,i,s,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function K0(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function a_(e,t,n){const i=new Map;Ut(e.length===n.length);for(let s=0;s<n.length;s++){const o=e[s],l=o.transform,h=t.data.field(o.field);i.set(o.field,Lx(l,h,n[s]))}return i}function l_(e,t,n){const i=new Map;for(const s of e){const o=s.transform,l=n.data.field(s.field);i.set(s.field,Rx(o,l,t))}return i}class Pp extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dx extends Kc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(t.key)&&Ox(o,t,i[s])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Va(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Va(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=j0();return this.mutations.forEach(s=>{const o=t.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const f=q0(l,h);f!==null&&i.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(yt.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pt())}isEqual(t){return this.batchId===t.batchId&&go(this.mutations,t.mutations,(n,i)=>o_(n,i))&&go(this.baseMutations,t.baseMutations,(n,i)=>o_(n,i))}}class Rp{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){Ut(t.mutations.length===i.length);let s=function(){return Ix}();const o=t.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new Rp(t,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe,Lt;function Ux(e){switch(e){default:return _t();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Q0(e){if(e===void 0)return ki("GRPC error has no .code"),K.UNKNOWN;switch(e){case fe.OK:return K.OK;case fe.CANCELLED:return K.CANCELLED;case fe.UNKNOWN:return K.UNKNOWN;case fe.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case fe.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case fe.INTERNAL:return K.INTERNAL;case fe.UNAVAILABLE:return K.UNAVAILABLE;case fe.UNAUTHENTICATED:return K.UNAUTHENTICATED;case fe.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case fe.NOT_FOUND:return K.NOT_FOUND;case fe.ALREADY_EXISTS:return K.ALREADY_EXISTS;case fe.PERMISSION_DENIED:return K.PERMISSION_DENIED;case fe.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case fe.ABORTED:return K.ABORTED;case fe.OUT_OF_RANGE:return K.OUT_OF_RANGE;case fe.UNIMPLEMENTED:return K.UNIMPLEMENTED;case fe.DATA_LOSS:return K.DATA_LOSS;default:return _t()}}(Lt=fe||(fe={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Zr([4294967295,4294967295],0);function u_(e){const t=Bx().encode(e),n=new w0;return n.update(t),new Uint8Array(n.digest())}function c_(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Zr([n,i],0),new Zr([s,o],0)]}class Lp{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Sa(`Invalid padding: ${n}`);if(i<0)throw new Sa(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Sa(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Sa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(t,n,i){let s=t.add(n.multiply(Zr.fromNumber(i)));return s.compare(Fx)===1&&(s=new Zr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=u_(t),[i,s]=c_(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(t,n,i){const s=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),l=new Lp(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(t){if(this.Ie===0)return;const n=u_(t),[i,s]=c_(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Sa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n,i,s,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const s=new Map;return s.set(t,El.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Qc(yt.min(),s,new ne(Dt),Oi(),Pt())}}class El{constructor(t,n,i,s,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new El(i,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t,n,i,s){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=s}}class J0{constructor(t,n){this.targetId=t,this.me=n}}class Y0{constructor(t,n,i=Oe.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}}class h_{constructor(){this.fe=0,this.ge=f_(),this.pe=Oe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Pt(),n=Pt(),i=Pt();return this.ge.forEach((s,o)=>{switch(o){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:_t()}}),new El(this.pe,this.ye,t,n,i)}Ce(){this.we=!1,this.ge=f_()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ut(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jx{constructor(t){this.Le=t,this.Be=new Map,this.ke=Oi(),this.qe=d_(),this.Qe=new ne(Dt)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:_t()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(t){const n=t.targetId,i=t.me.count,s=this.Je(n);if(s){const o=s.target;if(uf(o))if(i===0){const l=new ut(o.path);this.Ue(n,l,Be.newNoDocument(l,yt.min()))}else Ut(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(t),f=h?this.Xe(h,t,l):1;if(f!==0){this.je(n);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=ts(i).toUint8Array()}catch(f){if(f instanceof L0)return mo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new Lp(l,s,o)}catch(f){return mo(f instanceof Sa?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ie===0?null:h}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(t){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&uf(h.target)){const f=new ut(h.target.path);this.ke.get(f)!==null||this.it(l,f)||this.Ue(l,f,Be.newNoDocument(f,t))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Pt();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(f=>{const g=this.Je(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(t));const s=new Qc(t,n,this.Qe,this.ke,i);return this.ke=Oi(),this.qe=d_(),this.Qe=new ne(Dt),s}$e(t,n){if(!this.ze(t))return;const i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new h_,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ne(Dt),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new h_),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function d_(){return new ne(ut.comparator)}function f_(){return new ne(ut.comparator)}const Hx={asc:"ASCENDING",desc:"DESCENDING"},Wx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gx={and:"AND",or:"OR"};class Zx{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function hf(e,t){return e.useProto3Json||Wc(t)?t:{value:t}}function _c(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function X0(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $x(e,t){return _c(e,t.toTimestamp())}function ei(e){return Ut(!!e),yt.fromTimestamp(function(n){const i=fr(n);return new ye(i.seconds,i.nanos)}(e))}function Np(e,t){return df(e,t).canonicalString()}function df(e,t){const n=function(s){return new Qt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function tE(e){const t=Qt.fromString(e);return Ut(sE(t)),t}function ff(e,t){return Np(e.databaseId,t.path)}function Gh(e,t){const n=tE(t);if(n.get(1)!==e.databaseId.projectId)throw new ot(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ot(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ut(nE(n))}function eE(e,t){return Np(e.databaseId,t)}function qx(e){const t=tE(e);return t.length===4?Qt.emptyPath():nE(t)}function pf(e){return new Qt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function nE(e){return Ut(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function p_(e,t,n){return{name:ff(e,t),fields:n.value.mapValue.fields}}function Kx(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_t()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],o=function(g,v){return g.useProto3Json?(Ut(v===void 0||typeof v=="string"),Oe.fromBase64String(v||"")):(Ut(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Oe.fromUint8Array(v||new Uint8Array))}(e,t.targetChange.resumeToken),l=t.targetChange.cause,h=l&&function(g){const v=g.code===void 0?K.UNKNOWN:Q0(g.code);return new ot(v,g.message||"")}(l);n=new Y0(i,s,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Gh(e,i.document.name),o=ei(i.document.updateTime),l=i.document.createTime?ei(i.document.createTime):yt.min(),h=new Je({mapValue:{fields:i.document.fields}}),f=Be.newFoundDocument(s,o,l,h),g=i.targetIds||[],v=i.removedTargetIds||[];n=new Vu(g,v,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Gh(e,i.document),o=i.readTime?ei(i.readTime):yt.min(),l=Be.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Vu([],h,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Gh(e,i.document),o=i.removedTargetIds||[];n=new Vu([],o,s,null)}else{if(!("filter"in t))return _t();{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new zx(s,o),h=i.targetId;n=new J0(h,l)}}return n}function Qx(e,t){let n;if(t instanceof yl)n={update:p_(e,t.key,t.value)};else if(t instanceof Pp)n={delete:ff(e,t.key)};else if(t instanceof yr)n={update:p_(e,t.key,t.data),updateMask:sC(t.fieldMask)};else{if(!(t instanceof Dx))return _t();n={verify:ff(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof mc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ul)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof cl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof gc)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw _t()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:$x(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_t()}(e,t.precondition)),n}function Jx(e,t){return e&&e.length>0?(Ut(t!==void 0),e.map(n=>function(s,o){let l=s.updateTime?ei(s.updateTime):ei(o);return l.isEqual(yt.min())&&(l=ei(o)),new kx(l,s.transformResults||[])}(n,t))):[]}function Yx(e,t){return{documents:[eE(e,t.path)]}}function Xx(e,t){const n={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=eE(e,s);const o=function(g){if(g.length!==0)return rE(ii.create(g,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const l=function(g){if(g.length!==0)return g.map(v=>function(T){return{field:zs(T.field),direction:nC(T.dir)}}(v))}(t.orderBy);l&&(n.structuredQuery.orderBy=l);const h=hf(e,t.limit);return h!==null&&(n.structuredQuery.limit=h),t.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{_t:n,parent:s}}function tC(e){let t=qx(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ut(i===1);const v=n.from[0];v.allDescendants?s=v.collectionId:t=t.child(v.collectionId)}let o=[];n.where&&(o=function(E){const T=iE(E);return T instanceof ii&&b0(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(E){return E.map(T=>function(V){return new pc(Us(V.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(E){let T;return T=typeof E=="object"?E.value:E,Wc(T)?null:T}(n.limit));let f=null;n.startAt&&(f=function(E){const T=!!E.before,O=E.values||[];return new fc(O,T)}(n.startAt));let g=null;return n.endAt&&(g=function(E){const T=!E.before,O=E.values||[];return new fc(O,T)}(n.endAt)),vx(t,s,l,o,h,"F",f,g)}function eC(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function iE(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Us(n.unaryFilter.field);return ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Us(n.unaryFilter.field);return ge.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Us(n.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Us(n.unaryFilter.field);return ge.create(l,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(e):e.fieldFilter!==void 0?function(n){return ge.create(Us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ii.create(n.compositeFilter.filters.map(i=>iE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _t()}}(n.compositeFilter.op))}(e):_t()}function nC(e){return Hx[e]}function iC(e){return Wx[e]}function rC(e){return Gx[e]}function zs(e){return{fieldPath:e.canonicalString()}}function Us(e){return Re.fromServerFormat(e.fieldPath)}function rE(e){return e instanceof ge?function(n){if(n.op==="=="){if(t_(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NAN"}};if(Xg(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t_(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NAN"}};if(Xg(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(n.field),op:iC(n.op),value:n.value}}}(e):e instanceof ii?function(n){const i=n.getFilters().map(s=>rE(s));return i.length===1?i[0]:{compositeFilter:{op:rC(n.op),filters:i}}}(e):_t()}function sC(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function sE(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,n,i,s,o=yt.min(),l=yt.min(),h=Oe.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(t){return new Yi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.ct=t}}function aC(e){const t=tC({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?cf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.un=new uC}addToCollectionParentIndex(t,n){return this.un.add(n),Q.resolve()}getCollectionParents(t,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return Q.resolve()}deleteFieldIndex(t,n){return Q.resolve()}deleteAllFieldIndexes(t){return Q.resolve()}createTargetIndexes(t,n){return Q.resolve()}getDocumentsMatchingTarget(t,n){return Q.resolve(null)}getIndexType(t,n){return Q.resolve(0)}getFieldIndexes(t,n){return Q.resolve([])}getNextCollectionGroupToUpdate(t){return Q.resolve(null)}getMinOffset(t,n){return Q.resolve(dr.min())}getMinOffsetFromCollectionGroup(t,n){return Q.resolve(dr.min())}updateCollectionGroup(t,n,i){return Q.resolve()}updateIndexEntries(t,n){return Q.resolve()}}class uC{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Ne(Qt.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(t){const n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Ne(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new yo(0)}static kn(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.changes=new Po(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Be.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Va(i.mutation,s,ln.empty(),ye.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Pt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Pt()){const s=jr();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(o=>{let l=Ta();return o.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(t,n){const i=jr();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Pt()))}populateOverlays(t,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(t,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(t,n,i,s){let o=Oi();const l=Ma(),h=function(){return Ma()}();return n.forEach((f,g)=>{const v=i.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof yr)?o=o.insert(g.key,g):v!==void 0?(l.set(g.key,v.mutation.getFieldMask()),Va(v.mutation,g,v.mutation.getFieldMask(),ye.now())):l.set(g.key,ln.empty())}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((g,v)=>l.set(g,v)),n.forEach((g,v)=>{var E;return h.set(g,new hC(v,(E=l.get(g))!==null&&E!==void 0?E:null))}),h))}recalculateAndSaveOverlays(t,n){const i=Ma();let s=new ne((l,h)=>l-h),o=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const g=n.get(f);if(g===null)return;let v=i.get(f)||ln.empty();v=h.applyToLocalView(g,v),i.set(f,v);const E=(s.get(h.batchId)||Pt()).add(f);s=s.insert(h.batchId,E)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,v=f.value,E=j0();v.forEach(T=>{if(!o.has(T)){const O=q0(n.get(T),i.get(T));O!==null&&E.set(T,O),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(t,g,E))}return Q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(l){return ut.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):yx(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-o.size):Q.resolve(jr());let h=-1,f=o;return l.next(g=>Q.forEach(g,(v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(v)?Q.resolve():this.remoteDocumentCache.getEntry(t,v).next(T=>{f=f.insert(v,T)}))).next(()=>this.populateOverlays(t,g,o)).next(()=>this.computeViews(t,f,g,Pt())).next(v=>({batchId:h,changes:F0(v)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ut(n)).next(i=>{let s=Ta();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){const o=n.collectionGroup;let l=Ta();return this.indexManager.getCollectionParents(t,o).next(h=>Q.forEach(h,f=>{const g=function(E,T){return new Gc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next(v=>{v.forEach((E,T)=>{l=l.insert(E,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(t,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,o,s))).next(l=>{o.forEach((f,g)=>{const v=g.getKey();l.get(v)===null&&(l=l.insert(v,Be.newInvalidDocument(v)))});let h=Ta();return l.forEach((f,g)=>{const v=o.get(f);v!==void 0&&Va(v.mutation,g,ln.empty(),ye.now()),$c(n,g)&&(h=h.insert(f,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ei(s.createTime)}}(n)),Q.resolve()}getNamedQuery(t,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:aC(s.bundledQuery),readTime:ei(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.overlays=new ne(ut.comparator),this.Ir=new Map}getOverlay(t,n){return Q.resolve(this.overlays.get(n))}getOverlays(t,n){const i=jr();return Q.forEach(n,s=>this.getOverlay(t,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,o)=>{this.ht(t,n,o)}),Q.resolve()}removeOverlaysForBatchId(t,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(t,n,i){const s=jr(),o=n.length+1,l=new ut(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>i&&s.set(f.getKey(),f)}return Q.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let o=new ne((g,v)=>g-v);const l=this.overlays.getIterator();for(;l.hasNext();){const g=l.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let v=o.get(g.largestBatchId);v===null&&(v=jr(),o=o.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const h=jr(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,v)=>h.set(g,v)),!(h.size()>=s)););return Q.resolve(h)}ht(t,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Vx(n,i));let o=this.Ir.get(n);o===void 0&&(o=Pt(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.sessionToken=Oe.EMPTY_BYTE_STRING}getSessionToken(t){return Q.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.Tr=new Ne(Se.Er),this.dr=new Ne(Se.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){const i=new Se(t,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Vr(new Se(t,n))}mr(t,n){t.forEach(i=>this.removeReference(i,n))}gr(t){const n=new ut(new Qt([])),i=new Se(n,t),s=new Se(n,t+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const n=new ut(new Qt([])),i=new Se(n,t),s=new Se(n,t+1);let o=Pt();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(t){const n=new Se(t,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Se{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return ut.comparator(t.key,n.key)||Dt(t.wr,n.wr)}static Ar(t,n){return Dt(t.wr,n.wr)||ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ne(Se.Er)}checkEmpty(t){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Mx(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new Se(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(t,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Se(n,0),s=new Se(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Ne(Dt);return n.forEach(s=>{const o=new Se(s,0),l=new Se(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,s=i.length+1;let o=i;ut.isDocumentKey(o)||(o=o.child(""));const l=new Se(new ut(o),0);let h=new Ne(Dt);return this.br.forEachWhile(f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(h=h.add(f.wr)),!0)},l),Q.resolve(this.Cr(h))}Cr(t){const n=[];return t.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Ut(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,s=>{const o=new Se(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,n){const i=new Se(n,0),s=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,Q.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t){this.Mr=t,this.docs=function(){return new ne(ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Be.newInvalidDocument(n))}getEntries(t,n){let i=Oi();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Be.newInvalidDocument(s))}),Q.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let o=Oi();const l=n.path,h=new ut(l.child("")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:v}}=f.getNext();if(!l.isPrefixOf(g.path))break;g.path.length>l.length+1||X1(Y1(v),i)<=0||(s.has(v.key)||$c(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(t,n,i,s){_t()}Or(t,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new vC(this)}getSize(t){return Q.resolve(this.size)}}class vC extends cC{constructor(t){super(),this.cr=t}applyChanges(t){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(t,s)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(t){this.persistence=t,this.Nr=new Po(n=>Ip(n),Ap),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kp,this.targetCount=0,this.kr=yo.Bn()}forEachTarget(t,n){return this.Nr.forEach((i,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(t){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Q.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(t){this.Nr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.kr=new yo(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(t,n){return this.Kn(n),Q.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(t,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),s++)}),Q.waitFor(o).next(()=>s)}getTargetCount(t){return Q.resolve(this.targetCount)}getTargetData(t,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(t,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(t,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(t,l))}),Q.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(t,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n){this.qr={},this.overlays={},this.Qr=new Ep(0),this.Kr=!1,this.Kr=!0,this.$r=new mC,this.referenceDelegate=t(this),this.Ur=new yC(this),this.indexManager=new lC,this.remoteDocumentCache=function(s){return new _C(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new oC(n),this.Gr=new fC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new pC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.qr[t.toKey()];return i||(i=new gC(n,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,i){st("MemoryPersistence","Starting transaction:",t);const s=new wC(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(t,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,n)))}}class wC extends ex{constructor(t){super(),this.currentSequenceNumber=t}}class Op{constructor(t){this.persistence=t,this.Jr=new kp,this.Yr=null}static Zr(t){return new Op(t)}get Xr(){if(this.Yr)return this.Yr;throw _t()}addReference(t,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(t,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const s=ut.fromPath(i);return this.ei(t,s).next(o=>{o||n.removeEntry(s,yt.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(t,n){let i=Pt(),s=Pt();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new bp(t,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return IA()?8:nx(TA())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,i,s){const o={result:null};return this.Yi(t,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(t,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new TC;return this.Xi(t,n,l).next(h=>{if(o.result=h,this.zi)return this.es(t,n,l,h.size)})}).next(()=>o.result)}es(t,n,i,s){return i.documentReadCount<this.ji?(ga()<=kt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(ga()<=kt.DEBUG&&st("QueryEngine","Query:",Vs(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(ga()<=kt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ti(n))):Q.resolve())}Yi(t,n){if(r_(n))return Q.resolve(null);let i=ti(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=cf(n,null,"F"),i=ti(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const l=Pt(...o);return this.Ji.getDocuments(t,l).next(h=>this.indexManager.getMinOffset(t,i).next(f=>{const g=this.ts(n,h);return this.ns(n,g,l,f.readTime)?this.Yi(t,cf(n,null,"F")):this.rs(t,g,n,f)}))})))}Zi(t,n,i,s){return r_(n)||s.isEqual(yt.min())?Q.resolve(null):this.Ji.getDocuments(t,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?Q.resolve(null):(ga()<=kt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vs(n)),this.rs(t,l,n,J1(s,-1)).next(h=>h))})}ts(t,n){let i=new Ne(U0(t));return n.forEach((s,o)=>{$c(t,o)&&(i=i.add(o))}),i}ns(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(t,n,i){return ga()<=kt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Vs(n)),this.Ji.getDocumentsMatchingQuery(t,n,dr.min(),i)}rs(t,n,i,s){return this.Ji.getDocumentsMatchingQuery(t,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t,n,i,s){this.persistence=t,this.ss=n,this.serializer=s,this.os=new ne(Dt),this._s=new Po(o=>Ip(o),Ap),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new dC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}}function AC(e,t,n,i){return new IC(e,t,n,i)}async function oE(e,t){const n=Et(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(t),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let f=Pt();for(const g of s){l.push(g.batchId);for(const v of g.mutations)f=f.add(v.key)}for(const g of o){h.push(g.batchId);for(const v of g.mutations)f=f.add(v.key)}return n.localDocuments.getDocuments(i,f).next(g=>({hs:g,removedBatchIds:l,addedBatchIds:h}))})})}function xC(e,t){const n=Et(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,f,g,v){const E=g.batch,T=E.keys();let O=Q.resolve();return T.forEach(V=>{O=O.next(()=>v.getEntry(f,V)).next(z=>{const j=g.docVersions.get(V);Ut(j!==null),z.version.compareTo(j)<0&&(E.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),v.addEntry(z)))})}),O.next(()=>h.mutationQueue.removeMutationBatch(f,E))}(n,i,t,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=Pt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function aE(e){const t=Et(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function CC(e,t){const n=Et(e),i=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];t.targetChanges.forEach((v,E)=>{const T=s.get(E);if(!T)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,E).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,E)));let O=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(E)!==null?O=O.withResumeToken(Oe.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,i)),s=s.insert(E,O),function(z,j,x){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(T,O,v)&&h.push(n.Ur.updateTargetData(o,O))});let f=Oi(),g=Pt();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(PC(o,l,t.documentUpdates).next(v=>{f=v.Ps,g=v.Is})),!i.isEqual(yt.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(E=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return Q.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,g)).next(()=>f)}).then(o=>(n.os=s,o))}function PC(e,t,n){let i=Pt(),s=Pt();return n.forEach(o=>i=i.add(o)),t.getEntries(e,i).next(o=>{let l=Oi();return n.forEach((h,f)=>{const g=o.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(yt.min())?(t.removeEntry(h,f.readTime),l=l.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(f),l=l.insert(h,f)):st("LocalStore","Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)}),{Ps:l,Is:s}})}function RC(e,t){const n=Et(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function LC(e,t){const n=Et(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,t).next(o=>o?(s=o,Q.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new Yi(t,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(t,i.targetId)),i})}async function mf(e,t,n){const i=Et(e),s=i.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!vl(l))throw l;st("LocalStore",`Failed to update sequence numbers for target ${t}: ${l}`)}i.os=i.os.remove(t),i._s.delete(s.target)}function m_(e,t,n){const i=Et(e);let s=yt.min(),o=Pt();return i.persistence.runTransaction("Execute query","readwrite",l=>function(f,g,v){const E=Et(f),T=E._s.get(v);return T!==void 0?Q.resolve(E.os.get(T)):E.Ur.getTargetData(g,v)}(i,l,ti(t)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(f=>{o=f})}).next(()=>i.ss.getDocumentsMatchingQuery(l,t,n?s:yt.min(),n?o:Pt())).next(h=>(NC(i,wx(t),h),{documents:h,Ts:o})))}function NC(e,t,n){let i=e.us.get(t)||yt.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),e.us.set(t,i)}class g_{constructor(){this.activeTargetIds=Cx()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kC{constructor(){this.so=new g_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,i){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new g_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu=null;function Zh(){return wu===null?wu=function(){return 268435456+Math.round(2147483648*Math.random())}():wu++,"0x"+wu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve="WebChannelConnection";class MC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=Zh(),f=this.xo(n,i.toUriEncodedString());st("RestConnection",`Sending RPC '${n}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,o,l),this.No(n,f,g,s).then(v=>(st("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw mo("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",f,"request:",s),v})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=bC[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,i,s){const o=Zh();return new Promise((l,h)=>{const f=new T0;f.setWithCredentials(!0),f.listenOnce(S0.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case bu.NO_ERROR:const v=f.getResponseJson();st(Ve,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(v)),l(v);break;case bu.TIMEOUT:st(Ve,`RPC '${t}' ${o} timed out`),h(new ot(K.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:const E=f.getStatus();if(st(Ve,`RPC '${t}' ${o} failed with status:`,E,"response text:",f.getResponseText()),E>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const O=T==null?void 0:T.error;if(O&&O.status&&O.message){const V=function(j){const x=j.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(O.status);h(new ot(V,O.message))}else h(new ot(K.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ot(K.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{st(Ve,`RPC '${t}' ${o} completed.`)}});const g=JSON.stringify(s);st(Ve,`RPC '${t}' ${o} sending request:`,s),f.send(n,"POST",g,i,15)})}Bo(t,n,i){const s=Zh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=x0(),h=A0(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const v=o.join("");st(Ve,`Creating RPC '${t}' stream ${s}: ${v}`,f);const E=l.createWebChannel(v,f);let T=!1,O=!1;const V=new DC({Io:j=>{O?st(Ve,`Not sending because RPC '${t}' stream ${s} is closed:`,j):(T||(st(Ve,`Opening RPC '${t}' stream ${s} transport.`),E.open(),T=!0),st(Ve,`RPC '${t}' stream ${s} sending:`,j),E.send(j))},To:()=>E.close()}),z=(j,x,I)=>{j.listen(x,k=>{try{I(k)}catch(G){setTimeout(()=>{throw G},0)}})};return z(E,wa.EventType.OPEN,()=>{O||(st(Ve,`RPC '${t}' stream ${s} transport opened.`),V.yo())}),z(E,wa.EventType.CLOSE,()=>{O||(O=!0,st(Ve,`RPC '${t}' stream ${s} transport closed`),V.So())}),z(E,wa.EventType.ERROR,j=>{O||(O=!0,mo(Ve,`RPC '${t}' stream ${s} transport errored:`,j),V.So(new ot(K.UNAVAILABLE,"The operation could not be completed")))}),z(E,wa.EventType.MESSAGE,j=>{var x;if(!O){const I=j.data[0];Ut(!!I);const k=I,G=k.error||((x=k[0])===null||x===void 0?void 0:x.error);if(G){st(Ve,`RPC '${t}' stream ${s} received error:`,G);const J=G.status;let tt=function(A){const P=fe[A];if(P!==void 0)return Q0(P)}(J),C=G.message;tt===void 0&&(tt=K.INTERNAL,C="Unknown error status: "+J+" with message "+G.message),O=!0,V.So(new ot(tt,C)),E.close()}else st(Ve,`RPC '${t}' stream ${s} received:`,I),V.bo(I)}}),z(h,I0.STAT_EVENT,j=>{j.stat===sf.PROXY?st(Ve,`RPC '${t}' stream ${s} detected buffering proxy`):j.stat===sf.NOPROXY&&st(Ve,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(e){return new Zx(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t,n,i=1e3,s=1.5,o=6e4){this.ui=t,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&st("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(t,n,i,s,o,l,h,f){this.ui=t,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new lE(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(n)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{t(()=>{const s=new ot(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(t,n){const i=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return st("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VC extends uE{constructor(t,n,i,s,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const n=Kx(this.serializer,t),i=function(o){if(!("targetChange"in o))return yt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?yt.min():l.readTime?ei(l.readTime):yt.min()}(t);return this.listener.d_(n,i)}A_(t){const n={};n.database=pf(this.serializer),n.addTarget=function(o,l){let h;const f=l.target;if(h=uf(f)?{documents:Yx(o,f)}:{query:Xx(o,f)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=X0(o,l.resumeToken);const g=hf(o,l.expectedCount);g!==null&&(h.expectedCount=g)}else if(l.snapshotVersion.compareTo(yt.min())>0){h.readTime=_c(o,l.snapshotVersion.toTimestamp());const g=hf(o,l.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,t);const i=eC(this.serializer,t);i&&(n.labels=i),this.a_(n)}R_(t){const n={};n.database=pf(this.serializer),n.removeTarget=t,this.a_(n)}}class zC extends uE{constructor(t,n,i,s,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return Ut(!!t.streamToken),this.lastStreamToken=t.streamToken,Ut(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ut(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const n=Jx(t.writeResults,t.commitTime),i=ei(t.commitTime);return this.listener.g_(i,n)}p_(){const t={};t.database=pf(this.serializer),this.a_(t)}m_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>Qx(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC extends class{}{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ot(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(t,df(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ot(K.UNKNOWN,o.toString())})}Lo(t,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(t,df(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ot(K.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ki(n),this.D_=!1):st("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n,i,s,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{os(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(f){const g=Et(f);g.L_.add(4),await wl(g),g.q_.set("Unknown"),g.L_.delete(4),await Yc(g)}(this))})}),this.q_=new BC(i,s)}}async function Yc(e){if(os(e))for(const t of e.B_)await t(!0)}async function wl(e){for(const t of e.B_)await t(!1)}function cE(e,t){const n=Et(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),zp(n)?Vp(n):Ro(n).r_()&&Mp(n,t))}function Dp(e,t){const n=Et(e),i=Ro(n);n.N_.delete(t),i.r_()&&hE(n,t),n.N_.size===0&&(i.r_()?i.o_():os(n)&&n.q_.set("Unknown"))}function Mp(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ro(e).A_(t)}function hE(e,t){e.Q_.xe(t),Ro(e).R_(t)}function Vp(e){e.Q_=new jx({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Ro(e).start(),e.q_.v_()}function zp(e){return os(e)&&!Ro(e).n_()&&e.N_.size>0}function os(e){return Et(e).L_.size===0}function dE(e){e.Q_=void 0}async function jC(e){e.q_.set("Online")}async function HC(e){e.N_.forEach((t,n)=>{Mp(e,t)})}async function WC(e,t){dE(e),zp(e)?(e.q_.M_(t),Vp(e)):e.q_.set("Unknown")}async function GC(e,t,n){if(e.q_.set("Online"),t instanceof Y0&&t.state===2&&t.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(e,t)}catch(i){st("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await vc(e,i)}else if(t instanceof Vu?e.Q_.Ke(t):t instanceof J0?e.Q_.He(t):e.Q_.We(t),!n.isEqual(yt.min()))try{const i=await aE(e.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const v=o.N_.get(g);v&&o.N_.set(g,v.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,g)=>{const v=o.N_.get(f);if(!v)return;o.N_.set(f,v.withResumeToken(Oe.EMPTY_BYTE_STRING,v.snapshotVersion)),hE(o,f);const E=new Yi(v.target,f,g,v.sequenceNumber);Mp(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(e,n)}catch(i){st("RemoteStore","Failed to raise snapshot:",i),await vc(e,i)}}async function vc(e,t,n){if(!vl(t))throw t;e.L_.add(1),await wl(e),e.q_.set("Offline"),n||(n=()=>aE(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Yc(e)})}function fE(e,t){return t().catch(n=>vc(e,n,t))}async function Xc(e){const t=Et(e),n=pr(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;ZC(t);)try{const s=await RC(t.localStore,i);if(s===null){t.O_.length===0&&n.o_();break}i=s.batchId,$C(t,s)}catch(s){await vc(t,s)}pE(t)&&mE(t)}function ZC(e){return os(e)&&e.O_.length<10}function $C(e,t){e.O_.push(t);const n=pr(e);n.r_()&&n.V_&&n.m_(t.mutations)}function pE(e){return os(e)&&!pr(e).n_()&&e.O_.length>0}function mE(e){pr(e).start()}async function qC(e){pr(e).p_()}async function KC(e){const t=pr(e);for(const n of e.O_)t.m_(n.mutations)}async function QC(e,t,n){const i=e.O_.shift(),s=Rp.from(i,t,n);await fE(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Xc(e)}async function JC(e,t){t&&pr(e).V_&&await async function(i,s){if(function(l){return Ux(l)&&l!==K.ABORTED}(s.code)){const o=i.O_.shift();pr(i).s_(),await fE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Xc(i)}}(e,t),pE(e)&&mE(e)}async function v_(e,t){const n=Et(e);n.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const i=os(n);n.L_.add(3),await wl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Yc(n)}async function YC(e,t){const n=Et(e);t?(n.L_.delete(2),await Yc(n)):t||(n.L_.add(2),await wl(n),n.q_.set("Unknown"))}function Ro(e){return e.K_||(e.K_=function(n,i,s){const o=Et(n);return o.w_(),new VC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(e.datastore,e.asyncQueue,{Eo:jC.bind(null,e),Ro:HC.bind(null,e),mo:WC.bind(null,e),d_:GC.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),zp(e)?Vp(e):e.q_.set("Unknown")):(await e.K_.stop(),dE(e))})),e.K_}function pr(e){return e.U_||(e.U_=function(n,i,s){const o=Et(n);return o.w_(),new zC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qC.bind(null,e),mo:JC.bind(null,e),f_:KC.bind(null,e),g_:QC.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Xc(e)):(await e.U_.stop(),e.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(t,n,i,s,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,o){const l=Date.now()+i,h=new Up(t,n,l,s,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bp(e,t){if(ki("AsyncQueue",`${t}: ${e}`),vl(e))return new ot(K.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t){this.comparator=t?(n,i)=>t(n,i)||ut.comparator(n.key,i.key):(n,i)=>ut.comparator(n.key,i.key),this.keyedMap=Ta(),this.sortedSet=new ne(this.comparator)}static emptySet(t){return new oo(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof oo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new oo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.W_=new ne(ut.comparator)}track(t){const n=t.doc.key,i=this.W_.get(n);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(n,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(n):t.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):_t():this.W_=this.W_.insert(n,t)}G_(){const t=[];return this.W_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Eo{constructor(t,n,i,s,o,l,h,f,g){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Eo(t,n,oo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class tP{constructor(){this.queries=E_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=Et(n),o=s.queries;s.queries=E_(),o.forEach((l,h)=>{for(const f of h.j_)f.onError(i)})})(this,new ot(K.ABORTED,"Firestore shutting down"))}}function E_(){return new Po(e=>z0(e),Zc)}async function gE(e,t){const n=Et(e);let i=3;const s=t.query;let o=n.queries.get(s);o?!o.H_()&&t.J_()&&(i=2):(o=new XC,i=t.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Bp(l,`Initialization of query '${Vs(t.query)}' failed`);return void t.onError(h)}n.queries.set(s,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&Fp(n)}async function _E(e,t){const n=Et(e),i=t.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(t);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=t.J_()?0:1:!o.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function eP(e,t){const n=Et(e);let i=!1;for(const s of t){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&Fp(n)}function nP(e,t,n){const i=Et(e),s=i.queries.get(t);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(t)}function Fp(e){e.Y_.forEach(t=>{t.next()})}var gf,w_;(w_=gf||(gf={})).ea="default",w_.Cache="cache";class vE{constructor(t,n,i){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new Eo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=Eo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t){this.key=t}}class EE{constructor(t){this.key=t}}class iP{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pt(),this.mutatedKeys=Pt(),this.Aa=U0(t),this.Ra=new oo(this.Aa)}get Va(){return this.Ta}ma(t,n){const i=n?n.fa:new y_,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((v,E)=>{const T=s.get(v),O=$c(this.query,E)?E:null,V=!!T&&this.mutatedKeys.has(T.key),z=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let j=!1;T&&O?T.data.isEqual(O.data)?V!==z&&(i.track({type:3,doc:O}),j=!0):this.ga(T,O)||(i.track({type:2,doc:O}),j=!0,(f&&this.Aa(O,f)>0||g&&this.Aa(O,g)<0)&&(h=!0)):!T&&O?(i.track({type:0,doc:O}),j=!0):T&&!O&&(i.track({type:1,doc:T}),j=!0,(f||g)&&(h=!0)),j&&(O?(l=l.add(O),o=z?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){const o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const l=t.fa.G_();l.sort((v,E)=>function(O,V){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return z(O)-z(V)}(v.type,E.type)||this.Aa(v.doc,E.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,g=f!==this.Ea;return this.Ea=f,l.length!==0||g?{snapshot:new Eo(this.query,t.Ra,o,l,t.mutatedKeys,f===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new y_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Pt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return t.forEach(i=>{this.da.has(i)||n.push(new EE(i))}),this.da.forEach(i=>{t.has(i)||n.push(new yE(i))}),n}ba(t){this.Ta=t.Ts,this.da=Pt();const n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class rP{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class sP{constructor(t){this.key=t,this.va=!1}}class oP{constructor(t,n,i,s,o,l){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Po(h=>z0(h),Zc),this.Ma=new Map,this.xa=new Set,this.Oa=new ne(ut.comparator),this.Na=new Map,this.La=new kp,this.Ba={},this.ka=new Map,this.qa=yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aP(e,t,n=!0){const i=xE(e);let s;const o=i.Fa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await wE(i,t,n,!0),s}async function lP(e,t){const n=xE(e);await wE(n,t,!0,!1)}async function wE(e,t,n,i){const s=await LC(e.localStore,ti(t)),o=s.targetId,l=e.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await uP(e,t,o,l==="current",s.resumeToken)),e.isPrimaryClient&&n&&cE(e.remoteStore,s),h}async function uP(e,t,n,i,s){e.Ka=(E,T,O)=>async function(z,j,x,I){let k=j.view.ma(x);k.ns&&(k=await m_(z.localStore,j.query,!1).then(({documents:C})=>j.view.ma(C,k)));const G=I&&I.targetChanges.get(j.targetId),J=I&&I.targetMismatches.get(j.targetId)!=null,tt=j.view.applyChanges(k,z.isPrimaryClient,G,J);return S_(z,j.targetId,tt.wa),tt.snapshot}(e,E,T,O);const o=await m_(e.localStore,t,!0),l=new iP(t,o.Ts),h=l.ma(o.documents),f=El.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),g=l.applyChanges(h,e.isPrimaryClient,f);S_(e,n,g.wa);const v=new rP(t,n,l);return e.Fa.set(t,v),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),g.snapshot}async function cP(e,t,n){const i=Et(e),s=i.Fa.get(t),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Zc(l,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await mf(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Dp(i.remoteStore,s.targetId),_f(i,s.targetId)}).catch(_l)):(_f(i,s.targetId),await mf(i.localStore,s.targetId,!0))}async function hP(e,t){const n=Et(e),i=n.Fa.get(t),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dp(n.remoteStore,i.targetId))}async function dP(e,t,n){const i=yP(e);try{const s=await function(l,h){const f=Et(l),g=ye.now(),v=h.reduce((O,V)=>O.add(V.key),Pt());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",O=>{let V=Oi(),z=Pt();return f.cs.getEntries(O,v).next(j=>{V=j,V.forEach((x,I)=>{I.isValidDocument()||(z=z.add(x))})}).next(()=>f.localDocuments.getOverlayedDocuments(O,V)).next(j=>{E=j;const x=[];for(const I of h){const k=bx(I,E.get(I.key).overlayedDocument);k!=null&&x.push(new yr(I.key,k,N0(k.value.mapValue),Cn.exists(!0)))}return f.mutationQueue.addMutationBatch(O,g,x,h)}).next(j=>{T=j;const x=j.applyToLocalDocumentSet(E,z);return f.documentOverlayCache.saveOverlays(O,j.batchId,x)})}).then(()=>({batchId:T.batchId,changes:F0(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,f){let g=l.Ba[l.currentUser.toKey()];g||(g=new ne(Dt)),g=g.insert(h,f),l.Ba[l.currentUser.toKey()]=g}(i,s.batchId,n),await Tl(i,s.changes),await Xc(i.remoteStore)}catch(s){const o=Bp(s,"Failed to persist write");n.reject(o)}}async function TE(e,t){const n=Et(e);try{const i=await CC(n.localStore,t);t.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Ut(l.va):s.removedDocuments.size>0&&(Ut(l.va),l.va=!1))}),await Tl(n,i,t)}catch(i){await _l(i)}}function T_(e,t,n){const i=Et(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(t);h.snapshot&&s.push(h.snapshot)}),function(l,h){const f=Et(l);f.onlineState=h;let g=!1;f.queries.forEach((v,E)=>{for(const T of E.j_)T.Z_(h)&&(g=!0)}),g&&Fp(f)}(i.eventManager,t),s.length&&i.Ca.d_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function fP(e,t,n){const i=Et(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Na.get(t),o=s&&s.key;if(o){let l=new ne(ut.comparator);l=l.insert(o,Be.newNoDocument(o,yt.min()));const h=Pt().add(o),f=new Qc(yt.min(),new Map,new ne(Dt),l,h);await TE(i,f),i.Oa=i.Oa.remove(o),i.Na.delete(t),jp(i)}else await mf(i.localStore,t,!1).then(()=>_f(i,t,n)).catch(_l)}async function pP(e,t){const n=Et(e),i=t.batch.batchId;try{const s=await xC(n.localStore,t);IE(n,i,null),SE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tl(n,s)}catch(s){await _l(s)}}async function mP(e,t,n){const i=Et(e);try{const s=await function(l,h){const f=Et(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return f.mutationQueue.lookupMutationBatch(g,h).next(E=>(Ut(E!==null),v=E.keys(),f.mutationQueue.removeMutationBatch(g,E))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,v,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>f.localDocuments.getDocuments(g,v))})}(i.localStore,t);IE(i,t,n),SE(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Tl(i,s)}catch(s){await _l(s)}}function SE(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function IE(e,t,n){const i=Et(e);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(t);o&&(n?o.reject(n):o.resolve(),s=s.remove(t)),i.Ba[i.currentUser.toKey()]=s}}function _f(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(i=>{e.La.containsKey(i)||AE(e,i)})}function AE(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);n!==null&&(Dp(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),jp(e))}function S_(e,t,n){for(const i of n)i instanceof yE?(e.La.addReference(i.key,t),gP(e,i)):i instanceof EE?(st("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||AE(e,i.key)):_t()}function gP(e,t){const n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(st("SyncEngine","New document in limbo: "+n),e.xa.add(i),jp(e))}function jp(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new ut(Qt.fromString(t)),i=e.qa.next();e.Na.set(i,new sP(n)),e.Oa=e.Oa.insert(n,i),cE(e.remoteStore,new Yi(ti(xp(n.path)),i,"TargetPurposeLimboResolution",Ep.oe))}}async function Tl(e,t,n){const i=Et(e),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,f)=>{l.push(i.Ka(f,t,n).then(g=>{var v;if((g||n)&&i.isPrimaryClient){const E=g?!g.fromCache:(v=n==null?void 0:n.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(g){s.push(g);const E=bp.Wi(f.targetId,g);o.push(E)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(f,g){const v=Et(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Q.forEach(g,T=>Q.forEach(T.$i,O=>v.persistence.referenceDelegate.addReference(E,T.targetId,O)).next(()=>Q.forEach(T.Ui,O=>v.persistence.referenceDelegate.removeReference(E,T.targetId,O)))))}catch(E){if(!vl(E))throw E;st("LocalStore","Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const O=v.os.get(T),V=O.snapshotVersion,z=O.withLastLimboFreeSnapshotVersion(V);v.os=v.os.insert(T,z)}}}(i.localStore,o))}async function _P(e,t){const n=Et(e);if(!n.currentUser.isEqual(t)){st("SyncEngine","User change. New user:",t.toKey());const i=await oE(n.localStore,t);n.currentUser=t,function(o,l){o.ka.forEach(h=>{h.forEach(f=>{f.reject(new ot(K.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Tl(n,i.hs)}}function vP(e,t){const n=Et(e),i=n.Na.get(t);if(i&&i.va)return Pt().add(i.key);{let s=Pt();const o=n.Ma.get(t);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function xE(e){const t=Et(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=TE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fP.bind(null,t),t.Ca.d_=eP.bind(null,t.eventManager),t.Ca.$a=nP.bind(null,t.eventManager),t}function yP(e){const t=Et(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mP.bind(null,t),t}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,n){return null}Ha(t,n){return null}za(t){return AC(this.persistence,new SC,t.initialUser,this.serializer)}Ga(t){return new EC(Op.Zr,this.serializer)}Wa(t){return new kC}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class vf{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>T_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_P.bind(null,this.syncEngine),await YC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new tP}()}createDatastore(t){const n=Jc(t.databaseInfo.databaseId),i=function(o){return new MC(o)}(t.databaseInfo);return function(o,l,h,f){return new UC(o,l,h,f)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,o,l,h){return new FC(i,s,o,l,h)}(this.localStore,this.datastore,t.asyncQueue,n=>T_(this.syncEngine,n,0),function(){return __.D()?new __:new OC}())}createSyncEngine(t,n){return function(s,o,l,h,f,g,v){const E=new oP(s,o,l,h,f,g);return v&&(E.Qa=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const o=Et(s);st("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await wl(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):ki("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(t,n,i,s,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=ze.UNAUTHENTICATED,this.clientId=P0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{st("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(st("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Bp(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function qh(e,t){e.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async s=>{i.isEqual(s)||(await oE(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function I_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wP(e);st("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>v_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>v_(t.remoteStore,s)),e._onlineComponents=t}async function wP(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await qh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await qh(e,new yc)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await qh(e,new yc);return e._offlineComponents}async function PE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await I_(e,e._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await I_(e,new vf))),e._onlineComponents}function TP(e){return PE(e).then(t=>t.syncEngine)}async function RE(e){const t=await PE(e),n=t.eventManager;return n.onListen=aP.bind(null,t.syncEngine),n.onUnlisten=cP.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=lP.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=hP.bind(null,t.syncEngine),n}function SP(e,t,n={}){const i=new Ai;return e.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,g){const v=new CE({next:T=>{v.Za(),l.enqueueAndForget(()=>_E(o,E));const O=T.docs.has(h);!O&&T.fromCache?g.reject(new ot(K.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&f&&f.source==="server"?g.reject(new ot(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new vE(xp(h.path),v,{includeMetadataChanges:!0,_a:!0});return gE(o,E)}(await RE(e),e.asyncQueue,t,n,i)),i.promise}function IP(e,t,n={}){const i=new Ai;return e.asyncQueue.enqueueAndForget(async()=>function(o,l,h,f,g){const v=new CE({next:T=>{v.Za(),l.enqueueAndForget(()=>_E(o,E)),T.fromCache&&f.source==="server"?g.reject(new ot(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new vE(h,v,{includeMetadataChanges:!0,_a:!0});return gE(o,E)}(await RE(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(e,t,n){if(!n)throw new ot(K.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function AP(e,t,n,i){if(t===!0&&i===!0)throw new ot(K.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function x_(e){if(!ut.isDocumentKey(e))throw new ot(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function C_(e){if(ut.isDocumentKey(e))throw new ot(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Hp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":_t()}function mr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ot(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hp(e);throw new ot(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ot(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ot(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}AP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ot(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ot(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ot(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class th{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new j1;switch(i.type){case"firstParty":return new Z1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ot(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=A_.get(n);i&&(st("ComponentProvider","Removing Datastore"),A_.delete(n),i.terminate())}(this),Promise.resolve()}}function xP(e,t,n,i={}){var s;const o=(e=mr(e,th))._getSettings(),l=`${t}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=ze.MOCK_USER;else{h=wA(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new ot(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ze(g)}e._authCredentials=new H1(new C0(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new eh(this.firestore,t,this._query)}}class cn{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new cn(this.firestore,t,this._key)}}class ur extends eh{constructor(t,n,i){super(t,n,xp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new cn(this.firestore,null,new ut(t))}withConverter(t){return new ur(this.firestore,t,this._path)}}function Kh(e,t,...n){if(e=Li(e),NE("collection","path",t),e instanceof th){const i=Qt.fromString(t,...n);return C_(i),new ur(e,null,i)}{if(!(e instanceof cn||e instanceof ur))throw new ot(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Qt.fromString(t,...n));return C_(i),new ur(e.firestore,null,i)}}function Qh(e,t,...n){if(e=Li(e),arguments.length===1&&(t=P0.newId()),NE("doc","path",t),e instanceof th){const i=Qt.fromString(t,...n);return x_(i),new cn(e,null,new ut(i))}{if(!(e instanceof cn||e instanceof ur))throw new ot(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Qt.fromString(t,...n));return x_(i),new cn(e.firestore,e instanceof ur?e.converter:null,new ut(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new lE(this,"async_queue_retry"),this.Vu=()=>{const i=$h();i&&st("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const n=$h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ai;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!vl(t))throw t;st("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const n=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw ki("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(t,n,i){this.fu(),this.Ru.indexOf(t)>-1&&(n=0);const s=Up.createAndSchedule(this,t,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&_t()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const n of this.Tu)if(n.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const n=this.Tu.indexOf(t);this.Tu.splice(n,1)}}class Sl extends th{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=new R_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new R_(t),this._firestoreClient=void 0,await t}}}function CP(e,t){const n=typeof e=="object"?e:L1(),i=typeof e=="string"?e:"(default)",s=x1(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=yA("firestore");o&&xP(s,...o)}return s}function nh(e){if(e._terminated)throw new ot(K.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||PP(e),e._firestoreClient}function PP(e){var t,n,i;const s=e._freezeSettings(),o=function(h,f,g,v){return new sx(h,f,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,LE(v.experimentalLongPollingOptions),v.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new EP(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wo(Oe.fromBase64String(t))}catch(n){throw new ot(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new wo(Oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ot(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ot(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ot(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Dt(this._lat,t._lat)||Dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^__.*__$/;class LP{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new yr(t,this.data,this.fieldMask,n,this.fieldTransforms):new yl(t,this.data,n,this.fieldTransforms)}}class kE{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new yr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function OE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class $p{constructor(t,n,i,s,o,l){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new $p(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Fu({path:i,xu:!1});return s.Ou(t),s}Nu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Ec(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(OE(this.Cu)&&RP.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class NP{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Jc(t)}Qu(t,n,i,s=!1){return new $p({Cu:t,methodName:n,qu:i,path:Re.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bE(e){const t=e._freezeSettings(),n=Jc(e._databaseId);return new NP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DE(e,t,n,i,s,o={}){const l=e.Qu(o.merge||o.mergeFields?2:0,t,n,s);qp("Data must be an object, but it was:",l,i);const h=ME(i,l);let f,g;if(o.merge)f=new ln(l.fieldMask),g=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const E of o.mergeFields){const T=yf(t,E,n);if(!l.contains(T))throw new ot(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);zE(v,T)||v.push(T)}f=new ln(v),g=l.fieldTransforms.filter(E=>f.covers(E.field))}else f=null,g=l.fieldTransforms;return new LP(new Je(h),f,g)}class rh extends Wp{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rh}}function kP(e,t,n,i){const s=e.Qu(1,t,n);qp("Data must be an object, but it was:",s,i);const o=[],l=Je.empty();ss(i,(f,g)=>{const v=Kp(t,f,n);g=Li(g);const E=s.Nu(v);if(g instanceof rh)o.push(v);else{const T=sh(g,E);T!=null&&(o.push(v),l.set(v,T))}});const h=new ln(o);return new kE(l,h,s.fieldTransforms)}function OP(e,t,n,i,s,o){const l=e.Qu(1,t,n),h=[yf(t,i,n)],f=[s];if(o.length%2!=0)throw new ot(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(yf(t,o[T])),f.push(o[T+1]);const g=[],v=Je.empty();for(let T=h.length-1;T>=0;--T)if(!zE(g,h[T])){const O=h[T];let V=f[T];V=Li(V);const z=l.Nu(O);if(V instanceof rh)g.push(O);else{const j=sh(V,z);j!=null&&(g.push(O),v.set(O,j))}}const E=new ln(g);return new kE(v,E,l.fieldTransforms)}function sh(e,t){if(VE(e=Li(e)))return qp("Unsupported field value:",t,e),ME(e,t);if(e instanceof Wp)return function(i,s){if(!OE(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let f=sh(h,s.Lu(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(e,t)}return function(i,s){if((i=Li(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Px(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=ye.fromDate(i);return{timestampValue:_c(s.serializer,o)}}if(i instanceof ye){const o=new ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(s.serializer,o)}}if(i instanceof Gp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wo)return{bytesValue:X0(s.serializer,i._byteString)};if(i instanceof cn){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Np(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Zp)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw h.Bu("VectorValues must only contain numeric values.");return Cp(h.serializer,f)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${Hp(i)}`)}(e,t)}function ME(e,t){const n={};return R0(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ss(e,(i,s)=>{const o=sh(s,t.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function VE(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof Gp||e instanceof wo||e instanceof cn||e instanceof Wp||e instanceof Zp)}function qp(e,t,n){if(!VE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Hp(n);throw i==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function yf(e,t,n){if((t=Li(t))instanceof ih)return t._internalPath;if(typeof t=="string")return Kp(e,t);throw Ec("Field path arguments must be of type string or ",e,!1,void 0,n)}const bP=new RegExp("[~\\*/\\[\\]]");function Kp(e,t,n){if(t.search(bP)>=0)throw Ec(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ih(...t.split("."))._internalPath}catch{throw Ec(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ec(e,t,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${s}`),f+=")"),new ot(K.INVALID_ARGUMENT,h+e+f)}function zE(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,n,i,s,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new DP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(BE("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DP extends UE{data(){return super.data()}}function BE(e,t){return typeof t=="string"?Kp(e,t):t instanceof ih?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ot(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VP{convertValue(t,n="none"){switch(es(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ue(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ts(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw _t()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return ss(t,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(t){var n,i,s;const o=(s=(i=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>ue(l.doubleValue));return new Zp(o)}convertGeoPoint(t){return new Gp(ue(t.latitude),ue(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Tp(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ol(t));default:return null}}convertTimestamp(t){const n=fr(t);return new ye(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Qt.fromString(t);Ut(sE(i));const s=new al(i.get(1),i.get(3)),o=new ut(i.popFirst(5));return s.isEqual(n)||ki(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jE extends UE{constructor(t,n,i,s,o,l){super(t,n,i,s,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(BE("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class zu extends jE{data(t={}){return super.data(t)}}class zP{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ia(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new zu(this._firestore,this._userDataWriter,i.key,i,new Ia(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const f=new zu(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ia(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new zu(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ia(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return h.type!==0&&(g=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:UP(h.type),doc:f,oldIndex:g,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function UP(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(e){e=mr(e,cn);const t=mr(e.firestore,Sl);return SP(nh(t),e._key).then(n=>jP(t,e,n))}class HE extends VP{constructor(t){super(),this.firestore=t}convertBytes(t){return new wo(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function L_(e){e=mr(e,eh);const t=mr(e.firestore,Sl),n=nh(t),i=new HE(t);return MP(e._query),IP(n,e._query).then(s=>new zP(t,i,e,s))}function FP(e,t,n){e=mr(e,cn);const i=mr(e.firestore,Sl),s=FE(e.converter,t,n);return WE(i,[DE(bE(i),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Cn.none())])}function WE(e,t){return function(i,s){const o=new Ai;return i.asyncQueue.enqueueAndForget(async()=>dP(await TP(i),s,o)),o.promise}(nh(e),t)}function jP(e,t,n){const i=n.docs.get(t._key),s=new HE(e);return new jE(e,s,t._key,i,new Ia(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bE(t)}set(t,n,i){this._verifyNotCommitted();const s=Jh(t,this._firestore),o=FE(s.converter,n,i),l=DE(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(l.toMutation(s._key,Cn.none())),this}update(t,n,i,...s){this._verifyNotCommitted();const o=Jh(t,this._firestore);let l;return l=typeof(n=Li(n))=="string"||n instanceof ih?OP(this._dataReader,"WriteBatch.update",o._key,n,i,s):kP(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,Cn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Jh(t,this._firestore);return this._mutations=this._mutations.concat(new Pp(n._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ot(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jh(e,t){if((e=Li(e)).firestore!==t)throw new ot(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(e){return nh(e=mr(e,Sl)),new HP(e,t=>WE(e,t))}(function(t,n=!0){(function(s){Co=s})(R1),hc(new il("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Sl(new W1(i.getProvider("auth-internal")),new q1(i.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ot(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(g.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),so(qg,"4.7.3",t),so(qg,"4.7.3","esm2017")})();const GP={apiKey:"AIzaSyBH--1LKAUn0oBTbVX6W_YOkrXhkBjNork",authDomain:"mapainternos.firebaseapp.com",projectId:"mapainternos",storageBucket:"mapainternos.firebasestorage.app",messagingSenderId:"433575120554",appId:"1:433575120554:web:309328a519284a9f818ad3",measurementId:"G-FW611VFQGL"},ZP=v0(GP),Ms=CP(ZP),$P=`
  body { margin: 0; background-color: #f1f5f9; color: #334155; font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif; }
  
  /* SCROLLBAR */
  .custom-scrollbar::-webkit-scrollbar { width: 6px; }
  .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
  
  /* TOOLTIPS MAPA */
  .leaflet-tooltip.label-mapa {
    background-color: #0f172a !important;
    border: 1px solid #1e293b !important;
    color: #ffffff !important;
    font-weight: 600 !important;
    font-size: 11px !important;
    border-radius: 4px !important;
    padding: 4px 8px !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
  }
  .leaflet-tooltip-bottom:before { border-bottom-color: #0f172a !important; }
  
  /* ANIMACIONES */
  .fade-in { animation: fadeIn 0.4s ease-out; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

  /* --- ESTILOS DE GRFICOS (NUEVO) --- */
  .chart-section { margin-bottom: 25px; }
  .chart-section-title {
      font-size: 11px; 
      font-weight: 800; 
      color: #64748b; 
      text-transform: uppercase; 
      letter-spacing: 0.5px;
      margin-bottom: 12px; 
      display: flex; 
      align-items: center; 
      gap: 8px;
      border-bottom: 1px solid #e2e8f0;
      padding-bottom: 6px;
  }
  
  .chart-card {
      background: white;
      border-radius: 8px;
      padding: 10px 12px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      border: 1px solid #f1f5f9;
      margin-bottom: 8px;
      transition: all 0.2s ease;
  }
  .chart-card:hover { 
      transform: translateX(3px); 
      border-color: #cbd5e1; 
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  /* Diseo: Nombre arriba, Barra abajo */
  .chart-header-row {
      display: flex; 
      justify-content: space-between; 
      align-items: flex-end; 
      margin-bottom: 6px;
  }
  .chart-uni-name {
      font-size: 11px; 
      font-weight: 700; 
      color: #334155; 
      line-height: 1.3;
  }
  .chart-uni-val {
      font-size: 13px; 
      font-weight: 800; 
      color: #0f172a;
      min-width: 30px;
      text-align: right;
  }
  
  .chart-track-modern {
      height: 6px; 
      background: #f1f5f9; 
      border-radius: 10px; 
      overflow: hidden;
      width: 100%;
  }
  .chart-fill-modern {
      height: 100%; 
      border-radius: 10px; 
      transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* KPIs Resumen */
  .kpi-container-modern {
      display: flex; 
      justify-content: space-between; 
      font-size: 11px; 
      color: #64748b; 
      margin-bottom: 8px;
  }
  .kpi-progress-bg {
      width: 100%; 
      height: 10px; 
      background: #f1f5f9; 
      border-radius: 5px; 
      overflow: hidden;
      border: 1px solid #e2e8f0;
  }

  /* MODAL */
  .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(15, 23, 42, 0.7); display: flex; justify-content: center; align-items: center; z-index: 10000; backdrop-filter: blur(4px); }
  .modal-content { background: #ffffff; padding: 0; border-radius: 12px; width: 95%; max-width: 1000px; height: 85vh; border: 1px solid #cbd5e1; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); display: flex; flexDirection: column; overflow: hidden; }
  .modal-header { padding: 15px 20px; background: #ffffff; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; }
  .modal-body { padding: 20px; overflow-y: auto; flex: 1; background: #f8fafc; }
  .modal-footer { padding: 15px 20px; background: #ffffff; border-top: 1px solid #e2e8f0; display: flex; justify-content: flex-end; gap: 10px; }
  
  /* GESTIN MANUAL Y OTROS */
  .edit-card-container { background: #ffffff; border: 1px solid #cbd5e1; border-radius: 10px; padding: 15px; margin-bottom: 15px; transition: all 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
  .uni-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; }
  .uni-item { background: #f8fafc; border: 1px solid #e2e8f0; padding: 8px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }
  .uni-item.active { border-color: #329584; background: #ecfdf5; }
  .input-plaza { background: #ffffff; border: 1px solid #94a3b8; color: #1e293b; padding: 5px; border-radius: 4px; width: 50px; text-align: center; font-weight: bold; font-size: 12px; }
  .input-total { background: #ffffff; border: 2px solid #195c97; color: #195c97; font-size: 14px; width: 80px; padding: 5px; text-align: center; font-weight: 800; border-radius: 6px; }

  /* TIEMPOS */
  .time-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
  .time-card { background: #ffffff; border: 1px solid #e2e8f0; border-radius: 10px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
  .time-field { display: flex; align-items: center; justify-content: space-between; margin-top: 8px; background: #f1f5f9; padding: 5px 8px; border-radius: 6px; }
  .input-meses-card { background: #ffffff; border: 1px solid #cbd5e1; color: #d97706; padding: 4px; border-radius: 4px; width: 70px; text-align: center; font-weight: 700; font-size: 11px; }

  /* ELEMENTOS DE UI */
  .career-select { background-color: #ffffff; color: #195c97; font-weight: 700; border: 2px solid #195c97; padding: 6px 12px; border-radius: 6px; cursor: pointer; }
  .map-select { background-color: #ffffff; color: #334155; border: 1px solid #cbd5e1; padding: 6px; border-radius: 6px; font-size: 12px; cursor: pointer; }
  .btn-modern { border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 700; display: flex; align-items: center; gap: 6px; transition: all 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
  .btn-modern:hover { transform: translateY(-1px); box-shadow: 0 2px 5px rgba(0,0,0,0.15); }
  .btn-close { background: #94a3b8; color: white; }
  .btn-save { background: #329584; color: white; }
  .btn-edit { background: #195c97; color: white; }
  .close-modal-btn { background: transparent; border: none; color: #64748b; font-size: 24px; cursor: pointer; opacity: 0.8; }
  .close-modal-btn:hover { color: #0f172a; opacity: 1; }
  
  .source-footer { position: fixed; bottom: 10px; right: 10px; font-size: 10px; color: rgba(0,0,0,0.4); z-index: 9999; pointer-events: none; background: rgba(255,255,255,0.8); padding: 2px 6px; border-radius: 4px;}
`,Yh=[{id:"TODAS",label:" TODAS LAS CARRERAS"},{id:"MEDICINA",label:"MEDICINA HUMANA"},{id:"ENFERMERIA",label:"ENFERMERA"},{id:"OBSTETRICIA",label:"OBSTETRICIA"},{id:"ODONTOLOGIA",label:"ODONTOLOGA"},{id:"FARMACIA",label:"FARMACIA Y BIOQUMICA"},{id:"NUTRICION",label:"NUTRICIN"},{id:"PSICOLOGIA",label:"PSICOLOGA"},{id:"TRABAJO_SOCIAL",label:"TRABAJO SOCIAL"},{id:"BIOLOGIA",label:"BIOLOGA"},{id:"TM_LABORATORIO",label:"TM: LABORATORIO CLNICO"},{id:"TM_TERAPIA_FISICA",label:"TM: TERAPIA FSICA"},{id:"TM_RADIOLOGIA",label:"TM: RADIOLOGA"},{id:"TM_TERAPIA_OCUPACIONAL",label:"TM: TERAPIA OCUPACIONAL"},{id:"TM_TERAPIA_LENGUAJE",label:"TM: TERAPIA DE LENGUAJE"},{id:"TM_OPTOMETRIA",label:"TM: OPTOMETRA"}],N_=["UNIVERSIDAD NACIONAL MAYOR DE SAN MARCOS","UNIVERSIDAD NACIONAL FEDERICO VILLARREAL","UNIVERSIDAD ENRIQUE GUZMAN Y VALLE","UNIVERSIDAD PERUANA CAYETANO HEREDIA","UNIVERSIDAD SAN MARTIN DE PORRES","UNIVERSIDAD PERUANA UNION","UNIVERSIDAD FEMENINA DEL SAGRADO CORAZON","UNIVERSIDAD CSAR VALLEJO","UNIVERSIDAD PERUANA DE CIENCIAS APLICADAS","UNIVERSIDAD PRIVADA DEL NORTE","UNIVERSIDAD PRIVADA NORBERT WIENER","UNIVERSIDAD SAN JUAN BAUTISTA","UNIVERSIDAD TECNOLGICA DEL PER","UNIVERSIDAD CIENTIFICA DEL SUR","UNIVERSIDAD RICARDO PALMA","UNIVERSIDAD CATOLICA SEDES SAPIENTIAE","UNIVERSIDAD CONTINENTAL","UNIVERSIDAD CIENCIAS Y HUMANIDADES","UNIVERSIDAD MARIA AUXILIADORA","UNIVERSIDAD LE CORDON BLEU","UNIVERSIDAD DE PIURA","UNIVERSIDAD NACIONAL DANIEL ALCIDES CARRION","UNIVERSIDAD NACIONAL HERMILIO VALDIZAN","UNIVERSIDAD NACIONAL DE TRUJILLO","UNIVERSIDAD NACIONAL DEL ALTIPLANO DE PUNO","UNIVERSIDAD FRANKLIN ROOSEVELT","UNIVERSIDAD SAN IGNACIO DE LOYOLA","UNIVERSIDAD JOS FAUSTINO SNCHEZ CARRIN","UNIVERSIDAD DE LIMA"],Bs={"RIS 1":"#329584","RIS 2":"#f59e0b","RIS 3":"#f97316","RIS 4":"#3b82f6","RIS 5":"#ef4444","RIS 6":"#8b5cf6","RIS 7":"#ec4899","SIN RIS":"#94a3b8",HOSPITAL:"#195c97",INSTITUTO:"#6366f1",DEFAULT:"#64748b"},GE={LIMA:"RIS 1","CERCADO DE LIMA":"RIS 1",BRENA:"RIS 2",BREA:"RIS 2","JESUS MARIA":"RIS 2","PUEBLO LIBRE":"RIS 2","MAGDALENA DEL MAR":"RIS 3","SAN MIGUEL":"RIS 3",LINCE:"RIS 4","SAN ISIDRO":"RIS 4",MIRAFLORES:"RIS 4","SAN BORJA":"RIS 4",SURQUILLO:"RIS 4","LA VICTORIA":"RIS 5","SAN LUIS":"RIS 5","EL AGUSTINO":"RIS 5","SANTA ANITA":"RIS 5","SAN JUAN DE LURIGANCHO":"RIS 6",RIMAC:"RIS 7",INDEPENDENCIA:"RIS 7",COMAS:"RIS 7"},k_={claro:{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",name:" Claro"},oscuro:{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",name:" Oscuro"},satelite:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",name:" Satlite"}},qP=Object.keys(GE).sort(),Xh=(e,t="")=>{const n=t.toUpperCase();if(n.startsWith("HOSPITAL"))return Bs.HOSPITAL;if(n.startsWith("INSTITUTO"))return Bs.INSTITUTO;const i=Object.keys(Bs).find(s=>(e||"").toUpperCase().includes(s));return i?Bs[i]:Bs.DEFAULT},O_=e=>e?String(e).toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^A-Z0-9 ]/g,"").trim():"",td=[{id:"r1_1",ris:"RIS 1",nombre:"CS CONDE DE LA VEGA",lat:-12.038921,lng:-77.050464,distrito:"CERCADO DE LIMA"},{id:"r1_2",ris:"RIS 1",nombre:"CS CONTROL DE ZOONOSIS",lat:-12.049798,lng:-77.06224,distrito:"CERCADO DE LIMA"},{id:"r1_3",ris:"RIS 1",nombre:"CS ITS Y VIH RAUL PATRUCCO PUIG",lat:-12.052736,lng:-77.022955,distrito:"LA VICTORIA"},{id:"r1_4",ris:"RIS 1",nombre:"CS JUAN PEREZ CARRANZA",lat:-12.053413,lng:-77.022688,distrito:"LA VICTORIA"},{id:"r1_5",ris:"RIS 1",nombre:"CS MIRONES",lat:-12.050879,lng:-77.067292,distrito:"CERCADO DE LIMA"},{id:"r1_6",ris:"RIS 1",nombre:"CS MIRONES BAJO",lat:-12.050897,lng:-77.067321,distrito:"CERCADO DE LIMA"},{id:"r1_7",ris:"RIS 1",nombre:"CS SAN SEBASTIAN",lat:-12.042331,lng:-77.038673,distrito:"CERCADO DE LIMA"},{id:"r1_8",ris:"RIS 1",nombre:"CS UNIDAD VECINAL N3",lat:-12.051273,lng:-77.08233,distrito:"CERCADO DE LIMA"},{id:"r1_9",ris:"RIS 1",nombre:"CS VILLA MARIA DEL PERPETUO SOCORRO",lat:-12.037751,lng:-77.054586,distrito:"CERCADO DE LIMA"},{id:"r1_10",ris:"RIS 1",nombre:"CSMC KUYANAKUSUN",lat:-12.037769,lng:-77.081481,distrito:"CERCADO DE LIMA"},{id:"r1_11",ris:"RIS 1",nombre:"CSMC MIRONES BAJO",lat:-12.037769,lng:-77.081481,distrito:"CERCADO DE LIMA"},{id:"r1_12",ris:"RIS 1",nombre:"CSMC SAN MARCOS",lat:-12.055392,lng:-77.082387,distrito:"PUEBLO LIBRE"},{id:"r1_13",ris:"RIS 1",nombre:"PS PALERMO",lat:-12.040929,lng:-77.068914,distrito:"CERCADO DE LIMA"},{id:"r1_14",ris:"RIS 1",nombre:"PS RESCATE",lat:-12.041065,lng:-77.062272,distrito:"CERCADO DE LIMA"},{id:"r1_15",ris:"RIS 1",nombre:"PS SANTA ROSA",lat:-12.044848,lng:-77.111266,distrito:"CALLAO"},{id:"r2_1",ris:"RIS 2",nombre:"CS BREA",lat:-12.063762,lng:-77.057869,distrito:"BREA"},{id:"r2_2",ris:"RIS 2",nombre:"CS CHACRA COLORADA",lat:-12.053863,lng:-77.048067,distrito:"BREA"},{id:"r2_3",ris:"RIS 2",nombre:"CS HUACA PANDO",lat:-12.061594,lng:-77.083254,distrito:"PUEBLO LIBRE"},{id:"r2_4",ris:"RIS 2",nombre:"CS JESUS MARIA",lat:-12.077688,lng:-77.053306,distrito:"JESUS MARIA"},{id:"r2_5",ris:"RIS 2",nombre:"CS SAN MIGUEL",lat:-12.081167,lng:-77.09853,distrito:"SAN MIGUEL"},{id:"r2_6",ris:"RIS 2",nombre:"CSM EXCELENCIA SAN MIGUEL",lat:-12.081396,lng:-77.101266,distrito:"SAN MIGUEL"},{id:"r2_7",ris:"RIS 2",nombre:"CSMC HONORIO DELGADO",lat:-12.069174,lng:-77.058068,distrito:"BREA"},{id:"r2_8",ris:"RIS 2",nombre:"CSMC JESUS MARIA",lat:-12.07406,lng:-77.043524,distrito:"JESUS MARIA"},{id:"r2_9",ris:"RIS 2",nombre:"CSMC MAGDALENA",lat:-12.088394,lng:-77.063122,distrito:"MAGDALENA DEL MAR"},{id:"r2_10",ris:"RIS 2",nombre:"CSMI MAGDALENA",lat:-12.088383,lng:-77.06876,distrito:"MAGDALENA DEL MAR"},{id:"r2_11",ris:"RIS 2",nombre:"LABORATORIO REFERENCIAL",lat:-12.088656,lng:-77.067946,distrito:"MAGDALENA DEL MAR"},{id:"r3_1",ris:"RIS 3",nombre:"CS LINCE",lat:-12.081669,lng:-77.031994,distrito:"LINCE"},{id:"r3_2",ris:"RIS 3",nombre:"CS SAM ATANACIO DE PEDREGAL",lat:-12.1209,lng:-76.998887,distrito:"SURQUILLO"},{id:"r3_3",ris:"RIS 3",nombre:"CS SAN ISIDRO",lat:-12.106575,lng:-77.05512,distrito:"SAN ISIDRO"},{id:"r3_4",ris:"RIS 3",nombre:"CS SANTA CRUZ MIRAFLORES",lat:-12.118628,lng:-77.036754,distrito:"MIRAFLORES"},{id:"r3_5",ris:"RIS 3",nombre:"CS VILLA VICTORIA PORVENIR",lat:-12.10857,lng:-77.012094,distrito:"SURQUILLO"},{id:"r3_6",ris:"RIS 3",nombre:"CSMC SAN BORJA",lat:-12.108779,lng:-77.00647,distrito:"SAN BORJA"},{id:"r3_7",ris:"RIS 3",nombre:"CSMC SAN ISIDRO",lat:-12.107595,lng:-77.050509,distrito:"SAN ISIDRO"},{id:"r3_8",ris:"RIS 3",nombre:"CSMC SURQUILLO",lat:-12.118613,lng:-77.019213,distrito:"SURQUILLO"},{id:"r3_9",ris:"RIS 3",nombre:"CSMI SURQUILLO",lat:-12.118262,lng:-77.022244,distrito:"SURQUILLO"},{id:"r4_1",ris:"RIS 4",nombre:"CS EL PINO",lat:-12.066881,lng:-76.998619,distrito:"EL AGUSTINO"},{id:"r4_2",ris:"RIS 4",nombre:"CS MAX ARIAS SCHREIBER",lat:-12.059194,lng:-77.032271,distrito:"LA VICTORIA"},{id:"r4_3",ris:"RIS 4",nombre:"CS SAN COSME",lat:-12.061765,lng:-77.006846,distrito:"LA VICTORIA"},{id:"r4_4",ris:"RIS 4",nombre:"CS SAN LUIS",lat:-12.07445,lng:-76.997255,distrito:"SAN LUIS"},{id:"r4_5",ris:"RIS 4",nombre:"CS TODOS LOS SANTOS SAN BORJA",lat:-12.101842,lng:-76.993428,distrito:"SAN BORJA"},{id:"r4_6",ris:"RIS 4",nombre:"CSMC LA VICTORIA",lat:-12.071107,lng:-77.013469,distrito:"LA VICTORIA"},{id:"r4_7",ris:"RIS 4",nombre:"CSMC SAN COSME",lat:-12.061978,lng:-77.005306,distrito:"LA VICTORIA"},{id:"r4_8",ris:"RIS 4",nombre:"CSMI EL PORVENIR",lat:-12.067469,lng:-77.020826,distrito:"LA VICTORIA"},{id:"r4_9",ris:"RIS 4",nombre:"PS EL PINO",lat:-12.06586,lng:-77.002467,distrito:"EL AGUSTINO"},{id:"r4_10",ris:"RIS 4",nombre:"PS JARDN ROSA DE SANTA MARA",lat:-12.044257,lng:-77.01443,distrito:"EL AGUSTINO"},{id:"r4_11",ris:"RIS 4",nombre:"PS SAN JUAN MASIAS",lat:-12.084071,lng:-77.00246,distrito:"SAN LUIS"},{id:"r5_1",ris:"RIS 5",nombre:"CS CAJA DE AGUA",lat:-12.026599,lng:-77.014879,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_2",ris:"RIS 5",nombre:"CS CAMPOY",lat:-12.016004,lng:-76.965389,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_3",ris:"RIS 5",nombre:"CS CHACARILLA DE OTERO",lat:-12.020881,lng:-77.006867,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_4",ris:"RIS 5",nombre:"CS DANIEL ALCIDES CARRION",lat:-12.023003,lng:-76.977023,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_5",ris:"RIS 5",nombre:"CS LA HUAYRONA",lat:-11.993822,lng:-77.00658,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_6",ris:"RIS 5",nombre:"CS LA LIBERTAD",lat:-12.003994,lng:-76.995829,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_7",ris:"RIS 5",nombre:"CS MANGOMARCA",lat:-12.010634,lng:-76.979585,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_8",ris:"RIS 5",nombre:"CS SAN FERNANDO",lat:-12.0023,lng:-77.010607,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_9",ris:"RIS 5",nombre:"CS SANTA FE DE TOTORITA",lat:-11.996876,lng:-76.996041,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_10",ris:"RIS 5",nombre:"CS SANTA ROSA DE LIMA",lat:-12.005101,lng:-77.016472,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_11",ris:"RIS 5",nombre:"CS ZARATE",lat:-12.022964,lng:-76.994557,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_12",ris:"RIS 5",nombre:"CSMC JAVIER MARIATEGUI",lat:-12.017147,lng:-77.000884,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_13",ris:"RIS 5",nombre:"CSMC MANGOMARCA",lat:-12.019114,lng:-76.984995,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_14",ris:"RIS 5",nombre:"CSMC VILLA CAMPOY",lat:-12.007232,lng:-76.965202,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_15",ris:"RIS 5",nombre:"PS 15 DE ENERO",lat:-12.010915,lng:-77.01859,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r5_16",ris:"RIS 5",nombre:"PS AZCARRUNZ ALTO",lat:-12.017052,lng:-77.000957,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_1",ris:"RIS 6",nombre:"CS BAYOVAR",lat:-11.951986,lng:-76.991581,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_2",ris:"RIS 6",nombre:"CS GANIMENDES",lat:-11.983037,lng:-77.011447,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_3",ris:"RIS 6",nombre:"CS HUASCAR II",lat:-11.966623,lng:-77.010997,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_4",ris:"RIS 6",nombre:"CS HUASCAR XV",lat:-11.955447,lng:-77.002372,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_5",ris:"RIS 6",nombre:"CS MEDALLA MILAGROSA",lat:-11.976887,lng:-77.006001,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_6",ris:"RIS 6",nombre:"CS SAN HILARION",lat:-11.995438,lng:-77.01583,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_7",ris:"RIS 6",nombre:"CSMC JAIME ZUBIETA",lat:-11.962834,lng:-76.98873,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_8",ris:"RIS 6",nombre:"CSMC NUEVO PER",lat:-12.0029,lng:-77.018166,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_9",ris:"RIS 6",nombre:"PS AYACUCHO",lat:-11.987161,lng:-77.017107,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_10",ris:"RIS 6",nombre:"PS PROYECTOS ESPECIALES",lat:-11.955769,lng:-76.992456,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r6_11",ris:"RIS 6",nombre:"PS SAGRADA FAMILIA",lat:-11.976341,lng:-76.988859,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_1",ris:"RIS 7",nombre:"CS 10 DE OCTUBRE",lat:-11.944904,lng:-76.987643,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_2",ris:"RIS 7",nombre:"CS CRUZ DE MOTUPE",lat:-11.940364,lng:-76.974795,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_3",ris:"RIS 7",nombre:"CS ENRIQUE MONTENEGRO",lat:-11.937029,lng:-76.971134,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_4",ris:"RIS 7",nombre:"CS JAIME ZUBIETA",lat:-11.963164,lng:-76.988935,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_5",ris:"RIS 7",nombre:"CS JOSE CARLOS MARIATEGUI",lat:-11.94384,lng:-76.984472,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_6",ris:"RIS 7",nombre:"CS JUAN PABLO II",lat:-11.952272,lng:-77.077927,distrito:"SAN MARTIN DE PORRES"},{id:"r7_7",ris:"RIS 7",nombre:"CS SANTA MARIA",lat:-11.964929,lng:-76.975984,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_8",ris:"RIS 7",nombre:"PS CESAR VALLEJO",lat:-11.939452,lng:-76.965759,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_9",ris:"RIS 7",nombre:"PS JOSE CARLOS MARIATEGUI V ETAPA",lat:-11.931092,lng:-76.990411,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_10",ris:"RIS 7",nombre:"PS MARISCAL CACERES",lat:-11.949206,lng:-76.98108,distrito:"SAN JUAN DE LURIGANCHO"},{id:"r7_11",ris:"RIS 7",nombre:"PS TUPAC AMARU II",lat:-11.955745,lng:-76.975792,distrito:"SAN JUAN DE LURIGANCHO"},{id:"h_1",ris:"SIN RIS",nombre:"HOSPITAL NACIONAL DOS DE MAYO",lat:-12.056369,lng:-77.016048,distrito:"CERCADO DE LIMA",tipo:"HOSPITAL"},{id:"h_2",ris:"SIN RIS",nombre:"HOSPITAL NACIONAL ARZOBISPO LOAYZA",lat:-12.049516,lng:-77.042667,distrito:"CERCADO DE LIMA",tipo:"HOSPITAL"},{id:"h_3",ris:"SIN RIS",nombre:"HOSPITAL SAN JUAN DE LURIGANCHO",lat:-11.966064,lng:-77.003482,distrito:"SAN JUAN DE LURIGANCHO",tipo:"HOSPITAL"},{id:"h_4",ris:"SIN RIS",nombre:"HOSPITAL NACIONAL SAN BARTOLOME",lat:-12.049583,lng:-77.04211,distrito:"CERCADO DE LIMA",tipo:"HOSPITAL"},{id:"h_5",ris:"SIN RIS",nombre:"HOSPITAL DE EMERGENCIAS JOSE CASIMIRO ULLOA",lat:-12.127835,lng:-77.017796,distrito:"MIRAFLORES",tipo:"HOSPITAL"},{id:"h_6",ris:"SIN RIS",nombre:"HOSPITAL SANTA ROSA",lat:-12.071516,lng:-77.06107,distrito:"PUEBLO LIBRE",tipo:"HOSPITAL"},{id:"h_7",ris:"SIN RIS",nombre:"HOSPITAL VICTOR LARCO HERRERA",lat:-12.097315,lng:-77.064832,distrito:"MAGDALENA DEL MAR",tipo:"HOSPITAL"},{id:"h_8",ris:"SIN RIS",nombre:"HOSPITAL DE EMERGENCIAS PEDITRICAS",lat:-12.058125,lng:-77.021607,distrito:"LA VICTORIA",tipo:"HOSPITAL"},{id:"i_1",ris:"SIN RIS",nombre:"INSTITUTO NACIONAL DE ENFERMEDADES NEOPLSICAS",lat:-12.11232,lng:-76.998266,distrito:"SAN BORJA",tipo:"INSTITUTO"},{id:"i_2",ris:"SIN RIS",nombre:"INSTITUTO NACIONAL DE SALUD DEL NIO-BREA",lat:-12.064247,lng:-77.04572,distrito:"BREA",tipo:"INSTITUTO"},{id:"i_3",ris:"SIN RIS",nombre:"INSTITUTO NACIONAL DE SALUD DEL NIO-SAN BORJA",lat:-12.085823,lng:-76.992491,distrito:"SAN BORJA",tipo:"INSTITUTO"},{id:"i_4",ris:"SIN RIS",nombre:"INSTITUTO NACIONAL MATERNO PERINATAL",lat:-12.052537,lng:-77.022163,distrito:"CERCADO DE LIMA",tipo:"INSTITUTO"},{id:"i_5",ris:"SIN RIS",nombre:"INSTITUTO NACIONAL DE CIENCIAS NEUROLGICAS",lat:-12.045887,lng:-77.015878,distrito:"CERCADO DE LIMA",tipo:"INSTITUTO"}],KP=({center:e,zoom:t})=>{const n=rA();return $.useEffect(()=>{n.flyTo(e,t,{duration:1.5})},[e,t,n]),null},QP=({data:e,tiempos:t,selectedCareer:n})=>{const i=e.filter(x=>!x.nombre.startsWith("HOSPITAL")&&!x.nombre.startsWith("INSTITUTO")),s=e.filter(x=>x.nombre.startsWith("HOSPITAL")||x.nombre.startsWith("INSTITUTO")),o=i.reduce((x,I)=>x+I.capacidadTotal,0),l=i.reduce((x,I)=>x+I.cantidad,0),h=o>0?l/o*100:0,f=s.reduce((x,I)=>x+I.capacidadTotal,0),g=s.reduce((x,I)=>x+I.cantidad,0),v=f>0?g/f*100:0,E=x=>{const I={};return x.forEach(k=>{k.desglose&&k.desglose.forEach(G=>{let J=G.universidad;n==="TODAS"&&(J=J.split(" (")[0].trim()),I[J]=(I[J]||0)+G.cantidad})}),Object.entries(I).sort((k,G)=>G[1]-k[1])},T=$r.useMemo(()=>E(i),[i,n]),O=$r.useMemo(()=>E(s),[s,n]),V=T.length>0?T[0][1]:1,z=O.length>0?O[0][1]:1;if(e.length===0)return D.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#94a3b8",fontSize:"13px"},children:"No hay datos para mostrar."});const j=(x,I,k,G,J,tt)=>D.jsxs("div",{className:"chart-section",children:[D.jsxs("div",{className:"chart-section-title",children:[D.jsx("i",{className:`${tt}`,style:{fontSize:"12px"}})," ",x]}),I.length===0?D.jsx("div",{style:{fontSize:"11px",color:"#94a3b8",fontStyle:"italic",padding:"10px",textAlign:"center",background:"#f8fafc",borderRadius:"8px"},children:"Sin asignaciones registradas."}):I.map(([C,S])=>D.jsxs("div",{className:"chart-card",children:[D.jsxs("div",{className:"chart-header-row",children:[D.jsx("span",{className:"chart-uni-name",children:C}),D.jsx("span",{className:"chart-uni-val",children:S})]}),D.jsx("div",{className:"chart-track-modern",children:D.jsx("div",{className:"chart-fill-modern",style:{width:`${S/k*100}%`,background:`linear-gradient(90deg, ${G}, ${J})`}})})]},C))]});return D.jsxs("div",{className:"fade-in",style:{paddingRight:"5px"},children:[D.jsx("h4",{style:{color:"#0f172a",fontSize:"14px",fontWeight:"800",marginBottom:"20px",letterSpacing:"-0.5px"},children:"Resumen de Adjudicacin"}),D.jsxs("div",{style:{marginBottom:"20px",background:"#ffffff",padding:"15px",borderRadius:"10px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.05)"},children:[D.jsxs("div",{style:{fontSize:"12px",fontWeight:"700",color:"#329584",marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[D.jsx("i",{className:"fas fa-clinic-medical"})," PRIMER NIVEL"]}),D.jsxs("div",{className:"kpi-container-modern",children:[D.jsxs("span",{children:["Adjudicado: ",D.jsx("b",{style:{color:"#0f172a"},children:l})]}),D.jsxs("span",{children:["Total: ",D.jsx("b",{style:{color:"#0f172a"},children:o})]})]}),D.jsx("div",{className:"kpi-progress-bg",children:D.jsx("div",{style:{width:`${h}%`,height:"100%",background:"linear-gradient(90deg, #329584, #4ade80)",transition:"width 0.8s ease"}})}),D.jsxs("div",{style:{textAlign:"right",fontSize:"10px",color:"#64748b",marginTop:"5px",fontWeight:"600"},children:[h.toFixed(1),"% Ocupado"]})]}),D.jsxs("div",{style:{marginBottom:"30px",background:"#ffffff",padding:"15px",borderRadius:"10px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.05)"},children:[D.jsxs("div",{style:{fontSize:"12px",fontWeight:"700",color:"#195c97",marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[D.jsx("i",{className:"fas fa-hospital"})," HOSPITALES / INST."]}),D.jsxs("div",{className:"kpi-container-modern",children:[D.jsxs("span",{children:["Adjudicado: ",D.jsx("b",{style:{color:"#0f172a"},children:g})]}),D.jsxs("span",{children:["Total: ",D.jsx("b",{style:{color:"#0f172a"},children:f})]})]}),D.jsx("div",{className:"kpi-progress-bg",children:D.jsx("div",{style:{width:`${v}%`,height:"100%",background:"linear-gradient(90deg, #195c97, #3b82f6)",transition:"width 0.8s ease"}})}),D.jsxs("div",{style:{textAlign:"right",fontSize:"10px",color:"#64748b",marginTop:"5px",fontWeight:"600"},children:[v.toFixed(1),"% Ocupado"]})]}),j("Ranking Primer Nivel",T,V,"#329584","#4ade80","fas fa-chart-bar"),j("Ranking Hospitalario",O,z,"#195c97","#60a5fa","fas fa-chart-line")]})},JP=()=>{var li;II(),$.useEffect(()=>{const F=document.createElement("style");return F.innerHTML=$P,document.head.appendChild(F),()=>{document.head.removeChild(F)}},[]);const[e,t]=$.useState(null),[n,i]=$.useState([-12.05,-77.06]),[s,o]=$.useState(12),[l,h]=$.useState("claro"),[f,g]=$.useState("lista"),[v,E]=$.useState("MEDICINA"),[T,O]=$.useState("todos"),[V,z]=$.useState("todos"),[j,x]=$.useState(""),[I,k]=$.useState([]),[G,J]=$.useState(null),[tt,C]=$.useState(!1),[S,A]=$.useState(null),[P,b]=$.useState({}),[M,R]=$.useState(0),[Wt,Ln]=$.useState(""),[oe,Ee]=$.useState(!1),[Z,lt]=$.useState({}),[X,dt]=$.useState("todos");$.useEffect(()=>{fetch("https://raw.githubusercontent.com/yurivilc/peru-geojson/master/lima_callao_distritos.geojson").then(F=>F.json()).then(F=>t(F)).catch(console.error)},[]),$.useEffect(()=>{(async()=>{v==="TODAS"?await St():(await bt(v),await Tt(v))})()},[v]);const vt=F=>{const nt=F.properties.NOMBDIST||F.properties.NOMB_DIST||"",ct=O_(nt),Mt=GE[ct]||"DEFAULT",ht=Bs[Mt],Nt=V==="todos"||ct===O_(V);return{fillColor:ht,weight:Mt!=="DEFAULT"?1:.5,opacity:1,color:"white",fillOpacity:Nt?.5:.1}},St=async()=>{let F={};td.forEach(nt=>{F[nt.nombre]={...nt,capacidadTotal:0,cantidad:0,desglose:[],disponible:0}});for(const nt of Yh)if(nt.id!=="TODAS")try{(await L_(Kh(Ms,`adjudicacion_2026_${nt.id}`))).docs.forEach(Mt=>{const ht=Mt.data();F[ht.nombre]&&(F[ht.nombre].capacidadTotal+=ht.capacidadTotal||0,F[ht.nombre].cantidad+=ht.cantidad||0,F[ht.nombre].disponible+=ht.disponible||0,ht.desglose&&ht.desglose.forEach(Nt=>{F[ht.nombre].desglose.push({universidad:`${Nt.universidad} (${nt.label.substring(0,3)})`,cantidad:Nt.cantidad})}))})}catch{}k(Object.values(F)),lt({})},bt=async F=>{try{const nt=`adjudicacion_2026_${F}`,Mt=(await L_(Kh(Ms,nt))).docs.map(ae=>({id:ae.id,...ae.data()})),ht={};Mt.forEach(ae=>{ht[ae.nombre]=ae});let Nt=td.map(ae=>{const Sr=ht[ae.nombre];return Sr?{...ae,...Sr}:{...ae,capacidadTotal:0,desglose:[],disponible:0,cantidad:0}});k(Nt)}catch(nt){console.error(nt),k(td.map(ct=>({...ct,capacidadTotal:0,desglose:[],disponible:0,cantidad:0})))}},Tt=async F=>{try{const nt=Qh(Ms,"config_tiempos_2026",F),ct=await BP(nt);ct.exists()?lt(ct.data()):lt({})}catch(nt){console.error("Error loading times:",nt)}},mt=async()=>{try{await FP(Qh(Ms,"config_tiempos_2026",v),Z),Ee(!1),alert(" Tiempos guardados.")}catch(F){console.error(F),alert("Error al guardar.")}},ie=(F,nt,ct)=>{lt(Mt=>({...Mt,[F]:{...Mt[F],[nt]:ct}}))},pn=F=>{A(F.nombre),R(F.capacidadTotal||0);const nt={};F.desglose&&F.desglose.forEach(ct=>nt[ct.universidad]=ct.cantidad),b(nt)},as=(F,nt)=>{b(ct=>({...ct,[F]:parseInt(nt)||0}))},Wn=async()=>{if(!S)return;const F=I.find(ht=>ht.nombre===S);if(!F)return;const nt=[];let ct=0;if(Object.entries(P).forEach(([ht,Nt])=>{Nt>0&&(nt.push({universidad:ht,cantidad:Nt}),ct+=Nt)}),ct>M&&!confirm(` Cuidado: Asignaste ${ct}, pero la oferta es ${M}. Guardar?`))return;const Mt={...F,capacidadTotal:M,desglose:nt,cantidad:ct,disponible:M-ct};try{const ht=`adjudicacion_2026_${v}`;await WP(Ms).set(Qh(Kh(Ms,ht),S.replace(/[\/\s\.]/g,"_")),Mt).commit(),k(Nt=>Nt.map(ae=>ae.nombre===S?Mt:ae)),A(null)}catch(ht){console.error(ht),alert("Error al guardar.")}},be=I.map(F=>F).filter(F=>{const nt=V==="todos"||F.distrito&&F.distrito===V,ct=j===""||F.nombre.includes(j.toUpperCase());let Mt=!0;T==="HOSP"?Mt=F.ris==="SIN RIS":T!=="todos"&&(Mt=F.ris===T);let ht=!0;return X==="libres"&&(ht=F.disponible>0),X==="ocupados"&&(ht=F.cantidad>0),nt&&ct&&Mt&&ht}).sort((F,nt)=>nt.capacidadTotal-F.capacidadTotal),Nn=I.filter(F=>F.nombre.includes(Wt.toUpperCase())),ri=be.reduce((F,nt)=>F+nt.capacidadTotal,0),Er=be.reduce((F,nt)=>F+nt.disponible,0),si=be.filter(F=>F.nombre.startsWith("HOSPITAL")||F.nombre.startsWith("INSTITUTO")),wr=be.filter(F=>!F.nombre.startsWith("HOSPITAL")&&!F.nombre.startsWith("INSTITUTO")),Tr=si.reduce((F,nt)=>F+nt.capacidadTotal,0),oi=wr.reduce((F,nt)=>F+nt.capacidadTotal,0),ls=si.reduce((F,nt)=>F+nt.disponible,0),ai=(F,nt,ct)=>{G===F?J(null):(J(F),nt!==0&&nt!==-12.046374&&(i([nt,ct]),o(16)))};return D.jsxs("div",{className:"dashboard-container",style:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"#f8fafc",color:"#1e293b"},children:[D.jsxs("div",{style:{background:"#ffffff",padding:"0 24px",height:"65px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #e2e8f0",zIndex:50,boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[D.jsx("div",{style:{background:"#195c97",width:"36px",height:"36px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:D.jsx("i",{className:"fas fa-calendar-check",style:{fontSize:"18px",color:"white"}})}),D.jsxs("div",{children:[D.jsxs("h1",{style:{margin:0,fontSize:"18px",fontWeight:"800",color:"#195c97",letterSpacing:"-0.5px"},children:["ADJUDICACIN ",D.jsx("span",{style:{color:"#329584"},children:"2026"})]}),D.jsx("p",{style:{margin:"0",fontSize:"10px",opacity:.6,fontWeight:"600"},children:"GESTIN DE PLAZAS - SERUMS"})]})]}),D.jsx("div",{style:{display:"flex",gap:"10px"},children:D.jsx("select",{value:l,onChange:F=>h(F.target.value),className:"map-select",children:Object.entries(k_).map(([F,nt])=>D.jsx("option",{value:F,children:nt.name},F))})})]}),D.jsxs("div",{style:{padding:"12px 24px",background:"#f8fafc",borderBottom:"1px solid #cbd5e1",display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",marginRight:"15px"},children:[D.jsx("span",{style:{fontSize:"12px",color:"#195c97",marginRight:"8px",fontWeight:"700"},children:"CARRERA:"}),D.jsx("select",{value:v,onChange:F=>E(F.target.value),className:"career-select",style:{width:"220px"},children:Yh.map(F=>D.jsxs("option",{value:F.id,children:[" ",F.label]},F.id))})]}),D.jsx("div",{style:{position:"relative",flex:1},children:D.jsx("input",{type:"text",placeholder:"Buscar Sede...",value:j,onChange:F=>x(F.target.value.toUpperCase()),style:{width:"100%",padding:"8px 8px 8px 12px",borderRadius:"6px",border:"1px solid #cbd5e1",background:"#ffffff",color:"#1e293b",fontSize:"13px",boxSizing:"border-box"}})}),D.jsxs("select",{value:X,onChange:F=>dt(F.target.value),style:{width:"130px",padding:"8px",borderRadius:"6px",border:"1px solid #cbd5e1",background:"#ffffff",color:"#334155",fontSize:"13px"},children:[D.jsx("option",{value:"todos",children:" Todos"}),D.jsx("option",{value:"libres",children:" Libres"}),D.jsx("option",{value:"ocupados",children:" Ocupados"})]}),D.jsxs("select",{value:V,onChange:F=>z(F.target.value),style:{width:"160px",padding:"8px",borderRadius:"6px",border:"1px solid #cbd5e1",background:"#ffffff",color:"#334155",fontSize:"13px"},children:[" ",D.jsx("option",{value:"todos",children:" Todos los Distritos"})," ",qP.map(F=>D.jsx("option",{value:F,children:F},F))," "]}),D.jsx("button",{onClick:()=>O(T==="HOSP"?"todos":"HOSP"),className:"btn-modern",style:{background:T==="HOSP"?"#f43f5e":"#ffffff",color:T==="HOSP"?"white":"#f43f5e",border:"1px solid #f43f5e"},children:" HOSP/INST"})]}),oe&&D.jsx("div",{className:"modal-overlay",children:D.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",height:"80vh"},children:[D.jsxs("div",{className:"modal-header",children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[D.jsx("i",{className:"fas fa-clock",style:{fontSize:"20px"}}),D.jsx("h3",{style:{margin:0},children:"Tiempos de Rotacin (Meses)"})]}),D.jsx("button",{onClick:()=>Ee(!1),className:"close-modal-btn",children:""})]}),D.jsx("div",{className:"modal-body custom-scrollbar",style:{padding:"20px",background:"#f8fafc"},children:D.jsx("div",{className:"time-grid",children:N_.map(F=>{var nt,ct;return D.jsxs("div",{className:"time-card",children:[D.jsx("div",{style:{fontSize:"12px",fontWeight:"700",color:"#334155",marginBottom:"10px",borderBottom:"1px solid #e2e8f0",paddingBottom:"5px",minHeight:"32px",display:"flex",alignItems:"center"},children:F}),D.jsxs("div",{className:"time-field",children:[D.jsx("span",{className:"time-icon",children:""})," ",D.jsx("span",{style:{fontSize:"11px",color:"#329584"},children:"Primer Nivel"}),D.jsx("input",{type:"text",className:"input-meses-card",placeholder:"-",value:((nt=Z[F])==null?void 0:nt.mesesPrimerNivel)||"",onChange:Mt=>ie(F,"mesesPrimerNivel",Mt.target.value)})]}),D.jsxs("div",{className:"time-field",children:[D.jsx("span",{className:"time-icon",children:""})," ",D.jsx("span",{style:{fontSize:"11px",color:"#195c97"},children:"Hospital"}),D.jsx("input",{type:"text",className:"input-meses-card",placeholder:"-",value:((ct=Z[F])==null?void 0:ct.mesesHospital)||"",onChange:Mt=>ie(F,"mesesHospital",Mt.target.value)})]})]},F)})})}),D.jsx("div",{className:"modal-footer",children:D.jsx("button",{onClick:mt,className:"btn-modern btn-save",children:"GUARDAR CAMBIOS"})})]})}),tt&&D.jsx("div",{className:"modal-overlay",children:D.jsxs("div",{className:"modal-content",children:[D.jsxs("div",{className:"modal-header",children:[D.jsxs("h3",{style:{margin:0},children:["Gestin Manual: ",(li=Yh.find(F=>F.id===v))==null?void 0:li.label]}),D.jsxs("div",{style:{display:"flex",gap:"10px"},children:[D.jsx("input",{type:"text",placeholder:"Filtrar lista...",value:Wt,onChange:F=>Ln(F.target.value),className:"input-plaza",style:{width:"200px",textAlign:"left",border:"1px solid #e2e8f0"}}),D.jsx("button",{onClick:()=>C(!1),className:"close-modal-btn",children:""})]})]}),D.jsx("div",{className:"modal-body custom-scrollbar",children:Nn.map(F=>D.jsxs("div",{className:"edit-card-container",children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px",alignItems:"center"},children:[D.jsxs("div",{style:{flex:1},children:[D.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[D.jsx("i",{className:`fas ${F.nombre.startsWith("CS")?"fa-clinic-medical":"fa-hospital"}`,style:{color:Xh(F.ris,F.tipo)}}),D.jsx("span",{style:{fontWeight:"700",color:"#1e293b",fontSize:"14px"},children:F.nombre})]}),D.jsxs("div",{style:{fontSize:"11px",color:"#64748b",marginTop:"4px",marginLeft:"26px"},children:["Ofertado: ",D.jsx("b",{style:{color:"#1e293b"},children:F.capacidadTotal})," | Libre: ",D.jsx("b",{style:{color:F.disponible>0?"#329584":"#ef4444"},children:F.disponible})]})]}),D.jsx("div",{style:{display:"flex",gap:"10px"},children:S===F.nombre?D.jsxs(D.Fragment,{children:[D.jsx("button",{onClick:()=>A(null),className:"btn-modern btn-close",children:"CERRAR"}),D.jsx("button",{onClick:Wn,className:"btn-modern btn-save",children:"GUARDAR"})]}):D.jsx("button",{onClick:()=>pn(F),className:"btn-modern btn-edit",children:"EDITAR"})})]}),S===F.nombre?D.jsxs("div",{style:{background:"#f1f5f9",padding:"20px",borderRadius:"10px",border:"1px solid #cbd5e1",animation:"fadeIn 0.3s"},children:[D.jsxs("div",{style:{marginBottom:"20px",display:"flex",alignItems:"center",gap:"15px",borderBottom:"1px solid #e2e8f0",paddingBottom:"15px"},children:[D.jsx("label",{style:{fontSize:"13px",fontWeight:"800",color:"#329584",textTransform:"uppercase"},children:"Capacidad Total:"}),D.jsx("input",{type:"number",min:"0",className:"input-total",value:M,onChange:nt=>R(parseInt(nt.target.value)||0)})]}),D.jsx("div",{className:"uni-grid",children:N_.map(nt=>D.jsxs("div",{className:`uni-item ${P[nt]>0?"active":""}`,children:[D.jsx("span",{className:"uni-label",title:nt,style:{fontSize:"10px",fontWeight:"600"},children:nt}),D.jsx("input",{type:"number",min:"0",className:"input-plaza",value:P[nt]||"",onChange:ct=>as(nt,ct.target.value),placeholder:"0"})]},nt))})]}):D.jsx("div",{style:{fontSize:"10px",color:"#64748b",display:"flex",flexWrap:"wrap",gap:"6px",paddingLeft:"24px",marginTop:"5px"},children:F.desglose&&F.desglose.length>0?F.desglose.map(nt=>D.jsxs("span",{style:{background:"#e0f2fe",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bae6fd",color:"#0369a1",display:"flex",alignItems:"center",gap:"5px"},children:[D.jsx("span",{style:{maxWidth:"200px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:nt.universidad}),D.jsx("b",{style:{color:"#0c4a6e",background:"#bae6fd",padding:"1px 6px",borderRadius:"3px"},children:nt.cantidad})]},nt.universidad)):D.jsx("span",{style:{opacity:.5,fontStyle:"italic"},children:"Sin asignaciones registradas."})})]},F.nombre))})]})}),D.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[D.jsx("div",{style:{flex:3,position:"relative",borderRight:"1px solid #cbd5e1"},children:D.jsxs(lA,{center:n,zoom:s,style:{height:"100%",width:"100%",background:"#e2e8f0"},zoomControl:!1,children:[D.jsx(KP,{center:n,zoom:s}),D.jsx(uA,{url:k_[l].url,attribution:" CARTO"}),e&&D.jsx(oA,{data:e,style:vt}),be.map((F,nt)=>{if(F.sinCoordenadas)return null;const ct=G===F.nombre,Mt=Xh(F.ris,F.tipo);return D.jsxs(sA,{center:[F.lat,F.lng],pathOptions:{color:ct?"#195c97":Mt,fillColor:ct?"white":Mt,fillOpacity:ct?.5:.8,weight:ct?4:0,dashArray:ct?"4,4":""},radius:ct?12:6,eventHandlers:{click:()=>ai(F.nombre,F.lat,F.lng)},children:[ct&&D.jsxs(Mg,{direction:"top",offset:[0,-10],opacity:1,permanent:!0,className:"label-mapa",children:[" ",F.nombre," (Libres: ",F.disponible,") "]}),!ct&&D.jsxs(Mg,{direction:"top",offset:[0,-5],opacity:1,children:[" ",F.nombre,": ",F.disponible," libres "]})]},nt)})]})}),D.jsxs("div",{style:{flex:1,minWidth:"340px",background:"#ffffff",display:"flex",flexDirection:"column",boxShadow:"-5px 0 15px rgba(0,0,0,0.05)",zIndex:10},children:[D.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #e2e8f0",background:"#f8fafc"},children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px",gap:"10px"},children:[D.jsxs("div",{style:{background:"#195c97",padding:"15px",borderRadius:"10px",flex:1,color:"white",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[D.jsxs("div",{style:{textAlign:"center"},children:[D.jsx("div",{style:{fontSize:"10px",fontWeight:"800",textTransform:"uppercase",opacity:.8,letterSpacing:"1px"},children:"Total Ofertado"}),D.jsx("div",{style:{fontSize:"24px",fontWeight:"900",marginTop:"5px",marginBottom:"8px"},children:ri})]}),D.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"8px",display:"flex",flexDirection:"column",gap:"4px"},children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px"},children:[D.jsxs("span",{style:{opacity:.9},children:[D.jsx("i",{className:"fas fa-hospital"})," Hosp/Inst:"]}),D.jsx("span",{style:{fontWeight:"bold"},children:Tr})]}),D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px"},children:[D.jsxs("span",{style:{opacity:.9},children:[D.jsx("i",{className:"fas fa-clinic-medical"})," 1 Nivel:"]}),D.jsx("span",{style:{fontWeight:"bold"},children:oi})]})]})]}),D.jsxs("div",{style:{background:"#329584",padding:"15px",borderRadius:"10px",flex:1,color:"white",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[D.jsxs("div",{style:{textAlign:"center"},children:[D.jsx("div",{style:{fontSize:"10px",fontWeight:"800",textTransform:"uppercase",opacity:.8,letterSpacing:"1px"},children:"Disponible Total"}),D.jsx("div",{style:{fontSize:"24px",fontWeight:"900",marginTop:"5px",marginBottom:"8px"},children:Er})]}),D.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"8px",display:"flex",flexDirection:"column",gap:"4px"},children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px"},children:[D.jsxs("span",{style:{opacity:.9},children:[D.jsx("i",{className:"fas fa-hospital"})," Hosp/Inst:"]}),D.jsx("span",{style:{fontWeight:"bold"},children:ls})]}),D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px"},children:[D.jsxs("span",{style:{opacity:.9},children:[D.jsx("i",{className:"fas fa-clinic-medical"})," 1 Nivel:"]}),D.jsx("span",{style:{fontWeight:"bold"},children:oi})]})]})]})]}),D.jsxs("div",{style:{display:"flex",background:"#e2e8f0",borderRadius:"8px",padding:"4px",border:"1px solid #cbd5e1"},children:[D.jsx("button",{onClick:()=>g("lista"),style:{flex:1,padding:"8px",borderRadius:"6px",border:"none",background:f==="lista"?"#ffffff":"transparent",color:f==="lista"?"#195c97":"#64748b",fontWeight:"700",cursor:"pointer",boxShadow:f==="lista"?"0 2px 5px rgba(0,0,0,0.1)":"none",fontSize:"12px"},children:"SEDES"}),D.jsx("button",{onClick:()=>g("reportes"),style:{flex:1,padding:"8px",borderRadius:"6px",border:"none",background:f==="reportes"?"#ffffff":"transparent",color:f==="reportes"?"#195c97":"#64748b",fontWeight:"700",cursor:"pointer",boxShadow:f==="reportes"?"0 2px 5px rgba(0,0,0,0.1)":"none",fontSize:"12px"},children:"GRFICOS"})]})]}),D.jsx("div",{style:{flex:1,overflowY:"auto",padding:"15px",background:"#ffffff"},className:"custom-scrollbar",children:f==="lista"?be.map(F=>{var Mt;const nt=G===F.nombre,ct=Xh(F.ris,F.tipo);return D.jsxs("div",{style:{marginBottom:"12px",border:`1px solid ${nt?ct:"#e2e8f0"}`,borderRadius:"10px",background:"#ffffff",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.2s"},children:[D.jsxs("div",{onClick:()=>ai(F.nombre,F.lat,F.lng),style:{padding:"12px 15px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",background:nt?`${ct}10`:"transparent"},children:[D.jsxs("div",{style:{overflow:"hidden",flex:1,display:"flex",alignItems:"center",gap:"10px"},children:[D.jsx("i",{className:"fas fa-map-marker-alt",style:{color:ct,fontSize:"16px"}}),D.jsxs("div",{children:[D.jsx("div",{style:{fontWeight:"700",color:"#334155",fontSize:"13px"},children:F.nombre}),D.jsxs("div",{style:{fontSize:"11px",color:"#64748b"},children:["Capacidad: ",D.jsx("b",{children:F.capacidadTotal})]})]})]}),D.jsxs("span",{style:{background:F.disponible>0?"#d1fae5":"#fee2e2",color:F.disponible>0?"#059669":"#dc2626",fontSize:"11px",fontWeight:"800",padding:"4px 10px",borderRadius:"12px",minWidth:"70px",textAlign:"center"},children:[F.disponible," Libres"]})]}),nt&&D.jsxs("div",{style:{padding:"15px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",animation:"fadeIn 0.2s ease-out"},children:[D.jsxs("div",{style:{fontSize:"11px",color:"#195c97",marginBottom:"12px",fontWeight:"800",letterSpacing:"0.5px"},children:["ASIGNADO (",F.cantidad,"):"]}),(Mt=F.desglose)==null?void 0:Mt.map((ht,Nt)=>D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px",background:"#ffffff",padding:"8px 10px",borderRadius:"6px",border:"1px solid #e2e8f0"},children:[D.jsx("span",{style:{color:"#334155",fontWeight:"600",width:"80%"},children:ht.universidad}),D.jsx("span",{style:{fontWeight:"800",color:"#195c97"},children:ht.cantidad})]},Nt)),(!F.desglose||F.desglose.length===0)&&D.jsx("div",{style:{fontSize:"12px",color:"#94a3b8",fontStyle:"italic",padding:"10px",textAlign:"center"},children:"Sin asignaciones registradas."})]})]},F.nombre)}):D.jsx("div",{className:"fade-in",children:D.jsx(QP,{data:be,tiempos:Z,selectedCareer:v})})}),D.jsx("div",{className:"source-footer",children:"Fuente: Adjudicacin 2026 - UFDI"})]})]})]})};function YP(){return D.jsx(WI,{children:D.jsx(FI,{children:D.jsx(r0,{path:"/",element:D.jsx(JP,{})})})})}ed.createRoot(document.getElementById("root")).render(D.jsx($r.StrictMode,{children:D.jsx(YP,{})}));
